{"ast":null,"code":"import _toConsumableArray from \"/home/browsewire/Desktop/CEI/cei/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _regeneratorRuntime from \"/home/browsewire/Desktop/CEI/cei/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _objectSpread from \"/home/browsewire/Desktop/CEI/cei/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _asyncToGenerator from \"/home/browsewire/Desktop/CEI/cei/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/home/browsewire/Desktop/CEI/cei/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/home/browsewire/Desktop/CEI/cei/client/src/views/app/pages/product/image-list.js\";\n\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { servicePath } from '../../../../constants/defaultValues';\nimport ListPageHeading from '../../../../containers/pages/ListPageHeading';\nimport AddNewModal from '../../../../containers/pages/AddNewModal';\nimport ListPageListing from '../../../../containers/pages/ListPageListing';\nimport useMousetrap from '../../../../hooks/use-mousetrap';\n\nvar getIndex = function getIndex(value, arr, prop) {\n  for (var i = 0; i < arr.length; i += 1) {\n    if (arr[i][prop] === value) {\n      return i;\n    }\n  }\n\n  return -1;\n};\n\nvar apiUrl = \"\".concat(servicePath, \"/cakes/paging\");\nvar orderOptions = [{\n  column: 'title',\n  label: 'Product Name'\n}, {\n  column: 'category',\n  label: 'Category'\n}, {\n  column: 'status',\n  label: 'Status'\n}];\nvar pageSizes = [4, 8, 12, 20];\nvar categories = [{\n  label: 'Cakes',\n  value: 'Cakes',\n  key: 0\n}, {\n  label: 'Cupcakes',\n  value: 'Cupcakes',\n  key: 1\n}, {\n  label: 'Desserts',\n  value: 'Desserts',\n  key: 2\n}];\n\nvar ImageListPages = function ImageListPages(_ref) {\n  var match = _ref.match;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      isLoaded = _useState2[0],\n      setIsLoaded = _useState2[1];\n\n  var _useState3 = useState('imagelist'),\n      _useState4 = _slicedToArray(_useState3, 2),\n      displayMode = _useState4[0],\n      setDisplayMode = _useState4[1];\n\n  var _useState5 = useState(1),\n      _useState6 = _slicedToArray(_useState5, 2),\n      currentPage = _useState6[0],\n      setCurrentPage = _useState6[1];\n\n  var _useState7 = useState(8),\n      _useState8 = _slicedToArray(_useState7, 2),\n      selectedPageSize = _useState8[0],\n      setSelectedPageSize = _useState8[1];\n\n  var _useState9 = useState({\n    column: 'title',\n    label: 'Product Name'\n  }),\n      _useState10 = _slicedToArray(_useState9, 2),\n      selectedOrderOption = _useState10[0],\n      setSelectedOrderOption = _useState10[1];\n\n  var _useState11 = useState(false),\n      _useState12 = _slicedToArray(_useState11, 2),\n      modalOpen = _useState12[0],\n      setModalOpen = _useState12[1];\n\n  var _useState13 = useState(0),\n      _useState14 = _slicedToArray(_useState13, 2),\n      totalItemCount = _useState14[0],\n      setTotalItemCount = _useState14[1];\n\n  var _useState15 = useState(1),\n      _useState16 = _slicedToArray(_useState15, 2),\n      totalPage = _useState16[0],\n      setTotalPage = _useState16[1];\n\n  var _useState17 = useState(''),\n      _useState18 = _slicedToArray(_useState17, 2),\n      search = _useState18[0],\n      setSearch = _useState18[1];\n\n  var _useState19 = useState([]),\n      _useState20 = _slicedToArray(_useState19, 2),\n      selectedItems = _useState20[0],\n      setSelectedItems = _useState20[1];\n\n  var _useState21 = useState([]),\n      _useState22 = _slicedToArray(_useState21, 2),\n      items = _useState22[0],\n      setItems = _useState22[1];\n\n  var _useState23 = useState(null),\n      _useState24 = _slicedToArray(_useState23, 2),\n      lastChecked = _useState24[0],\n      setLastChecked = _useState24[1];\n\n  useEffect(function () {\n    setCurrentPage(1);\n  }, [selectedPageSize, selectedOrderOption]);\n  useEffect(function () {\n    function fetchData() {\n      return _fetchData.apply(this, arguments);\n    }\n\n    function _fetchData() {\n      _fetchData = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                axios.get(\"\".concat(apiUrl, \"?pageSize=\").concat(selectedPageSize, \"&currentPage=\").concat(currentPage, \"&orderBy=\").concat(selectedOrderOption.column, \"&search=\").concat(search)).then(function (res) {\n                  return res.data;\n                }).then(function (data) {\n                  setTotalPage(data.totalPage);\n                  setItems(data.data.map(function (x) {\n                    return _objectSpread(_objectSpread({}, x), {}, {\n                      img: x.img.replace(\"img/\", \"img/products/\")\n                    });\n                  }));\n                  setSelectedItems([]);\n                  setTotalItemCount(data.totalItem);\n                  setIsLoaded(true);\n                });\n\n              case 1:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n      return _fetchData.apply(this, arguments);\n    }\n\n    fetchData();\n  }, [selectedPageSize, currentPage, selectedOrderOption, search]);\n\n  var onCheckItem = function onCheckItem(event, id) {\n    if (event.target.tagName === 'A' || event.target.parentElement && event.target.parentElement.tagName === 'A') {\n      return true;\n    }\n\n    if (lastChecked === null) {\n      setLastChecked(id);\n    }\n\n    var selectedList = _toConsumableArray(selectedItems);\n\n    if (selectedList.includes(id)) {\n      selectedList = selectedList.filter(function (x) {\n        return x !== id;\n      });\n    } else {\n      selectedList.push(id);\n    }\n\n    setSelectedItems(selectedList);\n\n    if (event.shiftKey) {\n      var newItems = _toConsumableArray(items);\n\n      var start = getIndex(id, newItems, 'id');\n      var end = getIndex(lastChecked, newItems, 'id');\n      newItems = newItems.slice(Math.min(start, end), Math.max(start, end) + 1);\n      selectedItems.push.apply(selectedItems, _toConsumableArray(newItems.map(function (item) {\n        return item.id;\n      })));\n      selectedList = Array.from(new Set(selectedItems));\n      setSelectedItems(selectedList);\n    }\n\n    document.activeElement.blur();\n    return false;\n  };\n\n  var handleChangeSelectAll = function handleChangeSelectAll(isToggle) {\n    if (selectedItems.length >= items.length) {\n      if (isToggle) {\n        setSelectedItems([]);\n      }\n    } else {\n      setSelectedItems(items.map(function (x) {\n        return x.id;\n      }));\n    }\n\n    document.activeElement.blur();\n    return false;\n  };\n\n  var onContextMenuClick = function onContextMenuClick(e, data) {\n    // params : (e,data,target)\n    console.log('onContextMenuClick - selected items', selectedItems);\n    console.log('onContextMenuClick - action : ', data.action);\n  };\n\n  var onContextMenu = function onContextMenu(e, data) {\n    var clickedProductId = data.data;\n\n    if (!selectedItems.includes(clickedProductId)) {\n      setSelectedItems([clickedProductId]);\n    }\n\n    return true;\n  };\n\n  useMousetrap(['ctrl+a', 'command+a'], function () {\n    handleChangeSelectAll(false);\n  });\n  useMousetrap(['ctrl+d', 'command+d'], function () {\n    setSelectedItems([]);\n    return false;\n  });\n  var startIndex = (currentPage - 1) * selectedPageSize;\n  var endIndex = currentPage * selectedPageSize;\n  return !isLoaded ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"loading\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 5\n    }\n  }) : /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"disable-text-selection\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(ListPageHeading, {\n    heading: \"menu.image-list\",\n    displayMode: displayMode,\n    changeDisplayMode: setDisplayMode,\n    handleChangeSelectAll: handleChangeSelectAll,\n    changeOrderBy: function changeOrderBy(column) {\n      setSelectedOrderOption(orderOptions.find(function (x) {\n        return x.column === column;\n      }));\n    },\n    changePageSize: setSelectedPageSize,\n    selectedPageSize: selectedPageSize,\n    totalItemCount: totalItemCount,\n    selectedOrderOption: selectedOrderOption,\n    match: match,\n    startIndex: startIndex,\n    endIndex: endIndex,\n    selectedItemsLength: selectedItems ? selectedItems.length : 0,\n    itemsLength: items ? items.length : 0,\n    onSearchKey: function onSearchKey(e) {\n      if (e.key === 'Enter') {\n        setSearch(e.target.value.toLowerCase());\n      }\n    },\n    orderOptions: orderOptions,\n    pageSizes: pageSizes,\n    toggleModal: function toggleModal() {\n      return setModalOpen(!modalOpen);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(AddNewModal, {\n    modalOpen: modalOpen,\n    toggleModal: function toggleModal() {\n      return setModalOpen(!modalOpen);\n    },\n    categories: categories,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(ListPageListing, {\n    items: items,\n    displayMode: displayMode,\n    selectedItems: selectedItems,\n    onCheckItem: onCheckItem,\n    currentPage: currentPage,\n    totalPage: totalPage,\n    onContextMenuClick: onContextMenuClick,\n    onContextMenu: onContextMenu,\n    onChangePage: setCurrentPage,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 9\n    }\n  })));\n};\n\nexport default ImageListPages;","map":{"version":3,"sources":["/home/browsewire/Desktop/CEI/cei/client/src/views/app/pages/product/image-list.js"],"names":["React","useState","useEffect","axios","servicePath","ListPageHeading","AddNewModal","ListPageListing","useMousetrap","getIndex","value","arr","prop","i","length","apiUrl","orderOptions","column","label","pageSizes","categories","key","ImageListPages","match","isLoaded","setIsLoaded","displayMode","setDisplayMode","currentPage","setCurrentPage","selectedPageSize","setSelectedPageSize","selectedOrderOption","setSelectedOrderOption","modalOpen","setModalOpen","totalItemCount","setTotalItemCount","totalPage","setTotalPage","search","setSearch","selectedItems","setSelectedItems","items","setItems","lastChecked","setLastChecked","fetchData","get","then","res","data","map","x","img","replace","totalItem","onCheckItem","event","id","target","tagName","parentElement","selectedList","includes","filter","push","shiftKey","newItems","start","end","slice","Math","min","max","item","Array","from","Set","document","activeElement","blur","handleChangeSelectAll","isToggle","onContextMenuClick","e","console","log","action","onContextMenu","clickedProductId","startIndex","endIndex","find","toLowerCase"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\n\nimport axios from 'axios';\n\nimport { servicePath } from '../../../../constants/defaultValues';\n\nimport ListPageHeading from '../../../../containers/pages/ListPageHeading';\nimport AddNewModal from '../../../../containers/pages/AddNewModal';\nimport ListPageListing from '../../../../containers/pages/ListPageListing';\nimport useMousetrap from '../../../../hooks/use-mousetrap';\n\nconst getIndex = (value, arr, prop) => {\n  for (let i = 0; i < arr.length; i += 1) {\n    if (arr[i][prop] === value) {\n      return i;\n    }\n  }\n  return -1;\n};\n\nconst apiUrl = `${servicePath}/cakes/paging`;\n\nconst orderOptions = [\n  { column: 'title', label: 'Product Name' },\n  { column: 'category', label: 'Category' },\n  { column: 'status', label: 'Status' },\n];\nconst pageSizes = [4, 8, 12, 20];\n\nconst categories = [\n  { label: 'Cakes', value: 'Cakes', key: 0 },\n  { label: 'Cupcakes', value: 'Cupcakes', key: 1 },\n  { label: 'Desserts', value: 'Desserts', key: 2 },\n];\n\nconst ImageListPages = ({ match }) => {\n  const [isLoaded, setIsLoaded] = useState(false);\n  const [displayMode, setDisplayMode] = useState('imagelist');\n  const [currentPage, setCurrentPage] = useState(1);\n  const [selectedPageSize, setSelectedPageSize] = useState(8);\n  const [selectedOrderOption, setSelectedOrderOption] = useState({\n    column: 'title',\n    label: 'Product Name',\n  });\n\n  const [modalOpen, setModalOpen] = useState(false);\n  const [totalItemCount, setTotalItemCount] = useState(0);\n  const [totalPage, setTotalPage] = useState(1);\n  const [search, setSearch] = useState('');\n  const [selectedItems, setSelectedItems] = useState([]);\n  const [items, setItems] = useState([]);\n  const [lastChecked, setLastChecked] = useState(null);\n\n  useEffect(() => {\n    setCurrentPage(1);\n  }, [selectedPageSize, selectedOrderOption]);\n\n  useEffect(() => {\n    async function fetchData() {\n      axios\n        .get(\n          `${apiUrl}?pageSize=${selectedPageSize}&currentPage=${currentPage}&orderBy=${selectedOrderOption.column}&search=${search}`\n        )\n        .then((res) => {\n          return res.data;\n        })\n        .then((data) => {\n          setTotalPage(data.totalPage);\n          setItems(data.data.map(x=>{ return { ...x,img : x.img.replace(\"img/\",\"img/products/\")}}));\n          setSelectedItems([]);\n          setTotalItemCount(data.totalItem);\n          setIsLoaded(true);\n        });\n    }\n    fetchData();\n  }, [selectedPageSize, currentPage, selectedOrderOption, search]);\n\n  const onCheckItem = (event, id) => {\n    if (\n      event.target.tagName === 'A' ||\n      (event.target.parentElement && event.target.parentElement.tagName === 'A')\n    ) {\n      return true;\n    }\n    if (lastChecked === null) {\n      setLastChecked(id);\n    }\n\n    let selectedList = [...selectedItems];\n    if (selectedList.includes(id)) {\n      selectedList = selectedList.filter((x) => x !== id);\n    } else {\n      selectedList.push(id);\n    }\n    setSelectedItems(selectedList);\n\n    if (event.shiftKey) {\n      let newItems = [...items];\n      const start = getIndex(id, newItems, 'id');\n      const end = getIndex(lastChecked, newItems, 'id');\n      newItems = newItems.slice(Math.min(start, end), Math.max(start, end) + 1);\n      selectedItems.push(\n        ...newItems.map((item) => {\n          return item.id;\n        })\n      );\n      selectedList = Array.from(new Set(selectedItems));\n      setSelectedItems(selectedList);\n    }\n    document.activeElement.blur();\n    return false;\n  };\n\n  const handleChangeSelectAll = (isToggle) => {\n    if (selectedItems.length >= items.length) {\n      if (isToggle) {\n        setSelectedItems([]);\n      }\n    } else {\n      setSelectedItems(items.map((x) => x.id));\n    }\n    document.activeElement.blur();\n    return false;\n  };\n\n  const onContextMenuClick = (e, data) => {\n    // params : (e,data,target)\n    console.log('onContextMenuClick - selected items', selectedItems);\n    console.log('onContextMenuClick - action : ', data.action);\n  };\n\n  const onContextMenu = (e, data) => {\n    const clickedProductId = data.data;\n    if (!selectedItems.includes(clickedProductId)) {\n      setSelectedItems([clickedProductId]);\n    }\n\n    return true;\n  };\n\n  useMousetrap(['ctrl+a', 'command+a'], () => {\n    handleChangeSelectAll(false);\n  });\n\n  useMousetrap(['ctrl+d', 'command+d'], () => {\n    setSelectedItems([]);\n    return false;\n  });\n\n  const startIndex = (currentPage - 1) * selectedPageSize;\n  const endIndex = currentPage * selectedPageSize;\n\n  return !isLoaded ? (\n    <div className=\"loading\" />\n  ) : (\n    <>\n      <div className=\"disable-text-selection\">\n        <ListPageHeading\n          heading=\"menu.image-list\"\n          displayMode={displayMode}\n          changeDisplayMode={setDisplayMode}\n          handleChangeSelectAll={handleChangeSelectAll}\n          changeOrderBy={(column) => {\n            setSelectedOrderOption(\n              orderOptions.find((x) => x.column === column)\n            );\n          }}\n          changePageSize={setSelectedPageSize}\n          selectedPageSize={selectedPageSize}\n          totalItemCount={totalItemCount}\n          selectedOrderOption={selectedOrderOption}\n          match={match}\n          startIndex={startIndex}\n          endIndex={endIndex}\n          selectedItemsLength={selectedItems ? selectedItems.length : 0}\n          itemsLength={items ? items.length : 0}\n          onSearchKey={(e) => {\n            if (e.key === 'Enter') {\n              setSearch(e.target.value.toLowerCase());\n            }\n          }}\n          orderOptions={orderOptions}\n          pageSizes={pageSizes}\n          toggleModal={() => setModalOpen(!modalOpen)}\n        />\n        <AddNewModal\n          modalOpen={modalOpen}\n          toggleModal={() => setModalOpen(!modalOpen)}\n          categories={categories}\n        />\n        <ListPageListing\n          items={items}\n          displayMode={displayMode}\n          selectedItems={selectedItems}\n          onCheckItem={onCheckItem}\n          currentPage={currentPage}\n          totalPage={totalPage}\n          onContextMenuClick={onContextMenuClick}\n          onContextMenu={onContextMenu}\n          onChangePage={setCurrentPage}\n        />\n      </div>\n    </>\n  );\n};\n\nexport default ImageListPages;\n"]},"metadata":{},"sourceType":"module"}