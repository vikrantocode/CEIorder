{"ast":null,"code":"import _regeneratorRuntime from \"/home/browsewire/Desktop/CEIorder/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/browsewire/Desktop/CEIorder/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/home/browsewire/Desktop/CEIorder/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/home/browsewire/Desktop/CEIorder/client/src/layout/AppLayout.js\";\n\nimport React, { useEffect, useState, useContext } from 'react';\nimport { connect } from 'react-redux';\nimport { withRouter } from 'react-router-dom';\nimport userManagement from '../constants/menu';\nimport TopNav from '../containers/navs/Topnav';\nimport Sidebar from '../containers/navs/Sidebar';\nimport Footer from '../containers/navs/Footer';\nimport Authservice from \"../AuthHeader/authheader\";\nimport { NotificationManager } from '../components/common/react-notifications';\nimport { UserContext } from \"../Context/UserContext\";\nimport axios from 'axios';\n\nvar AppLayout = function AppLayout(_ref) {\n  var containerClassnames = _ref.containerClassnames,\n      children = _ref.children,\n      history = _ref.history;\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      menuItems = _useState2[0],\n      setmenuItems = _useState2[1];\n\n  var _useContext = useContext(UserContext),\n      _useContext2 = _slicedToArray(_useContext, 2),\n      user = _useContext2[0],\n      setUser = _useContext2[1]; // GET THE USER DATA\n\n\n  useEffect(function () {\n    setmenuItems(userManagement());\n    console.log(menuItems);\n  }, []);\n  useEffect(function () {\n    var getuserData = /*#__PURE__*/function () {\n      var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        var user;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                user = Authservice.getCurrentUser();\n                _context.next = 3;\n                return axios.get(\"/api/userData\", {\n                  params: {\n                    id: user.user.id\n                  }\n                }).then(function (res) {\n                  console.log(res.data);\n                  setUser(res.data.data);\n                });\n\n              case 3:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function getuserData() {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n\n    getuserData();\n  }, []); // if not user, then redirect to login page\n\n  useEffect(function () {\n    var checkAuthentication = /*#__PURE__*/function () {\n      var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return axios.get(\"/api/dashboard-page\", {\n                  headers: Authservice.authHeader()\n                }).then(function (res) {\n                  console.log(\"Response is\", res.data);\n\n                  if (res.data.error) {\n                    history.push(\"/user/login\");\n                  } else if (res.data.success) {\n                    console.log(\"loggedd in\");\n                  }\n                });\n\n              case 2:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n\n      return function checkAuthentication() {\n        return _ref3.apply(this, arguments);\n      };\n    }();\n\n    checkAuthentication();\n  }, []); // useEffect(()=>{\n  // })\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    id: \"app-container\",\n    className: containerClassnames,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(TopNav, {\n    history: history,\n    user: user,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Sidebar, {\n    menuItems: menuItems,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"main\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container-fluid\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 9\n    }\n  }, children)), /*#__PURE__*/React.createElement(Footer, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }\n  }));\n};\n\nvar mapStateToProps = function mapStateToProps(_ref4) {\n  var menu = _ref4.menu;\n  var containerClassnames = menu.containerClassnames;\n  return {\n    containerClassnames: containerClassnames\n  };\n};\n\nvar mapActionToProps = {};\nexport default withRouter(connect(mapStateToProps, mapActionToProps)(AppLayout));","map":{"version":3,"sources":["/home/browsewire/Desktop/CEIorder/client/src/layout/AppLayout.js"],"names":["React","useEffect","useState","useContext","connect","withRouter","userManagement","TopNav","Sidebar","Footer","Authservice","NotificationManager","UserContext","axios","AppLayout","containerClassnames","children","history","menuItems","setmenuItems","user","setUser","console","log","getuserData","getCurrentUser","get","params","id","then","res","data","checkAuthentication","headers","authHeader","error","push","success","mapStateToProps","menu","mapActionToProps"],"mappings":";;;;;;;AAAA,OAAOA,KAAP,IAAcC,SAAd,EAAwBC,QAAxB,EAAiCC,UAAjC,QAAkD,OAAlD;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,SAASC,UAAT,QAA2B,kBAA3B;AACA,OAAOC,cAAP,MAA2B,mBAA3B;AACA,OAAOC,MAAP,MAAmB,2BAAnB;AACA,OAAOC,OAAP,MAAoB,4BAApB;AACA,OAAOC,MAAP,MAAmB,2BAAnB;AACA,OAAOC,WAAP,MAAwB,0BAAxB;AACA,SAASC,mBAAT,QAAoC,0CAApC;AACA,SAAQC,WAAR,QAA0B,wBAA1B;AAEA,OAAOC,KAAP,MAAkB,OAAlB;;AACA,IAAMC,SAAS,GAAG,SAAZA,SAAY,OAAgD;AAAA,MAA7CC,mBAA6C,QAA7CA,mBAA6C;AAAA,MAAxBC,QAAwB,QAAxBA,QAAwB;AAAA,MAAdC,OAAc,QAAdA,OAAc;;AAAA,kBAC/Bf,QAAQ,CAAC,EAAD,CADuB;AAAA;AAAA,MACzDgB,SADyD;AAAA,MAC/CC,YAD+C;;AAAA,oBAExChB,UAAU,CAACS,WAAD,CAF8B;AAAA;AAAA,MAEzDQ,IAFyD;AAAA,MAEnDC,OAFmD,oBAIhE;;;AACApB,EAAAA,SAAS,CAAC,YAAI;AACVkB,IAAAA,YAAY,CAACb,cAAc,EAAf,CAAZ;AACAgB,IAAAA,OAAO,CAACC,GAAR,CAAYL,SAAZ;AACH,GAHQ,EAGP,EAHO,CAAT;AAIAjB,EAAAA,SAAS,CAAC,YAAI;AACZ,QAAMuB,WAAW;AAAA,2EAAE;AAAA;AAAA;AAAA;AAAA;AAAA;AACXJ,gBAAAA,IADW,GACJV,WAAW,CAACe,cAAZ,EADI;AAAA;AAAA,uBAEXZ,KAAK,CAACa,GAAN,CAAU,eAAV,EAA0B;AAACC,kBAAAA,MAAM,EAAC;AAACC,oBAAAA,EAAE,EAACR,IAAI,CAACA,IAAL,CAAUQ;AAAd;AAAR,iBAA1B,EAAsDC,IAAtD,CAA2D,UAAAC,GAAG,EAAE;AAClER,kBAAAA,OAAO,CAACC,GAAR,CAAYO,GAAG,CAACC,IAAhB;AACIV,kBAAAA,OAAO,CAACS,GAAG,CAACC,IAAJ,CAASA,IAAV,CAAP;AACP,iBAHK,CAFW;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAF;;AAAA,sBAAXP,WAAW;AAAA;AAAA;AAAA,OAAjB;;AAOAA,IAAAA,WAAW;AACZ,GATQ,EASP,EATO,CAAT,CATgE,CAsBhE;;AACAvB,EAAAA,SAAS,CAAC,YAAM;AACd,QAAM+B,mBAAmB;AAAA,2EAAC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAClBnB,KAAK,CAACa,GAAN,CAAU,qBAAV,EAAiC;AAAEO,kBAAAA,OAAO,EAAEvB,WAAW,CAACwB,UAAZ;AAAX,iBAAjC,EAAwEL,IAAxE,CAA6E,UAAAC,GAAG,EAAI;AACxFR,kBAAAA,OAAO,CAACC,GAAR,CAAY,aAAZ,EAA0BO,GAAG,CAACC,IAA9B;;AACA,sBAAGD,GAAG,CAACC,IAAJ,CAASI,KAAZ,EAAkB;AAChBlB,oBAAAA,OAAO,CAACmB,IAAR,CAAa,aAAb;AACD,mBAFD,MAGK,IAAGN,GAAG,CAACC,IAAJ,CAASM,OAAZ,EAAoB;AACvBf,oBAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ;AAED;AACJ,iBATO,CADkB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAD;;AAAA,sBAAnBS,mBAAmB;AAAA;AAAA;AAAA,OAAzB;;AAYAA,IAAAA,mBAAmB;AACpB,GAdQ,EAcP,EAdO,CAAT,CAvBgE,CAuChE;AAEA;;AACA,sBACE;AAAK,IAAA,EAAE,EAAC,eAAR;AAAwB,IAAA,SAAS,EAAEjB,mBAAnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,MAAD;AAAQ,IAAA,OAAO,EAAEE,OAAjB;AAA0B,IAAA,IAAI,EAAEG,IAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,eAEE,oBAAC,OAAD;AAAS,IAAA,SAAS,EAAEF,SAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,eAGE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAK,IAAA,SAAS,EAAC,iBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAkCF,QAAlC,CADF,CAHF,eAME,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IANF,CADF;AAWD,CArDD;;AAsDA,IAAMsB,eAAe,GAAG,SAAlBA,eAAkB,QAAc;AAAA,MAAXC,IAAW,SAAXA,IAAW;AAAA,MAC5BxB,mBAD4B,GACJwB,IADI,CAC5BxB,mBAD4B;AAEpC,SAAO;AAAEA,IAAAA,mBAAmB,EAAnBA;AAAF,GAAP;AACD,CAHD;;AAIA,IAAMyB,gBAAgB,GAAG,EAAzB;AAEA,eAAenC,UAAU,CACvBD,OAAO,CAACkC,eAAD,EAAkBE,gBAAlB,CAAP,CAA2C1B,SAA3C,CADuB,CAAzB","sourcesContent":["import React,{useEffect,useState,useContext} from 'react';\nimport { connect } from 'react-redux';\nimport { withRouter } from 'react-router-dom';\nimport userManagement from '../constants/menu';\nimport TopNav from '../containers/navs/Topnav';\nimport Sidebar from '../containers/navs/Sidebar';\nimport Footer from '../containers/navs/Footer';\nimport Authservice from \"../AuthHeader/authheader\"\nimport { NotificationManager } from '../components/common/react-notifications';\nimport {UserContext} from \"../Context/UserContext\"\n\nimport axios from 'axios'\nconst AppLayout = ({ containerClassnames, children, history }) => {\n  const [menuItems,setmenuItems] = useState([])\n  const [user, setUser] = useContext(UserContext)\n  \n  // GET THE USER DATA\n  useEffect(()=>{\n      setmenuItems(userManagement())\n      console.log(menuItems)\n  },[])\n  useEffect(()=>{\n    const getuserData =async ()=>{\n      const user = Authservice.getCurrentUser()\n      await axios.get(\"/api/userData\",{params:{id:user.user.id}}).then(res=>{\n          console.log(res.data)\n              setUser(res.data.data)\n      })\n    }  \n    getuserData()\n  },[])\n\n     \n\n  // if not user, then redirect to login page\n  useEffect(() => {\n    const checkAuthentication=async ()=>{\n      await axios.get(\"/api/dashboard-page\", { headers: Authservice.authHeader() }).then(res => {\n        console.log(\"Response is\",res.data)\n        if(res.data.error){\n          history.push(\"/user/login\")\n        }\n        else if(res.data.success){\n          console.log(\"loggedd in\");\n          \n        }\n    })\n  }\n    checkAuthentication()\n  },[])\n  \n  // useEffect(()=>{\n\n  // })\n  return (\n    <div id=\"app-container\" className={containerClassnames}>\n      <TopNav history={history} user={user}/>\n      <Sidebar menuItems={menuItems} />\n      <main>\n        <div className=\"container-fluid\">{children}</div>\n      </main>\n      <Footer />\n    </div>\n  );\n\n}\nconst mapStateToProps = ({ menu }) => {\n  const { containerClassnames } = menu;\n  return { containerClassnames };\n};\nconst mapActionToProps = {};\n\nexport default withRouter(\n  connect(mapStateToProps, mapActionToProps)(AppLayout)\n);\n"]},"metadata":{},"sourceType":"module"}