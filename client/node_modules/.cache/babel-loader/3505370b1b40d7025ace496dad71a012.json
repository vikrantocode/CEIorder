{"ast":null,"code":"import _toConsumableArray from\"/home/browsewire/Desktop/CEI/cei/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _regeneratorRuntime from\"/home/browsewire/Desktop/CEI/cei/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/browsewire/Desktop/CEI/cei/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/browsewire/Desktop/CEI/cei/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import axios from'axios';import{servicePath}from'../../../../constants/defaultValues';import CustomSelectInput from'../../../../components/common/CustomSelectInput';import useMousetrap from'../../../../hooks/use-mousetrap';import{Button,Modal,ModalHeader,ModalBody,ModalFooter,Input,Label,Row,Col}from'reactstrap';import IntlMessages from'../../../../helpers/IntlMessages';import Select from'react-select';import WarehousesListHeading from'./warehouse-list-heading';import WarehousesPageListing from'./warehouse-page-listing';import WarehousesPageHeading from'./warehouses-page-heading';import{NotificationManager}from'../../../../components/common/react-notifications';var orderOptions=[{label:'Id',value:'id'},{label:'Name',value:'name'},{label:'Created By',value:'userId'},{label:'Created On',value:'createdAt'}];var orderManners=[{value:'ASC',label:'Ascending'},{value:'DESC',label:'Descending'}];var Warehouses=function Warehouses(_ref){var match=_ref.match;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isLoaded=_useState2[0],setIsLoaded=_useState2[1];var _useState3=useState('thumblist'),_useState4=_slicedToArray(_useState3,2),displayMode=_useState4[0],setDisplayMode=_useState4[1];var _useState5=useState(1),_useState6=_slicedToArray(_useState5,2),currentPage=_useState6[0],setCurrentPage=_useState6[1];var _useState7=useState(15),_useState8=_slicedToArray(_useState7,2),selectedPageSize=_useState8[0],setSelectedPageSize=_useState8[1];var _useState9=useState({column:'id',label:'Id'}),_useState10=_slicedToArray(_useState9,2),selectedOrderOption=_useState10[0],setSelectedOrderOption=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),modalBasic=_useState12[0],setModalBasic=_useState12[1];var _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),modalOpen=_useState14[0],setModalOpen=_useState14[1];var _useState15=useState(0),_useState16=_slicedToArray(_useState15,2),totalItemCount=_useState16[0],setTotalItemCount=_useState16[1];var _useState17=useState(1),_useState18=_slicedToArray(_useState17,2),totalPage=_useState18[0],setTotalPage=_useState18[1];var _useState19=useState([]),_useState20=_slicedToArray(_useState19,2),selectedItems=_useState20[0],setSelectedItems=_useState20[1];var _useState21=useState([]),_useState22=_slicedToArray(_useState21,2),items=_useState22[0],setItems=_useState22[1];var _useState23=useState(null),_useState24=_slicedToArray(_useState23,2),lastChecked=_useState24[0],setLastChecked=_useState24[1];var _useState25=useState(false),_useState26=_slicedToArray(_useState25,2),modal=_useState26[0],setModal=_useState26[1];var _useState27=useState(false),_useState28=_slicedToArray(_useState27,2),modalDelete=_useState28[0],setModalDelete=_useState28[1];var _useState29=useState(),_useState30=_slicedToArray(_useState29,2),id=_useState30[0],setId=_useState30[1];var _useState31=useState({label:'Id',value:'id'}),_useState32=_slicedToArray(_useState31,2),orderBy=_useState32[0],setOrderBy=_useState32[1];var _useState33=useState(false),_useState34=_slicedToArray(_useState33,2),change=_useState34[0],setChange=_useState34[1];var _useState35=useState(''),_useState36=_slicedToArray(_useState35,2),searchItem=_useState36[0],setSearchItem=_useState36[1];var _useState37=useState({label:'Ascending',value:'ASC'}),_useState38=_slicedToArray(_useState37,2),orderManner=_useState38[0],setOrderManner=_useState38[1];useEffect(function(){setCurrentPage(1);},[selectedPageSize,selectedOrderOption]);useEffect(function(){_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _yield$axios$get,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get(\"/api/orders/warehouses/\".concat(currentPage,\"?pageSize=\").concat(selectedPageSize,\"&orderBy=\").concat(orderBy.value,\"&orderManner=\").concat(orderManner.value,\"&searchItem=\").concat(searchItem));case 2:_yield$axios$get=_context.sent;data=_yield$axios$get.data;console.log(data);setItems(data.data);setTotalItemCount(data.totalCount);setTotalPage(data.totalPage);setSelectedItems([]);setIsLoaded(true);case 10:case\"end\":return _context.stop();}}},_callee);}))();},[change,currentPage,selectedPageSize,orderBy,orderManner,searchItem]);var getIndex=function getIndex(value,arr,prop){for(var i=0;i<arr.length;i+=1){if(arr[i][prop]===value){return i;}}return-1;};//const pageSizes = [4, 8, 12, 20];\nvar pageSizes=[15,50,100,150,200];// GET THE Category DETAILS AND OPEN THE EDIT MODAL\nvar openModal=function openModal(e){};// EDIT WAREHOUSE\nvar edit=function edit(id){console.log('edit'+id);setModal(true);};var view=function view(id){console.log('view'+id);};var deleteObject=function deleteObject(id){console.log('delete'+id);setId(id);setModalBasic(true);};var deleteAll=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return axios.post(\"/api/orders/warehouses/delete?id=\".concat(selectedItems));case 3:setModalDelete(false);setChange(!change);return _context2.abrupt(\"return\",NotificationManager.success('Deleted Successfully','Success',3000));case 8:_context2.prev=8;_context2.t0=_context2[\"catch\"](0);console.log(_context2.t0);return _context2.abrupt(\"return\",NotificationManager.error('Something went wrong','Error',3000));case 12:case\"end\":return _context2.stop();}}},_callee2,null,[[0,8]]);}));return function deleteAll(){return _ref3.apply(this,arguments);};}();var deleteObj=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return axios.post(\"/api/orders/warehouses/delete?id=\".concat(id));case 3:setModalBasic(false);setChange(!change);return _context3.abrupt(\"return\",NotificationManager.success('Deleted Successfully','Success',3000));case 8:_context3.prev=8;_context3.t0=_context3[\"catch\"](0);console.log(_context3.t0);return _context3.abrupt(\"return\",NotificationManager.error('Something went wrong','Error',3000));case 12:case\"end\":return _context3.stop();}}},_callee3,null,[[0,8]]);}));return function deleteObj(){return _ref4.apply(this,arguments);};}();// BULK STATUS CHANGE\nvar deactivate=function deactivate(e){};var activate=function activate(e){};var onCheckItem=function onCheckItem(event,id){if(event.target.tagName==='A'||event.target.parentElement&&event.target.parentElement.tagName==='A'){return true;}if(lastChecked===null){setLastChecked(id);}var selectedList=_toConsumableArray(selectedItems);if(selectedList.includes(id)){selectedList=selectedList.filter(function(x){return x!==id;});}else{selectedList.push(id);}setSelectedItems(selectedList);if(event.shiftKey){var newItems=_toConsumableArray(items);var start=getIndex(id,newItems,'id');var end=getIndex(lastChecked,newItems,'id');newItems=newItems.slice(Math.min(start,end),Math.max(start,end)+1);selectedItems.push.apply(selectedItems,_toConsumableArray(newItems.map(function(item){return item.id;})));selectedList=Array.from(new Set(selectedItems));setSelectedItems(selectedList);}document.activeElement.blur();return false;};var handleChangeSelectAll=function handleChangeSelectAll(isToggle){if(selectedItems.length>=items.length){if(isToggle){setSelectedItems([]);}}else{setSelectedItems(items.map(function(x){return x.id;}));}document.activeElement.blur();return false;};var onContextMenuClick=function onContextMenuClick(e,data){// params : (e,data,target)\nconsole.log('onContextMenuClick - selected items',selectedItems);console.log('onContextMenuClick - action : ',data.action);};var changePage=function changePage(i,size){setCurrentPage(i);setSelectedPageSize(size);};var onchangePagesize=function onchangePagesize(size){setCurrentPage(1);setSelectedPageSize(size);};var onContextMenu=function onContextMenu(e,data){var clickedCategoryId=data.data;if(!selectedItems.includes(clickedCategoryId)){setSelectedItems([clickedCategoryId]);}return true;};useMousetrap(['ctrl+a','command+a'],function(){handleChangeSelectAll(false);});useMousetrap(['ctrl+d','command+d'],function(){setSelectedItems([]);return false;});var startIndex=(currentPage-1)*selectedPageSize;var endIndex=currentPage*selectedPageSize;return!isLoaded?/*#__PURE__*/React.createElement(\"div\",{className:\"loading\"}):/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"disable-text-selection\"},/*#__PURE__*/React.createElement(WarehousesPageHeading,{setModalDelete:setModalDelete,heading:\"Warehouses\",addUrl:\"/app/orders/add-warehouse\",displayMode:displayMode,changeDisplayMode:setDisplayMode,handleChangeSelectAll:handleChangeSelectAll,setOrderBy:setOrderBy,setOrderManner:setOrderManner,setSearchItem:setSearchItem,orderBy:orderBy,orderManner:orderManner,onchangepagesize:onchangePagesize,changePageSize:setSelectedPageSize,selectedPageSize:selectedPageSize,totalItemCount:totalItemCount,selectedOrderOption:selectedOrderOption,match:match,startIndex:startIndex,endIndex:endIndex,selectedItemsLength:selectedItems?selectedItems.length:0,itemsLength:items?items.length:0,orderOptions:orderOptions,pageSizes:pageSizes,toggleModal:function toggleModal(){return setModalOpen(!modalOpen);},activate:activate,deactivate:deactivate,orderManners:orderManners,[\"setSearchItem\"]:setSearchItem}),items.length==0?'':/*#__PURE__*/React.createElement(WarehousesListHeading,{selectedItemsLength:selectedItems?selectedItems.length:0,handleChangeSelectAll:handleChangeSelectAll,itemsLength:items?items.length:0,orderManners:orderManners,orderBy:orderBy,setOrderBy:setOrderBy,setOrderManner:setOrderManner,orderManner:orderManner}),items.length==0?/*#__PURE__*/React.createElement(\"h3\",null,\"No Records found\"):/*#__PURE__*/React.createElement(WarehousesPageListing,{edit:edit,view:view,deleteObject:deleteObject,items:items,openModal:openModal,displayMode:displayMode,selectedItems:selectedItems,onCheckItem:onCheckItem,currentPage:currentPage,totalPage:totalPage,onContextMenuClick:onContextMenuClick,onContextMenu:onContextMenu,onChangePage:changePage,pagesize:selectedPageSize,setModalBasic:setModalBasic}),/*#__PURE__*/React.createElement(Modal,{isOpen:modalBasic,toggle:function toggle(){return setModal(!modalBasic);}},/*#__PURE__*/React.createElement(ModalHeader,null,/*#__PURE__*/React.createElement(IntlMessages,{id:\"Delete\"})),/*#__PURE__*/React.createElement(ModalBody,null,\"Are you sure you want to delete Warehouse?\"),/*#__PURE__*/React.createElement(ModalFooter,null,/*#__PURE__*/React.createElement(Button,{onClick:deleteObj,color:\"primary\"},\"Confirm\"),' ',/*#__PURE__*/React.createElement(Button,{color:\"secondary\",onClick:function onClick(){return setModalBasic(false);}},\"Cancel\"))),/*#__PURE__*/React.createElement(Modal,{isOpen:modalDelete,toggle:function toggle(){return setModalDelete(!modalDelete);}},/*#__PURE__*/React.createElement(ModalHeader,null,/*#__PURE__*/React.createElement(IntlMessages,{id:\"Delete\"})),/*#__PURE__*/React.createElement(ModalBody,null,\"Are you sure you want to delete selected items?\"),/*#__PURE__*/React.createElement(ModalFooter,null,/*#__PURE__*/React.createElement(Button,{onClick:function onClick(){return deleteAll();},color:\"primary\"},\"Confirm\"),' ',/*#__PURE__*/React.createElement(Button,{color:\"secondary\",onClick:function onClick(){return setModalDelete(false);}},\"Cancel\")))));};export default Warehouses;","map":null,"metadata":{},"sourceType":"module"}