{"ast":null,"code":"import _regeneratorRuntime from\"/home/browsewire/Desktop/CEI/cei/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/browsewire/Desktop/CEI/cei/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/browsewire/Desktop/CEI/cei/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState,useContext}from'react';import{connect}from'react-redux';import{withRouter}from'react-router-dom';import userManagement from'../constants/menu';import TopNav from'../containers/navs/Topnav';import Sidebar from'../containers/navs/Sidebar';import Footer from'../containers/navs/Footer';import Authservice from\"../AuthHeader/authheader\";import{NotificationManager}from'../components/common/react-notifications';import{UserContext}from\"../Context/UserContext\";import axios from'axios';var AppLayout=function AppLayout(_ref){var containerClassnames=_ref.containerClassnames,children=_ref.children,history=_ref.history;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),menuItems=_useState2[0],setmenuItems=_useState2[1];var _useContext=useContext(UserContext),_useContext2=_slicedToArray(_useContext,2),user=_useContext2[0],setUser=_useContext2[1];// GET THE USER DATA\nuseEffect(function(){setmenuItems(userManagement());console.log(menuItems);},[]);useEffect(function(){var getuserData=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var user;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:user=Authservice.getCurrentUser();_context.next=3;return axios.get(\"/api/userData\",{params:{id:user.user.id}}).then(function(res){console.log(res.data);setUser(res.data.data);});case 3:case\"end\":return _context.stop();}}},_callee);}));return function getuserData(){return _ref2.apply(this,arguments);};}();getuserData();},[]);// if not user, then redirect to login page\nuseEffect(function(){var checkAuthentication=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return axios.get(\"/api/dashboard-page\",{headers:Authservice.authHeader()}).then(function(res){console.log(\"Response is\",res.data);if(res.data.error){history.push(\"/user/login\");}else if(res.data.success){console.log(\"loggedd in\");}});case 2:case\"end\":return _context2.stop();}}},_callee2);}));return function checkAuthentication(){return _ref3.apply(this,arguments);};}();checkAuthentication();},[]);// useEffect(()=>{\n// })\nreturn/*#__PURE__*/React.createElement(\"div\",{id:\"app-container\",className:containerClassnames},/*#__PURE__*/React.createElement(TopNav,{history:history,user:user}),/*#__PURE__*/React.createElement(Sidebar,{menuItems:menuItems}),/*#__PURE__*/React.createElement(\"main\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"container-fluid\"},children)),/*#__PURE__*/React.createElement(Footer,null));};var mapStateToProps=function mapStateToProps(_ref4){var menu=_ref4.menu;var containerClassnames=menu.containerClassnames;return{containerClassnames:containerClassnames};};var mapActionToProps={};export default withRouter(connect(mapStateToProps,mapActionToProps)(AppLayout));","map":null,"metadata":{},"sourceType":"module"}