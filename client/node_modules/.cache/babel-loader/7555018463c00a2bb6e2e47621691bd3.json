{"ast":null,"code":"import _objectSpread from \"/home/browsewire/Desktop/hj/CEI/cei/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"/home/browsewire/Desktop/hj/CEI/cei/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/home/browsewire/Desktop/hj/CEI/cei/client/src/views/user/login.js\";\n\nimport React, { useState, useEffect, use } from 'react';\nimport { Row, Card, CardTitle, Label, FormGroup, Button } from 'reactstrap';\nimport { NavLink } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport { Formik, Form, Field } from 'formik';\nimport { NotificationManager } from '../../components/common/react-notifications';\nimport { loginUser } from '../../redux/actions';\nimport { Colxx } from '../../components/common/CustomBootstrap';\nimport IntlMessages from '../../helpers/IntlMessages';\nimport { GoogleLogin } from 'react-google-login';\nimport axios from 'axios'; // const validatePassword = (value) => {\n//   let error;\n//   if (!value) {\n//     error = 'Please enter your password';\n//   } else if (value.length < 8) {\n//     error = 'Value must be longer than 8 characters';\n//   }\n//   return error;\n// };\n\nvar styles = {\n  divStyle: {\n    margin: '1rem'\n  }\n};\n\nfunction InvalidMsg(textbox) {\n  if (textbox.value.length < 8) {\n    textbox.setCustomValidity('Password should be minimum 8 characters');\n  } else {\n    textbox.setCustomValidity('');\n  }\n\n  return true;\n}\n\nvar validateEmail = function validateEmail(value) {\n  var error;\n\n  if (!value) {\n    error = 'Please enter your email address';\n  } else if (!/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,4}$/i.test(value)) {\n    error = 'Invalid email address';\n  }\n\n  return error;\n};\n\nvar Login = function Login(_ref) {\n  var history = _ref.history,\n      loading = _ref.loading,\n      error = _ref.error,\n      loginUserAction = _ref.loginUserAction;\n\n  var _useState = useState({}),\n      _useState2 = _slicedToArray(_useState, 2),\n      formData = _useState2[0],\n      setformData = _useState2[1]; // WHEN GOOGLE LOGIN IS SUCCESSFULL\n\n\n  var onSuccessGoogle = function onSuccessGoogle(response) {\n    console.log(response);\n    axios.post('/api/googleLogin', {\n      tokenId: response.tokenId\n    }).then(function (response) {\n      if (response.data.token) {\n        localStorage.setItem('user', JSON.stringify(response.data));\n        localStorage.setItem('auth-token', response.data.token); // setAlert({ success: response.data.success })\n\n        history.push('/app');\n      } else if (response.data.error) {\n        console.log(response.data.error); // setAlert({ error: response.data.error })\n        // setOpen(true)\n      }\n    });\n  }; // IF GOOGLE LOGIN IS NOT SUCCESSFUL\n\n\n  var onFailureGoogle = function onFailureGoogle(response) {\n    console.log(response);\n  };\n\n  useEffect(function () {\n    if (error) {\n      NotificationManager.warning(error, 'Login Error', 3000, null, null, '');\n    }\n  }, [error]); // const onUserLogin = (values) => {\n  //   if (!loading) {\n  //     if (values.email !== '' && values.password !== '') {\n  //       loginUserAction(values, history);\n  //     }\n  //   }\n  // };\n  //LOGIN HANDLER\n\n  var onUserLogin = function onUserLogin(e) {\n    e.preventDefault();\n    var data = formData;\n    axios.post('/api/login', data).then(function (response) {\n      console.log(response.data);\n\n      if (response.data.token) {\n        localStorage.setItem('user', JSON.stringify(response.data));\n        localStorage.setItem('userId', response.data.user.id);\n        localStorage.setItem('auth-token', response.data.token);\n        history.push('/app');\n      } else if (response.data.error) {\n        NotificationManager.warning(response.data.error, 'Login Error', 3000, null, null, '');\n      }\n    });\n  }; // const initialValues = { email, password };\n\n\n  return /*#__PURE__*/React.createElement(Row, {\n    className: \"h-100\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Colxx, {\n    xxs: \"12\",\n    md: \"10\",\n    className: \"mx-auto my-auto\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Card, {\n    className: \"auth-card\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"position-relative image-side \",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"text-white h2\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 13\n    }\n  }, \"MAGIC IS IN THE DETAILS\"), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"white mb-0\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 13\n    }\n  }, \"Please use your credentials to login.\", /*#__PURE__*/React.createElement(\"br\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 15\n    }\n  }), \"If you are not a member, please\", ' ', /*#__PURE__*/React.createElement(NavLink, {\n    to: \"/user/register\",\n    className: \"white\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 15\n    }\n  }, \"register\"), \".\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-side\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      fontSize: '2.5rem'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 13\n    }\n  }, \"BUY SUPPLY APP\"), /*#__PURE__*/React.createElement(CardTitle, {\n    className: \"mb-4\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(IntlMessages, {\n    id: \"user.login-title\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(Formik, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Form, {\n    className: \"av-tooltip tooltip-label-bottom\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(FormGroup, {\n    className: \"form-group has-float-label\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Label, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(IntlMessages, {\n    id: \"user.email\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(Field, {\n    className: \"form-control\",\n    name: \"email\",\n    validate: validateEmail,\n    onChange: function onChange(e) {\n      setformData(_objectSpread(_objectSpread({}, formData), {}, {\n        email: e.target.value\n      }));\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 19\n    }\n  })), /*#__PURE__*/React.createElement(FormGroup, {\n    className: \"form-group has-float-label\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Label, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(IntlMessages, {\n    id: \"user.password\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(Field, {\n    onChange: function onChange(e) {\n      setformData(_objectSpread(_objectSpread({}, formData), {}, {\n        password: e.target.value\n      }));\n    },\n    className: \"form-control\",\n    type: \"password\",\n    name: \"password\",\n    oninput: function oninput() {\n      return InvalidMsg(_this);\n    },\n    onvalid: function onvalid() {\n      return InvalidMsg(_this);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 19\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    style: styles.divStyle,\n    className: \"d-flex justify-content-center align-items-center\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 17\n    }\n  }, \"OR\"), /*#__PURE__*/React.createElement(\"div\", {\n    style: styles.divStyle,\n    className: \"d-flex justify-content-center align-items-center\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(GoogleLogin, {\n    clientId: \"501516992284-icth2bhte5iu6fpskcd97hcia62f9qdd.apps.googleusercontent.com\" // render={renderProps => (\n    //   <button onClick={renderProps.onClick} style={{background:'red',height:'2rem',width:'8rem'}}>Login with google</button>\n    // )}\n    ,\n    buttonText: \"Login with Google\",\n    onSuccess: onSuccessGoogle,\n    onFailure: onFailureGoogle,\n    cookiePolicy: 'single_host_origin',\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 19\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"d-flex justify-content-between align-items-center\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(NavLink, {\n    to: \"/user/forgot-password\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(IntlMessages, {\n    id: \"user.forgot-password-question\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(NavLink, {\n    to: \"/user/register\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(IntlMessages, {\n    id: \"Create an Account\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 21\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"d-flex justify-content-center align-items-center\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    onClick: onUserLogin,\n    color: \"primary\",\n    className: \"btn-shadow btn-multiple-state \".concat(loading ? 'show-spinner' : ''),\n    size: \"lg\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"spinner d-inline-block\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"bounce1\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 23\n    }\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"bounce2\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 216,\n      columnNumber: 23\n    }\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"bounce3\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 217,\n      columnNumber: 23\n    }\n  })), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"label\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(IntlMessages, {\n    id: \"user.login-button\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 220,\n      columnNumber: 23\n    }\n  }))))))))));\n};\n\nvar mapStateToProps = function mapStateToProps(_ref2) {\n  var authUser = _ref2.authUser;\n  var loading = authUser.loading,\n      error = authUser.error;\n  return {\n    loading: loading,\n    error: error\n  };\n};\n\nexport default connect(mapStateToProps, {\n  loginUserAction: loginUser\n})(Login);","map":{"version":3,"sources":["/home/browsewire/Desktop/hj/CEI/cei/client/src/views/user/login.js"],"names":["React","useState","useEffect","use","Row","Card","CardTitle","Label","FormGroup","Button","NavLink","connect","Formik","Form","Field","NotificationManager","loginUser","Colxx","IntlMessages","GoogleLogin","axios","styles","divStyle","margin","InvalidMsg","textbox","value","length","setCustomValidity","validateEmail","error","test","Login","history","loading","loginUserAction","formData","setformData","onSuccessGoogle","response","console","log","post","tokenId","then","data","token","localStorage","setItem","JSON","stringify","push","onFailureGoogle","warning","onUserLogin","e","preventDefault","user","id","fontSize","email","target","password","mapStateToProps","authUser"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, use } from 'react';\nimport { Row, Card, CardTitle, Label, FormGroup, Button } from 'reactstrap';\nimport { NavLink } from 'react-router-dom';\nimport { connect } from 'react-redux';\n\nimport { Formik, Form, Field } from 'formik';\nimport { NotificationManager } from '../../components/common/react-notifications';\n\nimport { loginUser } from '../../redux/actions';\nimport { Colxx } from '../../components/common/CustomBootstrap';\nimport IntlMessages from '../../helpers/IntlMessages';\nimport { GoogleLogin } from 'react-google-login';\nimport axios from 'axios';\n\n// const validatePassword = (value) => {\n//   let error;\n//   if (!value) {\n//     error = 'Please enter your password';\n//   } else if (value.length < 8) {\n//     error = 'Value must be longer than 8 characters';\n//   }\n//   return error;\n// };\nconst styles = {\n  divStyle: {\n    margin: '1rem',\n  },\n};\nfunction InvalidMsg(textbox) {\n  if (textbox.value.length < 8) {\n    textbox.setCustomValidity('Password should be minimum 8 characters');\n  } else {\n    textbox.setCustomValidity('');\n  }\n  return true;\n}\nconst validateEmail = (value) => {\n  let error;\n  if (!value) {\n    error = 'Please enter your email address';\n  } else if (!/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,4}$/i.test(value)) {\n    error = 'Invalid email address';\n  }\n  return error;\n};\n\nconst Login = ({ history, loading, error, loginUserAction }) => {\n  const [formData, setformData] = useState({});\n\n  // WHEN GOOGLE LOGIN IS SUCCESSFULL\n  const onSuccessGoogle = (response) => {\n    console.log(response);\n    axios\n      .post('/api/googleLogin', { tokenId: response.tokenId })\n      .then((response) => {\n        if (response.data.token) {\n          localStorage.setItem('user', JSON.stringify(response.data));\n          localStorage.setItem('auth-token', response.data.token);\n          // setAlert({ success: response.data.success })\n          history.push('/app');\n        } else if (response.data.error) {\n          console.log(response.data.error);\n          // setAlert({ error: response.data.error })\n          // setOpen(true)\n        }\n      });\n  };\n  // IF GOOGLE LOGIN IS NOT SUCCESSFUL\n\n  const onFailureGoogle = (response) => {\n    console.log(response);\n  };\n\n  useEffect(() => {\n    if (error) {\n      NotificationManager.warning(error, 'Login Error', 3000, null, null, '');\n    }\n  }, [error]);\n\n  // const onUserLogin = (values) => {\n  //   if (!loading) {\n  //     if (values.email !== '' && values.password !== '') {\n  //       loginUserAction(values, history);\n  //     }\n  //   }\n  // };\n  //LOGIN HANDLER\n  const onUserLogin = (e) => {\n    e.preventDefault();\n    const data = formData;\n    axios.post('/api/login', data).then((response) => {\n      console.log(response.data);\n      if (response.data.token) {\n        localStorage.setItem('user', JSON.stringify(response.data));\n        localStorage.setItem('userId', response.data.user.id);\n        localStorage.setItem('auth-token', response.data.token);\n        history.push('/app');\n      } else if (response.data.error) {\n        NotificationManager.warning(\n          response.data.error,\n          'Login Error',\n          3000,\n          null,\n          null,\n          ''\n        );\n      }\n    });\n  };\n  // const initialValues = { email, password };\n\n  return (\n    <Row className=\"h-100\">\n      <Colxx xxs=\"12\" md=\"10\" className=\"mx-auto my-auto\">\n        <Card className=\"auth-card\">\n          <div className=\"position-relative image-side \">\n            <p className=\"text-white h2\">MAGIC IS IN THE DETAILS</p>\n            <p className=\"white mb-0\">\n              Please use your credentials to login.\n              <br />\n              If you are not a member, please{' '}\n              <NavLink to=\"/user/register\" className=\"white\">\n                register\n              </NavLink>\n              .\n            </p>\n          </div>\n          <div className=\"form-side\">\n            <div style={{ fontSize: '2.5rem' }}>BUY SUPPLY APP</div>\n            {/* </NavLink> */}\n            <CardTitle className=\"mb-4\">\n              <IntlMessages id=\"user.login-title\" />\n            </CardTitle>\n\n            <Formik>\n              {/* {({ errors, touched }) => ( */}\n              <Form className=\"av-tooltip tooltip-label-bottom\">\n                <FormGroup className=\"form-group has-float-label\">\n                  <Label>\n                    <IntlMessages id=\"user.email\" />\n                  </Label>\n                  <Field\n                    className=\"form-control\"\n                    name=\"email\"\n                    validate={validateEmail}\n                    onChange={(e) => {\n                      setformData({ ...formData, email: e.target.value });\n                    }}\n                  />\n                  {/* {errors.email && touched.email && (\n                      <div className=\"invalid-feedback d-block\">\n                        {errors.email}\n                      </div>\n                    )} */}\n                </FormGroup>\n                <FormGroup className=\"form-group has-float-label\">\n                  <Label>\n                    <IntlMessages id=\"user.password\" />\n                  </Label>\n                  <Field\n                    onChange={(e) => {\n                      setformData({ ...formData, password: e.target.value });\n                    }}\n                    className=\"form-control\"\n                    type=\"password\"\n                    name=\"password\"\n                    oninput={() => InvalidMsg(this)}\n                    onvalid={() => InvalidMsg(this)}\n                  />\n                  {/* {errors.password && touched.password && (\n                      <div className=\"invalid-feedback d-block\">\n                        {errors.password}\n                      </div>\n                    )} */}\n                </FormGroup>\n                <div\n                  style={styles.divStyle}\n                  className=\"d-flex justify-content-center align-items-center\"\n                >\n                  OR\n                </div>\n                <div\n                  style={styles.divStyle}\n                  className=\"d-flex justify-content-center align-items-center\"\n                >\n                  <GoogleLogin\n                    clientId=\"501516992284-icth2bhte5iu6fpskcd97hcia62f9qdd.apps.googleusercontent.com\"\n                    // render={renderProps => (\n                    //   <button onClick={renderProps.onClick} style={{background:'red',height:'2rem',width:'8rem'}}>Login with google</button>\n                    // )}\n                    buttonText=\"Login with Google\"\n                    onSuccess={onSuccessGoogle}\n                    onFailure={onFailureGoogle}\n                    cookiePolicy={'single_host_origin'}\n                  />\n                </div>\n                <div className=\"d-flex justify-content-between align-items-center\">\n                  <NavLink to=\"/user/forgot-password\">\n                    <IntlMessages id=\"user.forgot-password-question\" />\n                  </NavLink>\n                  <NavLink to=\"/user/register\">\n                    <IntlMessages id=\"Create an Account\" />\n                  </NavLink>\n                </div>\n                <div className=\"d-flex justify-content-center align-items-center\">\n                  <Button\n                    onClick={onUserLogin}\n                    color=\"primary\"\n                    className={`btn-shadow btn-multiple-state ${\n                      loading ? 'show-spinner' : ''\n                    }`}\n                    size=\"lg\"\n                  >\n                    <span className=\"spinner d-inline-block\">\n                      <span className=\"bounce1\" />\n                      <span className=\"bounce2\" />\n                      <span className=\"bounce3\" />\n                    </span>\n                    <span className=\"label\">\n                      <IntlMessages id=\"user.login-button\" />\n                    </span>\n                  </Button>\n                </div>\n              </Form>\n              {/* )} */}\n            </Formik>\n          </div>\n        </Card>\n      </Colxx>\n    </Row>\n  );\n};\nconst mapStateToProps = ({ authUser }) => {\n  const { loading, error } = authUser;\n  return { loading, error };\n};\n\nexport default connect(mapStateToProps, {\n  loginUserAction: loginUser,\n})(Login);\n"]},"metadata":{},"sourceType":"module"}