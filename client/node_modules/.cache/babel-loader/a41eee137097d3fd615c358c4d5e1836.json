{"ast":null,"code":"import _objectSpread from\"/home/browsewire/Desktop/CEI/cei/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/home/browsewire/Desktop/CEI/cei/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _createForOfIteratorHelper from\"/home/browsewire/Desktop/CEI/cei/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper\";import _asyncToGenerator from\"/home/browsewire/Desktop/CEI/cei/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/browsewire/Desktop/CEI/cei/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{Colxx,Separator}from'../../../../components/common/CustomBootstrap';import Breadcrumb from'../../../../containers/navs/Breadcrumb';import React,{useState,useEffect}from'react';import{NotificationManager}from'../../../../components/common/react-notifications';import{Row,Col,Label,Input,Card,CardBody,Form,FormGroup,Modal,ModalBody,ModalHeader,ModalFooter}from'reactstrap';import Select from'react-select';import IntlMessages from'../../../../helpers/IntlMessages';import CustomSelectInput from'../../../../components/common/CustomSelectInput';import Button from'reactstrap/lib/Button';import{useHistory}from'react-router-dom';import axios from'axios';var selectData=[{label:'Small',value:'Small',key:0},{label:'Medium',value:'Medium',key:1},{label:'Large',value:'Large',key:2}];var Newproduct=function Newproduct(_ref){var match=_ref.match;var _useState=useState({}),_useState2=_slicedToArray(_useState,2),formData=_useState2[0],setformData=_useState2[1];var _useState3=useState('user'),_useState4=_slicedToArray(_useState3,2),user=_useState4[0],setUser=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),typeModal=_useState6[0],setTypeModal=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),pname=_useState8[0],setpName=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),SKU=_useState10[0],setSKU=_useState10[1];var _useState11=useState([]),_useState12=_slicedToArray(_useState11,2),brands=_useState12[0],setBrands=_useState12[1];var _ref2=\"\",_ref3=_slicedToArray(_ref2,2),name=_ref3[0],setName=_ref3[1];var _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),change=_useState14[0],setChange=_useState14[1];var history=useHistory();var fetchBrands=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _yield$axios$get,brands,brandList,singleBrand,_iterator,_step,brand;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get(\"/api/inventory/get-brands/\");case 2:_yield$axios$get=_context.sent;brands=_yield$axios$get.data;brandList=[];_iterator=_createForOfIteratorHelper(brands);try{for(_iterator.s();!(_step=_iterator.n()).done;){brand=_step.value;singleBrand={label:brand.brandLongName,brandShortName:brand.brandShortName,brandLongName:brand.brandLongName,imageNameBrandLogo:brand.imageNameBrandLogo,value:brand.id,key:brand.id};console.log(singleBrand);brandList.push(singleBrand);}}catch(err){_iterator.e(err);}finally{_iterator.f();}setBrands(brandList);case 8:case\"end\":return _context.stop();}}},_callee);}));return function fetchBrands(){return _ref4.apply(this,arguments);};}();useEffect(function(){fetchBrands();},[change]);var CreateNewProduct=function CreateNewProduct(e){e.preventDefault();var description25Char=formData.description25Char,itemNumber=formData.itemNumber;console.log(description25Char);console.log(itemNumber);if(!description25Char||!itemNumber){return NotificationManager.error('Product Name And SKU Are Mandatory','Error',3000,null,null,'');}// var data = {\n//   name: formData.name.toLowerCase(),\n//   SKU: SKU,\n//   company:formData.company,\n//   productType:formData.ptype,\n//   buyer:formData.buyer,\n//   description:formData.description\n// }\naxios.post(\"/api/inventory/new-product\",formData).then(function(res){console.log(res);NotificationManager.success(res.data.success,'Success',3000,null,null,'');history.push(\"/app/inventory/products\");});};var generateSKU=function generateSKU(){var sku=pname.substring(0,3).toUpperCase()+Math.floor(Math.random()*1000);setSKU(sku);setformData(_objectSpread(_objectSpread({},formData),{},{itemNumber:sku}));};return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Colxx,{xxs:\"12\"},/*#__PURE__*/React.createElement(Breadcrumb,{heading:\"Add New Product\",match:match}),/*#__PURE__*/React.createElement(Separator,{className:\"mb-5\"}))),/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex flex-column\"},/*#__PURE__*/React.createElement(Row,{className:\"mb-4\"},/*#__PURE__*/React.createElement(Colxx,{xxs:\"12\"},/*#__PURE__*/React.createElement(Card,null,/*#__PURE__*/React.createElement(CardBody,null,/*#__PURE__*/React.createElement(Colxx,{xxs:\"12\",className:\"mb-5\"},/*#__PURE__*/React.createElement(\"h3\",{className:\"mb-4\"},\"Product Form\"),/*#__PURE__*/React.createElement(Form,null,/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(Row,{className:\"mt-3\"},/*#__PURE__*/React.createElement(Col,null,/*#__PURE__*/React.createElement(Label,null,/*#__PURE__*/React.createElement(IntlMessages,{id:\"Brand\"})),/*#__PURE__*/React.createElement(Select,{components:{Input:CustomSelectInput},className:\"react-select\",classNamePrefix:\"react-select\",name:\"form-field-name\",options:brands,onChange:function onChange(e){setformData(_objectSpread(_objectSpread({},formData),{},{brandId:e.value}));}})),/*#__PURE__*/React.createElement(Col,null,/*#__PURE__*/React.createElement(Label,null,/*#__PURE__*/React.createElement(IntlMessages,{id:\"Product Type\"})),/*#__PURE__*/React.createElement(\"div\",{style:{display:'flex'}},/*#__PURE__*/React.createElement(\"div\",{style:{flex:1}},/*#__PURE__*/React.createElement(Select,{components:{Input:CustomSelectInput},className:\"react-select\",classNamePrefix:\"react-select\",name:\"form-field-name\",options:selectData,onChange:function onChange(e){setformData(_objectSpread(_objectSpread({},formData),{},{ptype:e.value}));}})),/*#__PURE__*/React.createElement(Button,{style:{flex:0},className:\"ml-1\",color:\"secondary\",outline:true,onClick:function onClick(){setTypeModal(true);}},\"Add\")))),/*#__PURE__*/React.createElement(Row,{className:\"mt-3\"},/*#__PURE__*/React.createElement(Col,null,/*#__PURE__*/React.createElement(Label,null,/*#__PURE__*/React.createElement(IntlMessages,{id:\"Product Name\"})),/*#__PURE__*/React.createElement(Input,{onChange:function onChange(e){setformData(_objectSpread(_objectSpread({},formData),{},{description25Char:e.target.value}));setpName(e.target.value);}})),/*#__PURE__*/React.createElement(Col,null,/*#__PURE__*/React.createElement(Label,null,/*#__PURE__*/React.createElement(IntlMessages,{id:\"Product SKU\"})),/*#__PURE__*/React.createElement(\"div\",{style:{display:'flex'}},/*#__PURE__*/React.createElement(\"div\",{style:{flex:1}},/*#__PURE__*/React.createElement(Input,{value:SKU,onChange:function onChange(e){console.log(e.target.value);setSKU(e.target.value);setformData(_objectSpread(_objectSpread({},formData),{},{itemNumber:e.target.value}));}})),/*#__PURE__*/React.createElement(Button// style={{flex:1}}\n,{className:\"ml-1\",color:\"secondary\",outline:true,onClick:generateSKU},\"Auto-generate\")))),/*#__PURE__*/React.createElement(Row,{className:\"mt-3\"},/*#__PURE__*/React.createElement(Col,null,/*#__PURE__*/React.createElement(Label,null,/*#__PURE__*/React.createElement(IntlMessages,{id:\"Unit Of Measure\"})),/*#__PURE__*/React.createElement(Input,{type:\"text\",onChange:function onChange(e){setformData(_objectSpread(_objectSpread({},formData),{},{unitOfMeasure:e.target.value}));}})),/*#__PURE__*/React.createElement(Col,null,/*#__PURE__*/React.createElement(Label,null,/*#__PURE__*/React.createElement(IntlMessages,{id:\"List Price\"})),/*#__PURE__*/React.createElement(Input,{type:\"text\",onChange:function onChange(e){setformData(_objectSpread(_objectSpread({},formData),{},{listPrice:e.target.value}));}})),/*#__PURE__*/React.createElement(Col,null,/*#__PURE__*/React.createElement(Label,null,/*#__PURE__*/React.createElement(IntlMessages,{id:\"Cost Column 1 Price\"})),/*#__PURE__*/React.createElement(Input,{type:\"text\",onChange:function onChange(e){setformData(_objectSpread(_objectSpread({},formData),{},{costColumn1Price:e.target.value}));}}))),/*#__PURE__*/React.createElement(\"div\",{className:\"mt-3\"},/*#__PURE__*/React.createElement(Label,null,/*#__PURE__*/React.createElement(IntlMessages,{id:\"Product Description\"})),/*#__PURE__*/React.createElement(Input,{type:\"textarea\",onChange:function onChange(e){setformData(_objectSpread(_objectSpread({},formData),{},{description125Character:e.target.value}));}}))),/*#__PURE__*/React.createElement(\"div\",{className:\"mt-3\"},/*#__PURE__*/React.createElement(Button,{className:\"mr-2\",color:\"secondary\",outline:true,onClick:function onClick(){history.push('/app/inventory/products');}},/*#__PURE__*/React.createElement(IntlMessages,{id:\"pages.cancel\"})),/*#__PURE__*/React.createElement(Button,{color:\"primary\",onClick:CreateNewProduct},/*#__PURE__*/React.createElement(IntlMessages,{id:\"Create Product\"})))))))))),/*#__PURE__*/React.createElement(Modal,{isOpen:typeModal,toggle:function toggle(){return setTypeModal(!typeModal);}},/*#__PURE__*/React.createElement(ModalHeader,null,/*#__PURE__*/React.createElement(IntlMessages,{id:\"Add New Product Type\"})),/*#__PURE__*/React.createElement(ModalBody,null,/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Label,null,/*#__PURE__*/React.createElement(IntlMessages,{id:\"Name\"})),/*#__PURE__*/React.createElement(Input,{onChange:function onChange(e){setName(e.target.value);}}))),/*#__PURE__*/React.createElement(ModalFooter,null,/*#__PURE__*/React.createElement(Button,{onClick:function onClick(){return alert('Added');},color:\"primary\"},\"Add\"),' ',/*#__PURE__*/React.createElement(Button,{color:\"secondary\",onClick:function onClick(){return setTypeModal(false);}},\"Cancel\"))));};export default Newproduct;","map":null,"metadata":{},"sourceType":"module"}