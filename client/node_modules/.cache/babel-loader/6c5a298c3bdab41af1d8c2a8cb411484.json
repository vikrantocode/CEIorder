{"ast":null,"code":"import _toConsumableArray from \"/home/browsewire/Desktop/CEI/cei/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _objectSpread from \"/home/browsewire/Desktop/CEI/cei/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _regeneratorRuntime from \"/home/browsewire/Desktop/CEI/cei/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/browsewire/Desktop/CEI/cei/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/home/browsewire/Desktop/CEI/cei/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/home/browsewire/Desktop/CEI/cei/client/src/views/app/inventory/ProductGroups/ProductGroups.js\";\n\nimport React, { useState, useEffect } from 'react';\nimport 'react-tagsinput/react-tagsinput.css';\nimport axios from 'axios';\nimport useMousetrap from '../../../../hooks/use-mousetrap';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter, Input, Label, Row, Col } from 'reactstrap';\nimport { NotificationManager } from '../../../../components/common/react-notifications';\nimport IntlMessages from '../../../../helpers/IntlMessages';\nimport AddNewProductGroupModal from './add-new-group';\nimport ProductGroupListHeading from './ProductGroupListHeading';\nimport ProductGroupPageHeadings from './ProductGroupPageHeadings';\nimport ProductGroupPageListing from './ProductGroupPageListing';\nimport ProductPageListing from './ProductsPageListing';\nimport ProductsListHeading from './ProductsListHeading';\n\nvar getIndex = function getIndex(value, arr, prop) {\n  for (var i = 0; i < arr.length; i += 1) {\n    if (arr[i][prop] === value) {\n      return i;\n    }\n  }\n\n  return -1;\n};\n\nvar orderOptions = [{\n  column: 'id',\n  label: 'Id'\n}, {\n  column: 'name',\n  label: 'Name'\n}, {\n  column: 'productsCount',\n  label: 'Product Count'\n}];\nvar orderManners = [{\n  value: 'ASC',\n  label: 'Ascending'\n}, {\n  value: 'DESC',\n  label: 'Descending'\n}];\nvar pageSizes = [10, 15, 30, 100];\n\nvar ProductGroup = function ProductGroup(_ref) {\n  var match = _ref.match;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      isLoaded = _useState2[0],\n      setIsLoaded = _useState2[1];\n\n  var _useState3 = useState('thumblist'),\n      _useState4 = _slicedToArray(_useState3, 2),\n      displayMode = _useState4[0],\n      setDisplayMode = _useState4[1];\n\n  var _useState5 = useState(1),\n      _useState6 = _slicedToArray(_useState5, 2),\n      currentPage = _useState6[0],\n      setCurrentPage = _useState6[1];\n\n  var _useState7 = useState(15),\n      _useState8 = _slicedToArray(_useState7, 2),\n      selectedPageSize = _useState8[0],\n      setSelectedPageSize = _useState8[1];\n\n  var _useState9 = useState({\n    column: 'title',\n    label: 'Variant Name'\n  }),\n      _useState10 = _slicedToArray(_useState9, 2),\n      selectedOrderOption = _useState10[0],\n      setSelectedOrderOption = _useState10[1];\n\n  var _React$useState = React.useState({}),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      formData = _React$useState2[0],\n      setFormData = _React$useState2[1];\n\n  var _useState11 = useState(false),\n      _useState12 = _slicedToArray(_useState11, 2),\n      modalBasic = _useState12[0],\n      setModalBasic = _useState12[1];\n\n  var _useState13 = useState(false),\n      _useState14 = _slicedToArray(_useState13, 2),\n      modalOpen = _useState14[0],\n      setModalOpen = _useState14[1];\n\n  var _useState15 = useState(0),\n      _useState16 = _slicedToArray(_useState15, 2),\n      totalItemCount = _useState16[0],\n      setTotalItemCount = _useState16[1];\n\n  var _useState17 = useState(1),\n      _useState18 = _slicedToArray(_useState17, 2),\n      totalPage = _useState18[0],\n      setTotalPage = _useState18[1];\n\n  var _useState19 = useState(''),\n      _useState20 = _slicedToArray(_useState19, 2),\n      search = _useState20[0],\n      setSearch = _useState20[1];\n\n  var _useState21 = useState([]),\n      _useState22 = _slicedToArray(_useState21, 2),\n      selectedItems = _useState22[0],\n      setSelectedItems = _useState22[1];\n\n  var _useState23 = useState([]),\n      _useState24 = _slicedToArray(_useState23, 2),\n      items = _useState24[0],\n      setItems = _useState24[1];\n\n  var _useState25 = useState(null),\n      _useState26 = _slicedToArray(_useState25, 2),\n      lastChecked = _useState26[0],\n      setLastChecked = _useState26[1];\n\n  var _useState27 = useState(false),\n      _useState28 = _slicedToArray(_useState27, 2),\n      modal = _useState28[0],\n      setModal = _useState28[1];\n\n  var _useState29 = useState({}),\n      _useState30 = _slicedToArray(_useState29, 2),\n      details = _useState30[0],\n      setDetails = _useState30[1];\n\n  var _useState31 = useState([]),\n      _useState32 = _slicedToArray(_useState31, 2),\n      categories = _useState32[0],\n      setcategories = _useState32[1];\n\n  var _useState33 = useState(false),\n      _useState34 = _slicedToArray(_useState33, 2),\n      change = _useState34[0],\n      setchange = _useState34[1];\n\n  var _useState35 = useState(0),\n      _useState36 = _slicedToArray(_useState35, 2),\n      id = _useState36[0],\n      setId = _useState36[1];\n\n  var _useState37 = useState(false),\n      _useState38 = _slicedToArray(_useState37, 2),\n      modalDelete = _useState38[0],\n      setModalDelete = _useState38[1];\n\n  var _useState39 = useState(false),\n      _useState40 = _slicedToArray(_useState39, 2),\n      modalAdd = _useState40[0],\n      setModalAdd = _useState40[1];\n\n  var _useState41 = useState(false),\n      _useState42 = _slicedToArray(_useState41, 2),\n      loadingData = _useState42[0],\n      setLoadingData = _useState42[1];\n\n  var _useState43 = useState({}),\n      _useState44 = _slicedToArray(_useState43, 2),\n      user = _useState44[0],\n      setUser = _useState44[1];\n\n  var _useState45 = useState({\n    column: 'id',\n    label: 'Id'\n  }),\n      _useState46 = _slicedToArray(_useState45, 2),\n      orderBy = _useState46[0],\n      setOrderBy = _useState46[1];\n\n  var _useState47 = useState({\n    value: 'ASC',\n    label: 'Ascending'\n  }),\n      _useState48 = _slicedToArray(_useState47, 2),\n      orderManner = _useState48[0],\n      setOrderManner = _useState48[1]; //? Products States\n\n\n  var _useState49 = useState([]),\n      _useState50 = _slicedToArray(_useState49, 2),\n      products = _useState50[0],\n      setProducts = _useState50[1];\n\n  var _useState51 = useState(1),\n      _useState52 = _slicedToArray(_useState51, 2),\n      productCurrentPage = _useState52[0],\n      setProductCurrentPage = _useState52[1];\n\n  var _useState53 = useState(null),\n      _useState54 = _slicedToArray(_useState53, 2),\n      lastProduct = _useState54[0],\n      setLastProduct = _useState54[1];\n\n  var _useState55 = useState([]),\n      _useState56 = _slicedToArray(_useState55, 2),\n      selectedProducts = _useState56[0],\n      setSelectedProducts = _useState56[1];\n\n  var _useState57 = useState(0),\n      _useState58 = _slicedToArray(_useState57, 2),\n      productTotalPage = _useState58[0],\n      setProductTotalPage = _useState58[1];\n\n  var _useState59 = useState(0),\n      _useState60 = _slicedToArray(_useState59, 2),\n      productCount = _useState60[0],\n      setProductCount = _useState60[1];\n\n  var _useState61 = useState([]),\n      _useState62 = _slicedToArray(_useState61, 2),\n      productIds = _useState62[0],\n      setProductIds = _useState62[1];\n\n  var _useState63 = useState(''),\n      _useState64 = _slicedToArray(_useState63, 2),\n      searchItem = _useState64[0],\n      setSearchItem = _useState64[1];\n\n  var deleteMultipleModal = function deleteMultipleModal(e) {\n    setModalDelete(true);\n  };\n\n  var CreateNewProductGroup = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(e) {\n      var data, userId;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              e.preventDefault();\n              data = formData;\n              userId = localStorage.getItem('userId');\n              data.userId = parseInt(userId);\n              _context.prev = 4;\n              _context.next = 7;\n              return axios.post('/api/inventory/product-groups', data);\n\n            case 7:\n              setModalOpen(false);\n              setchange(!change);\n              return _context.abrupt(\"return\", NotificationManager.success('Product Group Created Successfully', 'Success', 3000));\n\n            case 12:\n              _context.prev = 12;\n              _context.t0 = _context[\"catch\"](4);\n              console.log(_context.t0);\n              return _context.abrupt(\"return\", NotificationManager.error(_context.t0.response.message, 'Error', 3000));\n\n            case 16:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[4, 12]]);\n    }));\n\n    return function CreateNewProductGroup(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var deleteModal = function deleteModal(e) {\n    setModalBasic(true);\n    setId(e);\n  };\n\n  var addModal = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e) {\n      var _yield$axios$get, data, _yield$axios$get2, _user;\n\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              setLoadingData(true);\n              setModalAdd(true);\n              _context2.prev = 2;\n              _context2.next = 5;\n              return axios.get(\"/api/inventory/product-groups/\".concat(e));\n\n            case 5:\n              _yield$axios$get = _context2.sent;\n              data = _yield$axios$get.data;\n              console.log(data);\n              setDetails(data.data);\n              setSelectedProducts(data.products.map(function (x) {\n                return x.id;\n              }));\n              _context2.next = 12;\n              return axios.get(\"/api/user-details?id=\".concat(data.data.userId));\n\n            case 12:\n              _yield$axios$get2 = _context2.sent;\n              _user = _yield$axios$get2.data;\n              setUser(_user.data);\n              setLoadingData(false);\n              _context2.next = 24;\n              break;\n\n            case 18:\n              _context2.prev = 18;\n              _context2.t0 = _context2[\"catch\"](2);\n              console.log(_context2.t0);\n              setModalAdd(false);\n              setLoadingData(false);\n              return _context2.abrupt(\"return\", NotificationManager.error(_context2.t0.response.message));\n\n            case 24:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[2, 18]]);\n    }));\n\n    return function addModal(_x2) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  useEffect(function () {\n    setLoadingData(true);\n    axios.get(\"/api/inventory/get-products/\".concat(productCurrentPage, \"?searchItem=\").concat(searchItem)).then(function (res) {\n      setProducts(res.data.data);\n      setProductCount(res.data.totalItem);\n      setProductTotalPage(res.data.totalPage);\n      var arr = [];\n      res.data.data.map(function (product) {\n        return arr.push(product.id);\n      });\n      setProductIds(arr);\n      setLoadingData(false);\n    }).catch(function (ex) {\n      console.log(ex);\n      return NotificationManager.error(ex.response.message, 'Error', 3000);\n    });\n  }, [productCurrentPage]);\n  useEffect(function () {\n    setCurrentPage(1);\n  }, [selectedPageSize, selectedOrderOption]);\n  useEffect(function () {\n    function fetchData() {\n      axios.get(\"/api/inventory/product-groups?page=\".concat(currentPage, \"&pageSize=\").concat(selectedPageSize, \"&searchItem=\").concat(search, \"&orderBy=\").concat(orderBy.column, \"&orderManner=\").concat(orderManner.value)).then(function (res) {\n        return res.data;\n      }).then(function (data) {\n        console.log(data.data);\n        setTotalPage(Math.ceil(data.count / selectedPageSize));\n        setItems(data.data.map(function (x) {\n          return _objectSpread({}, x);\n        })); // setSelectedItems([]);\n\n        setTotalItemCount(data.count);\n        setIsLoaded(true);\n      });\n    }\n\n    fetchData();\n  }, [change]); // DELETE MULTIPLE VARIANTS\n\n  var deleteMultiple = /*#__PURE__*/function () {\n    var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              axios.delete(\"/api/inventory/product-groups\", {\n                params: {\n                  id: selectedItems\n                }\n              }).then(function (res) {\n                console.log(res.data);\n                setchange(!change);\n                setModalDelete(false);\n                NotificationManager.success('Product Groups Deleted Successfully', 'Success', 3000, null, null, '');\n              });\n\n            case 1:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n\n    return function deleteMultiple() {\n      return _ref4.apply(this, arguments);\n    };\n  }(); // GET THE PRODUCT GROUP DETAILS AND OPEN THE EDIT MODAL\n\n\n  var openModal = function openModal(id, name) {\n    setDetails({\n      id: id,\n      name: name\n    });\n    setModal(true);\n  }; //DELETE Product Group HANDLER\n\n\n  var deleteProductGroup = /*#__PURE__*/function () {\n    var _ref5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4() {\n      return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              _context4.prev = 0;\n              _context4.next = 3;\n              return axios.delete(\"/api/inventory/product-groups?id=\".concat(id));\n\n            case 3:\n              setchange(!change);\n              setModalBasic(false);\n              return _context4.abrupt(\"return\", NotificationManager.success('Product Group Deleted Successfully', 'Success', 3000));\n\n            case 8:\n              _context4.prev = 8;\n              _context4.t0 = _context4[\"catch\"](0);\n              console.log(_context4.t0);\n              return _context4.abrupt(\"return\", NotificationManager.error(_context4.t0.response.message, 'Error', 3000));\n\n            case 12:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4, null, [[0, 8]]);\n    }));\n\n    return function deleteProductGroup() {\n      return _ref5.apply(this, arguments);\n    };\n  }(); // EDIT HANDLER\n\n\n  var edit = /*#__PURE__*/function () {\n    var _ref6 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5(e) {\n      var data;\n      return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n        while (1) {\n          switch (_context5.prev = _context5.next) {\n            case 0:\n              data = {};\n              data.name = formData.name;\n              data.userId = parseInt(localStorage.getItem('userId'));\n              _context5.prev = 3;\n              _context5.next = 6;\n              return axios.put(\"/api/inventory/product-groups/\".concat(e), data);\n\n            case 6:\n              setModal(false);\n              setchange(!change);\n              return _context5.abrupt(\"return\", NotificationManager.success('Product Group Updated Successfully', 'Success', 3000));\n\n            case 11:\n              _context5.prev = 11;\n              _context5.t0 = _context5[\"catch\"](3);\n              console.log(_context5.t0);\n              return _context5.abrupt(\"return\", NotificationManager.error(_context5.t0.response.message, 'Error', 3000));\n\n            case 15:\n            case \"end\":\n              return _context5.stop();\n          }\n        }\n      }, _callee5, null, [[3, 11]]);\n    }));\n\n    return function edit(_x3) {\n      return _ref6.apply(this, arguments);\n    };\n  }();\n\n  var onCheckItem = function onCheckItem(event, id) {\n    if (event.target.tagName === 'A' || event.target.parentElement && event.target.parentElement.tagName === 'A') {\n      return true;\n    }\n\n    if (lastChecked === null) {\n      setLastChecked(id);\n    }\n\n    var selectedList = _toConsumableArray(selectedItems);\n\n    if (selectedList.includes(id)) {\n      selectedList = selectedList.filter(function (x) {\n        return x !== id;\n      });\n    } else {\n      selectedList.push(id);\n    }\n\n    setSelectedItems(selectedList);\n\n    if (event.shiftKey) {\n      var newItems = _toConsumableArray(items);\n\n      var start = getIndex(id, newItems, 'id');\n      var end = getIndex(lastChecked, newItems, 'id');\n      newItems = newItems.slice(Math.min(start, end), Math.max(start, end) + 1);\n      selectedItems.push.apply(selectedItems, _toConsumableArray(newItems.map(function (item) {\n        return item.id;\n      })));\n      selectedList = Array.from(new Set(selectedItems));\n      setSelectedItems(selectedList);\n    }\n\n    document.activeElement.blur();\n    return false;\n  }; //? Products Check\n\n\n  var onProductCheck = function onProductCheck(event, id) {\n    if (event.target.tagName === 'A' || event.target.parentElement && event.target.parentElement.tagName === 'A') {\n      return true;\n    }\n\n    if (lastChecked === null) {\n      setLastProduct(id);\n    }\n\n    var selectedList = _toConsumableArray(selectedProducts);\n\n    if (selectedList.includes(id)) {\n      selectedList = selectedList.filter(function (x) {\n        return x !== id;\n      });\n    } else {\n      selectedList.push(id);\n    }\n\n    setSelectedProducts(selectedList);\n\n    if (event.shiftKey) {\n      var newItems = _toConsumableArray(products);\n\n      var start = getIndex(id, newItems, 'id');\n      var end = getIndex(lastProduct, newItems, 'id');\n      newItems = newItems.slice(Math.min(start, end), Math.max(start, end) + 1);\n      selectedProducts.push.apply(selectedProducts, _toConsumableArray(newItems.map(function (item) {\n        return item.id;\n      })));\n      selectedList = Array.from(new Set(selectedProducts));\n      setSelectedProducts(selectedList);\n    }\n\n    document.activeElement.blur();\n    return false;\n  };\n\n  var checker = function checker(master, target) {\n    return target.every(function (item) {\n      return master.includes(item);\n    });\n  }; //? Handle All Products Selection\n\n\n  var handleProductSelectAll = function handleProductSelectAll(isToggle) {\n    if (checker(selectedProducts, productIds)) {\n      if (isToggle) {\n        var arr = [];\n        arr = selectedProducts.filter(function (itemId) {\n          return !productIds.includes(itemId);\n        });\n        setSelectedProducts(arr);\n      }\n    } else {\n      var _arr = selectedProducts;\n      products.map(function (x) {\n        return _arr.push(x.id);\n      });\n      setSelectedProducts(Array.from(new Set(_arr)));\n    }\n\n    document.activeElement.blur();\n    return false;\n  }; //? Assign Products to group\n\n\n  var assignGroup = /*#__PURE__*/function () {\n    var _ref7 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee6(req, res) {\n      var userId;\n      return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n        while (1) {\n          switch (_context6.prev = _context6.next) {\n            case 0:\n              console.log(typeof selectedProducts);\n              userId = localStorage.getItem('userId');\n              _context6.prev = 2;\n              _context6.next = 5;\n              return axios.put(\"/api/inventory/product-groups/\".concat(details.id, \"/products/modify\"), {\n                productIds: selectedProducts,\n                userId: userId\n              });\n\n            case 5:\n              setSelectedProducts([]);\n              setModalAdd(false);\n              setchange(!change);\n              return _context6.abrupt(\"return\", NotificationManager.success('Product(s) Assigned/Removed to Group Successfully.', 'Success', 3000));\n\n            case 11:\n              _context6.prev = 11;\n              _context6.t0 = _context6[\"catch\"](2);\n              console.log(_context6.t0);\n              return _context6.abrupt(\"return\", NotificationManager.error(_context6.t0.response.message, 'Error', 3000));\n\n            case 15:\n            case \"end\":\n              return _context6.stop();\n          }\n        }\n      }, _callee6, null, [[2, 11]]);\n    }));\n\n    return function assignGroup(_x4, _x5) {\n      return _ref7.apply(this, arguments);\n    };\n  }();\n\n  var handleChangeSelectAll = function handleChangeSelectAll(isToggle) {\n    if (selectedItems.length >= items.length) {\n      if (isToggle) {\n        setSelectedItems([]);\n      }\n    } else {\n      setSelectedItems(items.map(function (x) {\n        return x.id;\n      }));\n    }\n\n    document.activeElement.blur();\n    return false;\n  };\n\n  var changePage = function changePage(i) {\n    setCurrentPage(i);\n    axios.get(\"/api/inventory/product-groups?page=\".concat(i, \"&pageSize=\").concat(selectedPageSize, \"&searchItem=\").concat(search, \"&orderBy=\").concat(orderBy.column, \"&orderManner=\").concat(orderManner.value)).then(function (res) {\n      setTotalPage(res.data.count / selectedPageSize);\n      setItems(res.data.data.map(function (x) {\n        return _objectSpread({}, x);\n      }));\n      setSelectedItems([]);\n      setTotalItemCount(res.data.count);\n      setIsLoaded(true);\n    });\n  };\n\n  var onContextMenuClick = function onContextMenuClick(e, data) {\n    // params : (e,data,target)\n    console.log('onContextMenuClick - selected items', selectedItems);\n    console.log('onContextMenuClick - action : ', data.action);\n  };\n\n  var onContextMenu = function onContextMenu(e, data) {\n    var clickedProductId = data.data;\n\n    if (!selectedItems.includes(clickedProductId)) {\n      setSelectedItems([clickedProductId]);\n    }\n\n    return true;\n  };\n\n  useMousetrap(['ctrl+a', 'command+a'], function () {\n    handleChangeSelectAll(false);\n  });\n  useMousetrap(['ctrl+d', 'command+d'], function () {\n    setSelectedItems([]);\n    return false;\n  });\n  var startIndex = (currentPage - 1) * selectedPageSize;\n  var endIndex = currentPage * selectedPageSize;\n  return !isLoaded ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"loading\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 387,\n      columnNumber: 5\n    }\n  }) : /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"disable-text-selection\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 390,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(ProductGroupPageHeadings, {\n    deleteMultipleModal: deleteMultipleModal,\n    heading: \"Product Groups\",\n    orderBy: orderBy,\n    orderManner: orderManner,\n    displayMode: displayMode,\n    changeDisplayMode: setDisplayMode,\n    orderManners: orderManners,\n    handleChangeSelectAll: handleChangeSelectAll,\n    changePageSize: setSelectedPageSize,\n    selectedPageSize: selectedPageSize,\n    totalItemCount: totalItemCount,\n    selectedOrderOption: selectedOrderOption,\n    match: match,\n    startIndex: startIndex,\n    endIndex: endIndex,\n    selectedItemsLength: selectedItems ? selectedItems.length : 0,\n    itemsLength: items ? items.length : 0,\n    onSearchKey: function onSearchKey(e) {\n      if (e.key === 'Enter') {\n        setSearch(e.target.value);\n        axios.get(\"/api/inventory/product-groups?page=\".concat(currentPage, \"&pageSize=\").concat(selectedPageSize, \"&searchItem=\").concat(e.target.value, \"&orderBy=\").concat(orderBy.column, \"&orderManner=\").concat(orderManner.value)).then(function (res) {\n          setTotalPage(res.data.count / selectedPageSize);\n          setItems(res.data.data.map(function (x) {\n            return _objectSpread({}, x);\n          }));\n          setTotalItemCount(res.data.count);\n          setIsLoaded(true);\n        });\n      }\n    },\n    changeOrderBy: function changeOrderBy(ord) {\n      setOrderBy(ord);\n      axios.get(\"/api/inventory/product-groups?page=\".concat(currentPage, \"&pageSize=\").concat(selectedPageSize, \"&searchItem=\").concat(search, \"&orderBy=\").concat(ord.column, \"&orderManner=\").concat(orderManner.value)).then(function (res) {\n        setTotalPage(res.data.count / selectedPageSize);\n        setItems(res.data.data.map(function (x) {\n          return _objectSpread({}, x);\n        }));\n        setTotalItemCount(res.data.count);\n      });\n    },\n    changeOrderManner: /*#__PURE__*/function () {\n      var _ref8 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee7(man) {\n        return _regeneratorRuntime.wrap(function _callee7$(_context7) {\n          while (1) {\n            switch (_context7.prev = _context7.next) {\n              case 0:\n                setOrderManner(man);\n                axios.get(\"/api/inventory/product-groups?page=\".concat(currentPage, \"&pageSize=\").concat(selectedPageSize, \"&searchItem=\").concat(search, \"&orderBy=\").concat(orderBy.column, \"&orderManner=\").concat(man.value)).then(function (res) {\n                  setTotalPage(res.data.count / selectedPageSize);\n                  setItems(res.data.data.map(function (x) {\n                    return _objectSpread({}, x);\n                  }));\n                  setTotalItemCount(res.data.count);\n                });\n\n              case 2:\n              case \"end\":\n                return _context7.stop();\n            }\n          }\n        }, _callee7);\n      }));\n\n      return function (_x6) {\n        return _ref8.apply(this, arguments);\n      };\n    }(),\n    orderOptions: orderOptions,\n    pageSizes: pageSizes,\n    toggleModal: function toggleModal() {\n      return setModalOpen(!modalOpen);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 391,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(AddNewProductGroupModal, {\n    change: change,\n    setchange: setchange,\n    modalOpen: modalOpen,\n    CreateNewProductGroup: CreateNewProductGroup,\n    formData: formData,\n    setFormData: setFormData,\n    toggleModal: function toggleModal() {\n      return setModalOpen(!modalOpen);\n    },\n    categories: categories,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 445,\n      columnNumber: 11\n    }\n  }), items.length == 0 ? \"\" : /*#__PURE__*/React.createElement(ProductGroupListHeading, {\n    selectedItemsLength: selectedItems ? selectedItems.length : 0,\n    handleChangeSelectAll: handleChangeSelectAll,\n    itemsLength: items ? items.length : 0,\n    orderBy: orderBy,\n    orderManner: orderManner,\n    changeOrderBy: /*#__PURE__*/function () {\n      var _ref9 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee8(ord) {\n        var ind;\n        return _regeneratorRuntime.wrap(function _callee8$(_context8) {\n          while (1) {\n            switch (_context8.prev = _context8.next) {\n              case 0:\n                setOrderBy(ord);\n\n                if (orderBy.column === ord.column) {\n                  ind = !orderManners.findIndex(function (man) {\n                    return man.value === orderManner.value;\n                  });\n                  setOrderManner(orderManners[ind ? 1 : 0]);\n                  axios.get(\"/api/inventory/product-groups?page=\".concat(currentPage, \"&pageSize=\").concat(selectedPageSize, \"&searchItem=\").concat(search, \"&orderBy=\").concat(ord.column, \"&orderManner=\").concat(orderManners[ind ? 1 : 0].value)).then(function (res) {\n                    setTotalPage(res.data.count / selectedPageSize);\n                    setItems(res.data.data.map(function (x) {\n                      return _objectSpread({}, x);\n                    }));\n                    setTotalItemCount(res.data.count);\n                  });\n                } else {\n                  setOrderManner(orderManners[0]);\n                  axios.get(\"/api/inventory/product-groups?page=\".concat(currentPage, \"&pageSize=\").concat(selectedPageSize, \"&searchItem=\").concat(search, \"&orderBy=\").concat(ord.column, \"&orderManner=\").concat(orderManners[0].value)).then(function (res) {\n                    setTotalPage(res.data.count / selectedPageSize);\n                    setItems(res.data.data.map(function (x) {\n                      return _objectSpread({}, x);\n                    }));\n                    setTotalItemCount(res.data.count);\n                  });\n                }\n\n              case 2:\n              case \"end\":\n                return _context8.stop();\n            }\n          }\n        }, _callee8);\n      }));\n\n      return function (_x7) {\n        return _ref9.apply(this, arguments);\n      };\n    }(),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 455,\n      columnNumber: 33\n    }\n  }), items.length == 0 ? /*#__PURE__*/React.createElement(\"h3\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 484,\n      columnNumber: 31\n    }\n  }, \"No Records Found\") : /*#__PURE__*/React.createElement(ProductGroupPageListing, {\n    items: items,\n    deleteModal: deleteModal,\n    openModal: openModal,\n    addModal: addModal,\n    displayMode: displayMode,\n    selectedItems: selectedItems,\n    onCheckItem: onCheckItem,\n    currentPage: currentPage,\n    totalPage: totalPage,\n    onContextMenuClick: onContextMenuClick,\n    onContextMenu: onContextMenu,\n    onChangePage: changePage,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 484,\n      columnNumber: 58\n    }\n  }), /*#__PURE__*/React.createElement(Modal, {\n    isOpen: modal,\n    toggle: function toggle() {\n      return setModal(!modal);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 499,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(ModalHeader, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 500,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(IntlMessages, {\n    id: \"Edit\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 501,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(ModalBody, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 503,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    className: \"mt-3\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 504,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 505,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Label, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 506,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(IntlMessages, {\n    id: \"Group Name\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 507,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(Input, {\n    onChange: function onChange(e) {\n      setFormData(_objectSpread(_objectSpread({}, formData), {}, {\n        name: e.target.value\n      }));\n    },\n    defaultValue: details.name,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 509,\n      columnNumber: 19\n    }\n  })))), /*#__PURE__*/React.createElement(ModalFooter, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 516,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    onClick: function onClick() {\n      return edit(details.id);\n    },\n    color: \"primary\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 517,\n      columnNumber: 15\n    }\n  }, \"Save Changes\"), ' ', /*#__PURE__*/React.createElement(Button, {\n    color: \"secondary\",\n    onClick: function onClick() {\n      return setModal(false);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 520,\n      columnNumber: 15\n    }\n  }, \"Cancel\"))), /*#__PURE__*/React.createElement(Modal, {\n    isOpen: modalBasic,\n    toggle: function toggle() {\n      return setModal(!modalBasic);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 525,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(ModalHeader, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 526,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(IntlMessages, {\n    id: \"Delete\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 527,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(ModalBody, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 529,\n      columnNumber: 13\n    }\n  }, \"Are you sure you want to delete product group?\"), /*#__PURE__*/React.createElement(ModalFooter, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 532,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    onClick: deleteProductGroup,\n    color: \"primary\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 533,\n      columnNumber: 15\n    }\n  }, \"Confirm\"), ' ', /*#__PURE__*/React.createElement(Button, {\n    color: \"secondary\",\n    onClick: function onClick() {\n      return setModalBasic(false);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 536,\n      columnNumber: 15\n    }\n  }, \"Cancel\"))), /*#__PURE__*/React.createElement(Modal, {\n    isOpen: modalDelete,\n    toggle: function toggle() {\n      return setModal(!modalDelete);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 542,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(ModalHeader, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 543,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(IntlMessages, {\n    id: \"Delete\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 544,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(ModalBody, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 546,\n      columnNumber: 13\n    }\n  }, \"Are you sure you want to delete selected items?\"), /*#__PURE__*/React.createElement(ModalFooter, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 549,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    onClick: deleteMultiple,\n    color: \"primary\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 550,\n      columnNumber: 15\n    }\n  }, \"Confirm\"), ' ', /*#__PURE__*/React.createElement(Button, {\n    color: \"secondary\",\n    onClick: function onClick() {\n      return setModalDelete(false);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 553,\n      columnNumber: 15\n    }\n  }, \"Cancel\"))), /*#__PURE__*/React.createElement(Modal, {\n    isOpen: modalAdd,\n    size: \"xl\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 558,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(ModalHeader, {\n    toggle: function toggle() {\n      return setModalAdd(false);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 559,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(IntlMessages, {\n    id: \"Add Products to Group\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 560,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(ModalBody, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 562,\n      columnNumber: 13\n    }\n  }, loadingData ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"loading\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 563,\n      columnNumber: 28\n    }\n  }) : /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Row, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 565,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 566,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"h6\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 567,\n      columnNumber: 19\n    }\n  }, \"Product Name : \", /*#__PURE__*/React.createElement(\"span\", {\n    className: \"font-weight-bold\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 567,\n      columnNumber: 52\n    }\n  }, details.name))), /*#__PURE__*/React.createElement(Col, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 569,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"h6\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 570,\n      columnNumber: 19\n    }\n  }, \"Modified On : \", /*#__PURE__*/React.createElement(\"span\", {\n    className: \"font-weight-bold\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 570,\n      columnNumber: 51\n    }\n  }, details.updatedAt))), /*#__PURE__*/React.createElement(Col, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 572,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"h6\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 573,\n      columnNumber: 19\n    }\n  }, \"Modified By : \", /*#__PURE__*/React.createElement(\"span\", {\n    className: \"font-weight-bold\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 573,\n      columnNumber: 51\n    }\n  }, user.email)))), /*#__PURE__*/React.createElement(Row, {\n    className: \"mt-3\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 576,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 577,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Input, {\n    placeholder: \"Search for SKU(s), Name(s)\",\n    onKeyUp: function onKeyUp(e) {\n      if (e.key === 'Enter') {\n        setSearchItem(e.target.value);\n        axios.get(\"/api/inventory/get-products/1?searchItem=\".concat(e.target.value)).then(function (res) {\n          setProducts(res.data.data);\n          setProductCount(res.data.totalItem);\n          setProductTotalPage(res.data.totalPage);\n          var arr = [];\n          res.data.data.map(function (product) {\n            return arr.push(product.id);\n          });\n          setProductIds(arr);\n          NotificationManager.success('Search Completed.', 'Success', 3000);\n        });\n      }\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 578,\n      columnNumber: 17\n    }\n  }))), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"mt-2 h6 text-right\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 598,\n      columnNumber: 15\n    }\n  }, \"Listing \", productCount, \" Product(s)\"), productCount ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(ProductsListHeading, {\n    checker: checker,\n    productIds: productIds,\n    selectedProducts: selectedProducts,\n    handleChangeSelectAll: handleProductSelectAll,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 600,\n      columnNumber: 17\n    }\n  }), items && /*#__PURE__*/React.createElement(ProductPageListing, {\n    items: products,\n    selectedItems: selectedProducts,\n    onCheckItem: onProductCheck,\n    currentPage: productCurrentPage,\n    totalPage: productTotalPage,\n    onChangePage: setProductCurrentPage,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 606,\n      columnNumber: 27\n    }\n  })) : /*#__PURE__*/React.createElement(\"h4\", {\n    className: \"text-center\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 614,\n      columnNumber: 21\n    }\n  }, \"No Products\"))), /*#__PURE__*/React.createElement(ModalFooter, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 617,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"alert alert-primary rounded mx-2 mt-3\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 618,\n      columnNumber: 15\n    }\n  }, selectedProducts.length, \" Product(s) Selected\"), /*#__PURE__*/React.createElement(Button, {\n    color: \"primary\",\n    disabled: !selectedProducts.length,\n    onClick: assignGroup,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 619,\n      columnNumber: 15\n    }\n  }, \"Assign\"), ' ', /*#__PURE__*/React.createElement(Button, {\n    color: \"secondary\",\n    onClick: function onClick() {\n      return setModalAdd(false);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 622,\n      columnNumber: 15\n    }\n  }, \"Cancel\")))));\n};\n\nexport default ProductGroup;","map":{"version":3,"sources":["/home/browsewire/Desktop/CEI/cei/client/src/views/app/inventory/ProductGroups/ProductGroups.js"],"names":["React","useState","useEffect","axios","useMousetrap","Button","Modal","ModalHeader","ModalBody","ModalFooter","Input","Label","Row","Col","NotificationManager","IntlMessages","AddNewProductGroupModal","ProductGroupListHeading","ProductGroupPageHeadings","ProductGroupPageListing","ProductPageListing","ProductsListHeading","getIndex","value","arr","prop","i","length","orderOptions","column","label","orderManners","pageSizes","ProductGroup","match","isLoaded","setIsLoaded","displayMode","setDisplayMode","currentPage","setCurrentPage","selectedPageSize","setSelectedPageSize","selectedOrderOption","setSelectedOrderOption","formData","setFormData","modalBasic","setModalBasic","modalOpen","setModalOpen","totalItemCount","setTotalItemCount","totalPage","setTotalPage","search","setSearch","selectedItems","setSelectedItems","items","setItems","lastChecked","setLastChecked","modal","setModal","details","setDetails","categories","setcategories","change","setchange","id","setId","modalDelete","setModalDelete","modalAdd","setModalAdd","loadingData","setLoadingData","user","setUser","orderBy","setOrderBy","orderManner","setOrderManner","products","setProducts","productCurrentPage","setProductCurrentPage","lastProduct","setLastProduct","selectedProducts","setSelectedProducts","productTotalPage","setProductTotalPage","productCount","setProductCount","productIds","setProductIds","searchItem","setSearchItem","deleteMultipleModal","e","CreateNewProductGroup","preventDefault","data","userId","localStorage","getItem","parseInt","post","success","console","log","error","response","message","deleteModal","addModal","get","map","x","then","res","totalItem","product","push","catch","ex","fetchData","Math","ceil","count","deleteMultiple","delete","params","openModal","name","deleteProductGroup","edit","put","onCheckItem","event","target","tagName","parentElement","selectedList","includes","filter","shiftKey","newItems","start","end","slice","min","max","item","Array","from","Set","document","activeElement","blur","onProductCheck","checker","master","every","handleProductSelectAll","isToggle","itemId","assignGroup","req","handleChangeSelectAll","changePage","onContextMenuClick","action","onContextMenu","clickedProductId","startIndex","endIndex","key","ord","man","ind","findIndex","updatedAt","email"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport 'react-tagsinput/react-tagsinput.css';\nimport axios from 'axios';\nimport useMousetrap from '../../../../hooks/use-mousetrap';\nimport {\n  Button,\n  Modal,\n  ModalHeader,\n  ModalBody,\n  ModalFooter,\n  Input,\n  Label,\n  Row,\n  Col\n} from 'reactstrap';\nimport { NotificationManager } from '../../../../components/common/react-notifications';\nimport IntlMessages from '../../../../helpers/IntlMessages';\nimport AddNewProductGroupModal from './add-new-group';\nimport ProductGroupListHeading from './ProductGroupListHeading';\nimport ProductGroupPageHeadings from './ProductGroupPageHeadings';\nimport ProductGroupPageListing from './ProductGroupPageListing';\nimport ProductPageListing from './ProductsPageListing'\nimport ProductsListHeading from './ProductsListHeading'\n\n\nconst getIndex = (value, arr, prop) => {\n  for (let i = 0; i < arr.length; i += 1) {\n    if (arr[i][prop] === value) {\n      return i;\n    }\n  }\n  return -1;\n};\n\nconst orderOptions = [\n  { column: 'id', label: 'Id' },\n  { column: 'name', label: 'Name' },\n  { column: 'productsCount', label: 'Product Count' },\n];\n\nconst orderManners  = [\n  { value: 'ASC', label: 'Ascending' },\n  { value: 'DESC', label: 'Descending' }\n]\n\nconst pageSizes = [10, 15, 30, 100];\n\n\nconst ProductGroup = ({ match }) => {\n  const [isLoaded, setIsLoaded] = useState(false);\n  const [displayMode, setDisplayMode] = useState('thumblist');\n  const [currentPage, setCurrentPage] = useState(1);\n  const [selectedPageSize, setSelectedPageSize] = useState(15);\n  const [selectedOrderOption, setSelectedOrderOption] = useState({\n    column: 'title',\n    label: 'Variant Name',\n  });\n  const [formData, setFormData] = React.useState({})\n  const [modalBasic, setModalBasic] = useState(false);\n  const [modalOpen, setModalOpen] = useState(false);\n  const [totalItemCount, setTotalItemCount] = useState(0);\n  const [totalPage, setTotalPage] = useState(1);\n  const [search, setSearch] = useState('');\n  const [selectedItems, setSelectedItems] = useState([]);\n  const [items, setItems] = useState([]);\n  const [lastChecked, setLastChecked] = useState(null);\n  const [modal, setModal] = useState(false)\n  const [details, setDetails] = useState({})\n  const [categories, setcategories] = useState([])\n  const [change, setchange] = useState(false)\n  const [id, setId] = useState(0)\n  const [modalDelete, setModalDelete] = useState(false)\n  const [modalAdd, setModalAdd] = useState(false)\n  const [loadingData, setLoadingData] = useState(false);\n  const [user, setUser] = useState({})\n  const [orderBy, setOrderBy] = useState({ column : 'id', label: 'Id'})\n  const [orderManner, setOrderManner] = useState({ value : 'ASC', label : 'Ascending' })\n  //? Products States\n  const [products, setProducts] = useState([])\n  const [productCurrentPage, setProductCurrentPage] = useState(1)\n  const [lastProduct, setLastProduct] = useState(null)\n  const [selectedProducts, setSelectedProducts] = useState([])\n  const [productTotalPage, setProductTotalPage] = useState(0)\n  const [productCount, setProductCount] = useState(0)\n  const [productIds, setProductIds] = useState([])\n  const [searchItem, setSearchItem] = useState('')\n\n  const deleteMultipleModal = (e) => {\n    setModalDelete(true)\n  }\n\n  const CreateNewProductGroup = async e => {\n    e.preventDefault();\n    let data = formData\n    const userId = localStorage.getItem('userId')\n    data.userId = parseInt(userId)\n    try {\n      await axios.post('/api/inventory/product-groups', data)\n      setModalOpen(false);\n      setchange(!change);\n      return NotificationManager.success('Product Group Created Successfully', 'Success', 3000)\n    } catch (error) {\n      console.log(error);\n      return NotificationManager.error(error.response.message, 'Error', 3000) \n    }\n  }\n\n  const deleteModal = (e) => {\n    setModalBasic(true)\n    setId(e);\n  }\n\n  const addModal = async (e) => {\n    setLoadingData(true)\n    setModalAdd(true)\n    try {\n      const {data} = await axios.get(`/api/inventory/product-groups/${e}`)\n      console.log(data)\n      setDetails(data.data)\n      setSelectedProducts(data.products.map(x => x.id))\n      const {data : user} = await axios.get(`/api/user-details?id=${data.data.userId}`)\n      setUser(user.data)\n      setLoadingData(false)\n    } catch (error) {\n      console.log(error)\n      setModalAdd(false)\n      setLoadingData(false)\n      return NotificationManager.error(error.response.message)\n    }\n  }\n\n  useEffect(() => {\n    setLoadingData(true)\n    axios.get(`/api/inventory/get-products/${productCurrentPage}?searchItem=${searchItem}`)\n      .then(res => {\n        setProducts(res.data.data)\n        setProductCount(res.data.totalItem)\n        setProductTotalPage(res.data.totalPage)\n        const arr = []\n        res.data.data.map(product => arr.push(product.id))\n        setProductIds(arr)\n        setLoadingData(false)\n      })\n      .catch(ex => {\n        console.log(ex);\n        return NotificationManager.error(ex.response.message, 'Error', 3000)\n      })\n  }, [productCurrentPage]);\n\n  useEffect(() => {\n    setCurrentPage(1);\n  }, [selectedPageSize, selectedOrderOption]);\n\n  useEffect(() => {\n    function fetchData() {\n      axios\n        .get(\n          `/api/inventory/product-groups?page=${currentPage}&pageSize=${selectedPageSize}&searchItem=${search}&orderBy=${orderBy.column}&orderManner=${orderManner.value}`\n        )\n        .then((res) => {\n          return res.data;\n        })\n        .then((data) => {\n          console.log(data.data);\n          setTotalPage(Math.ceil(data.count/selectedPageSize));\n          setItems(data.data.map(x => { return { ...x } }));\n          // setSelectedItems([]);\n          setTotalItemCount(data.count);\n          setIsLoaded(true);\n        });\n    }\n    fetchData();\n  }, [change]);\n  // DELETE MULTIPLE VARIANTS\n  const deleteMultiple = async () => {\n    axios.delete(\"/api/inventory/product-groups\", { params: { id: selectedItems } }).then(res => {\n      console.log(res.data)\n      setchange(!change)\n      setModalDelete(false)\n      NotificationManager.success(\n        'Product Groups Deleted Successfully',\n        'Success',\n        3000,\n        null,\n        null,\n        ''\n      );\n    })\n  }\n\n  // GET THE PRODUCT GROUP DETAILS AND OPEN THE EDIT MODAL\n  const openModal = (id, name) => {\n    setDetails({ id, name})\n    setModal(true)\n  };\n  \n  //DELETE Product Group HANDLER\n  const deleteProductGroup = async () => {\n    try {\n      await axios.delete(`/api/inventory/product-groups?id=${id}`)\n      setchange(!change)\n      setModalBasic(false)\n      return NotificationManager.success('Product Group Deleted Successfully', 'Success', 3000)\n    } catch (error) {\n      console.log(error)\n      return NotificationManager.error(error.response.message, 'Error', 3000)\n    }\n  };\n\n  // EDIT HANDLER\n  const edit = async (e) => {\n    let data = {}\n    data.name = formData.name\n    data.userId = parseInt(localStorage.getItem('userId'))\n    try {\n      await axios.put(`/api/inventory/product-groups/${e}`, data)\n      setModal(false)\n      setchange(!change)\n      return NotificationManager.success('Product Group Updated Successfully', 'Success', 3000)\n    } catch (error) {\n      console.log(error);\n      return NotificationManager.error(error.response.message, 'Error', 3000)\n    }\n  }\n\n  const onCheckItem = (event, id) => {\n    if (\n      event.target.tagName === 'A' ||\n      (event.target.parentElement && event.target.parentElement.tagName === 'A')\n    ) {\n      return true;\n    }\n    if (lastChecked === null) {\n      setLastChecked(id);\n    }\n\n    let selectedList = [...selectedItems];\n    if (selectedList.includes(id)) {\n      selectedList = selectedList.filter((x) => x !== id);\n    } else {\n      selectedList.push(id);\n    }\n    setSelectedItems(selectedList);\n\n    if (event.shiftKey) {\n      let newItems = [...items];\n      const start = getIndex(id, newItems, 'id');\n      const end = getIndex(lastChecked, newItems, 'id');\n      newItems = newItems.slice(Math.min(start, end), Math.max(start, end) + 1);\n      selectedItems.push(\n        ...newItems.map((item) => {\n          return item.id;\n        })\n      );\n      selectedList = Array.from(new Set(selectedItems));\n      setSelectedItems(selectedList);\n    }\n    document.activeElement.blur();\n    return false;\n  };\n\n\n  //? Products Check\n  const onProductCheck = (event, id) => {\n    if (\n      event.target.tagName === 'A' ||\n      (event.target.parentElement && event.target.parentElement.tagName === 'A')\n    ) {\n      return true;\n    }\n    if (lastChecked === null) {\n      setLastProduct(id);\n    }\n\n    let selectedList = [...selectedProducts];\n    if (selectedList.includes(id)) {\n      selectedList = selectedList.filter((x) => x !== id);\n    } else {\n      selectedList.push(id);\n    }\n    setSelectedProducts(selectedList);\n\n    if (event.shiftKey) {\n      let newItems = [...products];\n      const start = getIndex(id, newItems, 'id');\n      const end = getIndex(lastProduct, newItems, 'id');\n      newItems = newItems.slice(Math.min(start, end), Math.max(start, end) + 1);\n      selectedProducts.push(\n        ...newItems.map((item) => {\n          return item.id;\n        })\n      );\n      selectedList = Array.from(new Set(selectedProducts));\n      setSelectedProducts(selectedList);\n    }\n    document.activeElement.blur();\n    return false;\n  };\n\n  const checker = (master, target) => target.every(item => master.includes(item))\n\n  //? Handle All Products Selection\n  const handleProductSelectAll = (isToggle) => {\n    if (checker(selectedProducts,productIds)) {\n      if (isToggle) {\n            let arr = []\n            arr = selectedProducts.filter(itemId => !productIds.includes(itemId) )\n            setSelectedProducts(arr);\n      }\n    } else {\n        let arr = selectedProducts\n      products.map((x) => arr.push(x.id));\n      setSelectedProducts(Array.from(new Set(arr)))\n    }\n    \n    document.activeElement.blur();\n    return false;\n  };\n\n  //? Assign Products to group\n  const assignGroup = async (req, res) => {\n    console.log(typeof(selectedProducts))\n    const userId = localStorage.getItem('userId')\n    try {\n      await axios.put(`/api/inventory/product-groups/${details.id}/products/modify`, { productIds : selectedProducts, userId })\n      setSelectedProducts([]);\n      setModalAdd(false);\n      setchange(!change);\n      return NotificationManager.success('Product(s) Assigned/Removed to Group Successfully.', 'Success', 3000)\n    } catch (error) {\n      console.log(error);\n      return NotificationManager.error(error.response.message, 'Error', 3000)\n    }\n  }\n\n  const handleChangeSelectAll = (isToggle) => {\n    if (selectedItems.length >= items.length) {\n      if (isToggle) {\n        setSelectedItems([]);\n      }\n    } else {\n      setSelectedItems(items.map((x) => x.id));\n    }\n    document.activeElement.blur();\n    return false;\n  };\n\n  const changePage = (i) => {\n    setCurrentPage(i)\n    axios.get(`/api/inventory/product-groups?page=${i}&pageSize=${selectedPageSize}&searchItem=${search}&orderBy=${orderBy.column}&orderManner=${orderManner.value}`).then(res => {\n      setTotalPage(res.data.count / selectedPageSize);\n      setItems(res.data.data.map(x => { return { ...x } }));\n      setSelectedItems([]);\n      setTotalItemCount(res.data.count);\n      setIsLoaded(true);\n    })\n  }\n\n  const onContextMenuClick = (e, data) => {\n    // params : (e,data,target)\n    console.log('onContextMenuClick - selected items', selectedItems);\n    console.log('onContextMenuClick - action : ', data.action);\n  };\n\n  const onContextMenu = (e, data) => {\n    const clickedProductId = data.data;\n    if (!selectedItems.includes(clickedProductId)) {\n      setSelectedItems([clickedProductId]);\n    }\n\n    return true;\n  };\n\n  useMousetrap(['ctrl+a', 'command+a'], () => {\n    handleChangeSelectAll(false);\n  });\n\n  useMousetrap(['ctrl+d', 'command+d'], () => {\n    setSelectedItems([]);\n    return false;\n  });\n\n  const startIndex = (currentPage - 1) * selectedPageSize;\n  const endIndex = currentPage * selectedPageSize;\n\n  return !isLoaded ? (\n    <div className=\"loading\" />\n  ) : (\n      <>\n        <div className=\"disable-text-selection\">\n          <ProductGroupPageHeadings\n            deleteMultipleModal={deleteMultipleModal}\n            heading=\"Product Groups\"\n            orderBy={orderBy}\n            orderManner={orderManner}\n            displayMode={displayMode}\n            changeDisplayMode={setDisplayMode}\n            orderManners={orderManners}\n            handleChangeSelectAll={handleChangeSelectAll}\n            changePageSize={setSelectedPageSize}\n            selectedPageSize={selectedPageSize}\n            totalItemCount={totalItemCount}\n            selectedOrderOption={selectedOrderOption}\n            match={match}\n            startIndex={startIndex}\n            endIndex={endIndex}\n            selectedItemsLength={selectedItems ? selectedItems.length : 0}\n            itemsLength={items ? items.length : 0}\n            onSearchKey={(e) => {\n              if (e.key === 'Enter') {\n                setSearch(e.target.value);\n                axios.get(`/api/inventory/product-groups?page=${currentPage}&pageSize=${selectedPageSize}&searchItem=${e.target.value}&orderBy=${orderBy.column}&orderManner=${orderManner.value}`)\n                .then( res => {\n                  setTotalPage(res.data.count / selectedPageSize);\n                  setItems(res.data.data.map(x => { return { ...x } }));\n                  setTotalItemCount(res.data.count);\n                  setIsLoaded(true);\n                })\n              }\n            }}\n            changeOrderBy={ (ord) => {\n              setOrderBy(ord)\n                axios.get(`/api/inventory/product-groups?page=${currentPage}&pageSize=${selectedPageSize}&searchItem=${search}&orderBy=${ord.column}&orderManner=${orderManner.value}`)\n                  .then(res => {\n                    setTotalPage(res.data.count / selectedPageSize);\n                    setItems(res.data.data.map(x => { return { ...x } }));\n                    setTotalItemCount(res.data.count);\n                  })\n                }\n              }\n              changeOrderManner={async (man) => {\n                  setOrderManner(man)\n                  axios.get(`/api/inventory/product-groups?page=${currentPage}&pageSize=${selectedPageSize}&searchItem=${search}&orderBy=${orderBy.column}&orderManner=${man.value}`)\n                  .then(res => {\n                    setTotalPage(res.data.count / selectedPageSize);\n                    setItems(res.data.data.map(x => { return { ...x } }));\n                    setTotalItemCount(res.data.count);\n                  })\n                }\n              }\n            orderOptions={orderOptions}\n            pageSizes={pageSizes}\n            toggleModal={() => setModalOpen(!modalOpen)}\n          />\n          <AddNewProductGroupModal\n            change={change}\n            setchange={setchange}\n            modalOpen={modalOpen}\n            CreateNewProductGroup={CreateNewProductGroup}\n            formData = {formData}\n            setFormData={setFormData}\n            toggleModal={() => setModalOpen(!modalOpen)}\n            categories={categories}\n          />\n          {items.length==0 ? \"\":<ProductGroupListHeading\n            selectedItemsLength={selectedItems ? selectedItems.length : 0}\n            handleChangeSelectAll={handleChangeSelectAll}\n            itemsLength={items ? items.length : 0}\n            orderBy={orderBy}\n            orderManner={orderManner}\n            changeOrderBy={async (ord) => {\n              setOrderBy(ord)\n              if(orderBy.column === ord.column){\n                const ind = !(orderManners.findIndex(man => man.value===orderManner.value))\n                setOrderManner(orderManners[ind ? 1 : 0])\n                axios.get(`/api/inventory/product-groups?page=${currentPage}&pageSize=${selectedPageSize}&searchItem=${search}&orderBy=${ord.column}&orderManner=${orderManners[ind ? 1 : 0].value}`)\n                .then(res => {\n                  setTotalPage(res.data.count / selectedPageSize);\n                  setItems(res.data.data.map(x => { return { ...x } }));\n                  setTotalItemCount(res.data.count);\n                })\n                } else {\n                  setOrderManner(orderManners[0])\n                axios.get(`/api/inventory/product-groups?page=${currentPage}&pageSize=${selectedPageSize}&searchItem=${search}&orderBy=${ord.column}&orderManner=${orderManners[0].value}`)\n                .then(res => {\n                  setTotalPage(res.data.count / selectedPageSize);\n                  setItems(res.data.data.map(x => { return { ...x } }));\n                  setTotalItemCount(res.data.count);\n                })\n              }\n            }\n          }\n          />}\n          {items.length== 0 ? <h3>No Records Found</h3> :<ProductGroupPageListing\n            items={items}\n            deleteModal={deleteModal}\n            openModal={openModal}\n            addModal={addModal}\n            displayMode={displayMode}\n            selectedItems={selectedItems}\n            onCheckItem={onCheckItem}\n            currentPage={currentPage}\n            totalPage={totalPage}\n            onContextMenuClick={onContextMenuClick}\n            onContextMenu={onContextMenu}\n            onChangePage={changePage}\n          /> }\n          {/* Edit Modal */}\n          <Modal isOpen={modal} toggle={() => setModal(!modal)}>\n            <ModalHeader>\n              <IntlMessages id=\"Edit\" />\n            </ModalHeader>\n            <ModalBody>\n              <Row className='mt-3'>\n                <Col>\n                  <Label>\n                    <IntlMessages id=\"Group Name\" />\n                  </Label>\n                  <Input onChange={(e) => {\n                    setFormData({ ...formData, name: e.target.value })\n                  }}\n                    defaultValue={details.name} />\n                </Col>\n              </Row>\n            </ModalBody>\n            <ModalFooter>\n              <Button onClick={() => edit(details.id)} color=\"primary\">\n                Save Changes\n            </Button>{' '}\n              <Button color=\"secondary\" onClick={() => setModal(false)}>\n                Cancel\n            </Button>\n            </ModalFooter>\n          </Modal>\n          <Modal isOpen={modalBasic} toggle={() => setModal(!modalBasic)}>\n            <ModalHeader>\n              <IntlMessages id=\"Delete\" />\n            </ModalHeader>\n            <ModalBody>\n              Are you sure you want to delete product group?\n            </ModalBody>\n            <ModalFooter>\n              <Button onClick={deleteProductGroup} color=\"primary\">\n                Confirm\n          </Button>{' '}\n              <Button color=\"secondary\" onClick={() => setModalBasic(false)}>\n                Cancel\n          </Button>\n            </ModalFooter>\n          </Modal>\n          {/* Delete multiple Modal */}\n          <Modal isOpen={modalDelete} toggle={() => setModal(!modalDelete)}>\n            <ModalHeader>\n              <IntlMessages id=\"Delete\" />\n            </ModalHeader>\n            <ModalBody>\n              Are you sure you want to delete selected items?\n        </ModalBody>\n            <ModalFooter>\n              <Button onClick={deleteMultiple} color=\"primary\">\n                Confirm\n          </Button>{' '}\n              <Button color=\"secondary\" onClick={() => setModalDelete(false)}>\n                Cancel\n          </Button>\n            </ModalFooter>\n          </Modal>\n          <Modal isOpen={modalAdd} size=\"xl\">\n            <ModalHeader toggle={() => setModalAdd(false)}>\n              <IntlMessages id=\"Add Products to Group\" />\n            </ModalHeader>\n            <ModalBody>\n            {loadingData ? <div className=\"loading\"></div> : \n            <>\n              <Row>\n                <Col>\n                  <p className=\"h6\">Product Name : <span className=\"font-weight-bold\">{details.name}</span></p>\n                </Col>\n                <Col>\n                  <p className=\"h6\">Modified On : <span className=\"font-weight-bold\">{details.updatedAt}</span></p>\n                </Col>\n                <Col>\n                  <p className=\"h6\">Modified By : <span className=\"font-weight-bold\">{user.email}</span></p>\n                </Col>\n              </Row>\n              <Row className='mt-3'>\n                <Col>\n                <Input \n                  placeholder='Search for SKU(s), Name(s)'\n                  onKeyUp = {(e) => {\n                    if (e.key === 'Enter') {\n                      setSearchItem(e.target.value);\n                      axios.get(`/api/inventory/get-products/1?searchItem=${e.target.value}`)\n                      .then( res => {\n                        setProducts(res.data.data)\n                        setProductCount(res.data.totalItem)\n                        setProductTotalPage(res.data.totalPage)\n                        const arr = []\n                        res.data.data.map(product => arr.push(product.id))\n                        setProductIds(arr)\n                        NotificationManager.success('Search Completed.', 'Success', 3000)\n                      })\n                    }\n                  }}\n                  />\n                </Col>\n              </Row>\n              <p className=\"mt-2 h6 text-right\">Listing {productCount} Product(s)</p>\n              {productCount ? <>\n                <ProductsListHeading\n                  checker={checker}\n                  productIds={productIds}\n                  selectedProducts={selectedProducts}\n                  handleChangeSelectAll={handleProductSelectAll}\n                />\n                {items && <ProductPageListing\n                  items={products}\n                  selectedItems={selectedProducts}\n                  onCheckItem={onProductCheck}\n                  currentPage={productCurrentPage}\n                  totalPage={productTotalPage}\n                  onChangePage={setProductCurrentPage}\n                />}\n              </> : <h4 className=\"text-center\">No Products</h4>}\n              </> }\n            </ModalBody>\n            <ModalFooter>\n              <p className=\"alert alert-primary rounded mx-2 mt-3\">{selectedProducts.length} Product(s) Selected</p>\n              <Button color=\"primary\" disabled={!selectedProducts.length} onClick={assignGroup}>\n                Assign\n              </Button>{' '}\n              <Button color=\"secondary\" onClick={() => setModalAdd(false)}>\n                Cancel\n              </Button>\n            </ModalFooter>\n          </Modal>\n        </div>\n      </>\n    );\n};\n\nexport default ProductGroup;\n"]},"metadata":{},"sourceType":"module"}