{"ast":null,"code":"import React,{useState}from'react';import CustomInput from'reactstrap/lib/CustomInput';import*as XLSX from'xlsx';function CsvModalContent(_ref){var setData=_ref.setData,importing=_ref.importing,setProcessingFile=_ref.setProcessingFile;// process CSV data\nvar processData=function processData(dataString){var dataStringLines=dataString.split(/\\r\\n|\\n/);var headers=dataStringLines[0].split(/,(?![^\"]*\"(?:(?:[^\"]*\"){2})*[^\"]*$)/);var list=[];for(var i=1;i<dataStringLines.length;i++){var row=dataStringLines[i].split(/,(?![^\"]*\"(?:(?:[^\"]*\"){2})*[^\"]*$)/);if(headers&&row.length==headers.length){var obj={};for(var j=0;j<headers.length;j++){var d=row[j];if(d.length>0){if(d[0]=='\"')d=d.substring(1,d.length-1);if(d[d.length-1]=='\"')d=d.substring(d.length-2,1);}if(headers[j]){obj[headers[j]]=d;}}// remove the blank rows\nif(Object.values(obj).filter(function(x){return x;}).length>0){list.push(obj);}}}// prepare columns list from headers\nvar columns=headers.map(function(c){return{name:c,selector:c};});setData(list);setProcessingFile(false);};// handle file upload\nvar handleChange=function handleChange(e){var file=e.target.files[0];setProcessingFile(true);var reader=new FileReader();reader.onload=function(evt){/* Parse data */var bstr=evt.target.result;var wb=XLSX.read(bstr,{type:'binary'});/* Get first worksheet */var wsname=wb.SheetNames[0];var ws=wb.Sheets[wsname];/* Convert array of arrays */var data=XLSX.utils.sheet_to_csv(ws,{header:1});processData(data);};reader.readAsBinaryString(file);};return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(CustomInput,{type:\"file\",accept:\".csv,.xlsx\",onChange:handleChange,id:\"exampleCustomFileBrowser3\",name:\"customFile\"}),importing&&/*#__PURE__*/React.createElement(\"div\",{className:\"text-center mt-3\"},/*#__PURE__*/React.createElement(\"h3\",null,\"Importing Data !!!\"),/*#__PURE__*/React.createElement(\"h4\",null,\"Please Wait...\")));}export default CsvModalContent;","map":null,"metadata":{},"sourceType":"module"}