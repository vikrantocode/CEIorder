{"ast":null,"code":"import _slicedToArray from\"/home/browsewire/Desktop/CEI/cei/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{Row,Button,Col,Card,CardBody,Table}from'reactstrap';import axios from'axios';import{useHistory}from'react-router';import{Colxx,Separator}from'../../../../components/common/CustomBootstrap';import Breadcrumb from'../../../../containers/navs/Breadcrumb';import IntlMessages from'../../../../helpers/IntlMessages';import{NotificationManager}from'../../../../components/common/react-notifications';var Customer=function Customer(_ref){var match=_ref.match;var _useState=useState({}),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isLoaded=_useState4[0],setIsLoaded=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),id=_useState6[0],setId=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),change=_useState8[0],setChange=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),orders=_useState10[0],setOrders=_useState10[1];var history=useHistory();useEffect(function(){setId(match.params.id);axios.get(\"/api/customers/details/\".concat(match.params.id)).then(function(res){setData(res.data.customer);setOrders(res.data.orders);setIsLoaded(true);}).catch(function(err){console.log(err.response);return NotificationManager.error('Something Went Wrong!!!','Error',3000);});},[change]);var date=new Date().toString().slice(4,15).replace(/-/g,'/');var getTotalPrice=function getTotalPrice(){var sum=0;orders.forEach(function(order){return sum+=order.paymentDetail.grandTotal;});return sum.toFixed(2);};var getLastOrderTotal=function getLastOrderTotal(){var max=0;orders.forEach(function(_ref2){var paymentDetail=_ref2.paymentDetail;if(paymentDetail.grandTotal>max)max=paymentDetail.grandTotal;});return max;};return!isLoaded?/*#__PURE__*/React.createElement(\"div\",{className:\"loading\"}):/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Colxx,{xxs:\"12\"},/*#__PURE__*/React.createElement(Breadcrumb,{heading:\"\".concat(data.username),match:match}),/*#__PURE__*/React.createElement(\"div\",{className:\"text-zero top-right-button-container\"},/*#__PURE__*/React.createElement(Button,{color:\"danger\",size:\"lg\",outline:true,className:\"top-right-button\",onClick:function onClick(){history.push('/app/customers');}},/*#__PURE__*/React.createElement(IntlMessages,{id:\"Back\"})),'  '),/*#__PURE__*/React.createElement(Separator,{className:\"mb-5\"}))),/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex flex-column\"},/*#__PURE__*/React.createElement(Row,{className:\"mb-4\"},/*#__PURE__*/React.createElement(Colxx,{xxs:\"12\"},/*#__PURE__*/React.createElement(Card,null,/*#__PURE__*/React.createElement(CardBody,null,/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,null,/*#__PURE__*/React.createElement(Table,null,/*#__PURE__*/React.createElement(\"tbody\",null,data.firstName&&/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",null,\"First Name\"),/*#__PURE__*/React.createElement(\"td\",null,data.firstName)),data.email&&/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",null,\"Email\"),/*#__PURE__*/React.createElement(\"td\",null,data.email)),data.address1&&/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",null,\"Address 1\"),/*#__PURE__*/React.createElement(\"td\",null,data.address1)),data.city&&/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",null,\"City\"),/*#__PURE__*/React.createElement(\"td\",null,data.city)),data.country&&/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",null,\"Country\"),/*#__PURE__*/React.createElement(\"td\",null,data.country)),data.phone&&/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",null,\"Phone\"),/*#__PURE__*/React.createElement(\"td\",null,data.phone)),data.creditTerm&&/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",null,\"Credit Term\"),/*#__PURE__*/React.createElement(\"td\",null,data.creditTerm)),data.userPhone1&&/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",null,\"User Phone 1\"),/*#__PURE__*/React.createElement(\"td\",null,data.userPhone1)),data.userPhone3&&/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",null,\"User Phone 3\"),/*#__PURE__*/React.createElement(\"td\",null,data.userPhone3))))),/*#__PURE__*/React.createElement(Col,null,/*#__PURE__*/React.createElement(Table,null,/*#__PURE__*/React.createElement(\"tbody\",null,data.lastName&&/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",null,\"Last Name\"),/*#__PURE__*/React.createElement(\"td\",null,data.lastName)),data.emailCC&&/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",null,\"Email CC\"),/*#__PURE__*/React.createElement(\"td\",null,data.emailCC)),data.address2&&/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",null,\"Address 2\"),/*#__PURE__*/React.createElement(\"td\",null,data.address2)),data.state&&/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",null,\"State\"),/*#__PURE__*/React.createElement(\"td\",null,data.state)),data.zipCode&&/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",null,\"Zip Code\"),/*#__PURE__*/React.createElement(\"td\",null,data.zipCode)),data.businessName?/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",null,\"Business Name\"),/*#__PURE__*/React.createElement(\"td\",null,data.businessName)):'',data.creditLimit?/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",null,\"Credit Limit\"),/*#__PURE__*/React.createElement(\"td\",null,data.creditLimit)):'',data.userPhone2?/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",null,\"User Phone 2\"),/*#__PURE__*/React.createElement(\"td\",null,data.userPhone2)):'')))),/*#__PURE__*/React.createElement(Row,{className:\"mt-3\"},/*#__PURE__*/React.createElement(Col,null),/*#__PURE__*/React.createElement(Col,null,data.createdAt&&/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"span\",{className:\"font-weight-bold mr-3 mt-2\"},\"Joined Us On :\"),' ',new Date(data.createdAt).toString()),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"span\",{className:\"font-weight-bold mr-3 mt-2\"},\"Last Order Total :\",' '),' ',\"$ \",getLastOrderTotal()),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"span\",{className:\"font-weight-bold mr-3 mt-2\"},\"Total No. Of Orders :\"),' ',orders.length),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"span\",{className:\"font-weight-bold mr-3 mt-2\"},\"Order Grand Total ( Till \",date,\" ) :\",' '),' ',\"$ \",getTotalPrice())))))))));};export default Customer;","map":null,"metadata":{},"sourceType":"module"}