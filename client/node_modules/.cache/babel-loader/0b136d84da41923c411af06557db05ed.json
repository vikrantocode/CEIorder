{"ast":null,"code":"import _objectSpread from\"/home/browsewire/Desktop/CEI/cei/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _toConsumableArray from\"/home/browsewire/Desktop/CEI/cei/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _createForOfIteratorHelper from\"/home/browsewire/Desktop/CEI/cei/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper\";import _slicedToArray from\"/home/browsewire/Desktop/CEI/cei/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import{Button,Modal,ModalHeader,ModalBody,ModalFooter,Input,Label,Row,Col}from'reactstrap';import Select from'react-select';import CustomSelectInput from'../../../../components/common/CustomSelectInput';import IntlMessages from'../../../../helpers/IntlMessages';import axios from'axios';import{NotificationManager}from'../../../../components/common/react-notifications';var statusOptions=[{label:'Active',value:'Active',key:0},{label:'Inactive',value:'Inactive',key:1}];var AddNewVariantModal=function AddNewVariantModal(_ref){var modalOpen=_ref.modalOpen,toggleModal=_ref.toggleModal,categories=_ref.categories,change=_ref.change,setchange=_ref.setchange;var _React$useState=React.useState({}),_React$useState2=_slicedToArray(_React$useState,2),formData=_React$useState2[0],setformData=_React$useState2[1];var _useState=useState([\"\"]),_useState2=_slicedToArray(_useState,2),variants=_useState2[0],setVariants=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),selectedOptions=_useState4[0],setSelectedOptions=_useState4[1];// Create new Variant axios call\nvar CreateNewVariant=function CreateNewVariant(e){e.preventDefault();var selectedCategories=[];var _iterator=_createForOfIteratorHelper(selectedOptions),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var i=_step.value;selectedCategories.push(i.label);}}catch(err){_iterator.e(err);}finally{_iterator.f();}if(!formData.name||!formData.status||variants.length==0||selectedCategories.length==0){NotificationManager.error(\"Please check the details\",'Error',3000,null,null,'');}else{var data={variant:formData.name.toLowerCase(),status:formData.status,attributes:variants,categories:selectedCategories};axios.post(\"/api/inventory/new-variant\",data).then(function(res){if(res.data.success){toggleModal();setchange(!change);NotificationManager.success(res.data.success,'Success',3000,null,null,'');}});}};// handle click event of the Remove button\nvar handleRemoveClick=function handleRemoveClick(index){console.log(index);var list=_toConsumableArray(variants);list.splice(index,1);console.log(list);setVariants(list);};// handle click event of the Add button\nvar handleAddClick=function handleAddClick(){setVariants([].concat(_toConsumableArray(variants),[{value:\"\"}]));};return/*#__PURE__*/React.createElement(Modal,{isOpen:modalOpen,toggle:toggleModal,wrapClassName:\"modal-right\",backdrop:\"static\"},/*#__PURE__*/React.createElement(ModalHeader,{toggle:toggleModal},/*#__PURE__*/React.createElement(IntlMessages,{id:\"Add New Variation\"})),/*#__PURE__*/React.createElement(ModalBody,null,/*#__PURE__*/React.createElement(\"div\",{className:\"mt-3\"},/*#__PURE__*/React.createElement(Label,null,/*#__PURE__*/React.createElement(IntlMessages,{id:\"Variant Name\"})),/*#__PURE__*/React.createElement(Input,{onChange:function onChange(e){setformData(_objectSpread(_objectSpread({},formData),{},{name:e.target.value}));}})),variants.map(function(variant,i){return/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,null,/*#__PURE__*/React.createElement(Label,{className:\"mt-4\"},/*#__PURE__*/React.createElement(IntlMessages,{id:\"Variant Value\"})),/*#__PURE__*/React.createElement(Input,{value:variant.value,onChange:function onChange(e){var values=_toConsumableArray(variants);values[i]=e.target.value;setVariants(values);}})),/*#__PURE__*/React.createElement(\"div\",{className:\"mt-5\"},variants.length!==1&&/*#__PURE__*/React.createElement(Button,{color:\"secondary\",outline:true,onClick:function onClick(){return handleRemoveClick(i);}},\"Remove\")));}),/*#__PURE__*/React.createElement(\"div\",{className:\"text-right\"},/*#__PURE__*/React.createElement(Button,{className:\"mt-3\",color:\"primary\",onClick:handleAddClick},/*#__PURE__*/React.createElement(IntlMessages,{id:\"Add More Value\"}))),/*#__PURE__*/React.createElement(\"div\",{className:\"\"},/*#__PURE__*/React.createElement(\"label\",null,/*#__PURE__*/React.createElement(IntlMessages,{id:\"Select Category\"})),/*#__PURE__*/React.createElement(Select,{components:{Input:CustomSelectInput},className:\"react-select\",classNamePrefix:\"react-select\",isMulti:true,name:\"form-field-name\",value:selectedOptions,onChange:setSelectedOptions,options:categories})),/*#__PURE__*/React.createElement(\"div\",{className:\"mt-3\"},/*#__PURE__*/React.createElement(Label,null,/*#__PURE__*/React.createElement(IntlMessages,{id:\"Status\"})),/*#__PURE__*/React.createElement(Select,{components:{Input:CustomSelectInput},className:\"react-select\",classNamePrefix:\"react-select\",name:\"form-field-name\",options:statusOptions,onChange:function onChange(e){setformData(_objectSpread(_objectSpread({},formData),{},{status:e.value}));}}))),/*#__PURE__*/React.createElement(ModalFooter,null,/*#__PURE__*/React.createElement(Button,{color:\"secondary\",outline:true,onClick:toggleModal},/*#__PURE__*/React.createElement(IntlMessages,{id:\"pages.cancel\"})),/*#__PURE__*/React.createElement(Button,{onClick:CreateNewVariant,color:\"primary\"},/*#__PURE__*/React.createElement(IntlMessages,{id:\"Create Variant\"}))));};export default AddNewVariantModal;","map":null,"metadata":{},"sourceType":"module"}