{"ast":null,"code":"import _objectSpread from\"/home/browsewire/Desktop/CEI/cei/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/home/browsewire/Desktop/CEI/cei/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/browsewire/Desktop/CEI/cei/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/browsewire/Desktop/CEI/cei/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import{Card,CustomInput,Badge}from'reactstrap';import{NavLink}from'react-router-dom';import classnames from'classnames';import{NotificationManager}from'../../components/common/react-notifications';import{ContextMenuTrigger}from'react-contextmenu';import{Colxx}from'../../components/common/CustomBootstrap';import{FaEdit,FaTrash,FaEye}from'react-icons/fa';import IntlMessages from'../../helpers/IntlMessages';import axios from'axios';import Select from'react-select';import CustomSelectInput from'../../components/common/CustomSelectInput';import{Button,Modal,ModalHeader,ModalBody,ModalFooter,Input,Label,Row,Col}from'reactstrap';var DataListView=function DataListView(_ref){var product=_ref.product,isSelect=_ref.isSelect,collect=_ref.collect,onCheckItem=_ref.onCheckItem,categories=_ref.categories,change=_ref.change,setchange=_ref.setchange,index=_ref.index;var _React$useState=React.useState({}),_React$useState2=_slicedToArray(_React$useState,2),formData=_React$useState2[0],setformData=_React$useState2[1];var _useState=useState(false),_useState2=_slicedToArray(_useState,2),modalBasic=_useState2[0],setModalBasic=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),details=_useState4[0],setDetails=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),deleteId=_useState6[0],setdeleteId=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),modal=_useState8[0],setModal=_useState8[1];var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),picture=_useState10[0],setPicture=_useState10[1];var _useState11=useState(null),_useState12=_slicedToArray(_useState11,2),imgData=_useState12[0],setImgData=_useState12[1];var baseUrl='https://cdn.linqusacorp.com';// GET THE USER DETAILS AND OPEN THE EDIT MODAL\nvar openModal=function openModal(e){axios.get('/api/user-details',{params:{id:e}}).then(function(res){console.log(res.data.data);setDetails(res.data.data);console.log(details);setModal(true);});};var onChangePicture=function onChangePicture(e){if(e.target.files[0]){console.log('picture: ',e.target.files);setPicture(e.target.files[0]);console.log(picture);var reader=new FileReader();reader.addEventListener('load',function(){setImgData(reader.result);console.log(reader.result);});reader.readAsDataURL(e.target.files[0]);}};var styles={active:{color:'green'},inactive:{color:'red'},profileImg:{height:'3rem',width:'3rem',borderRadius:'50%'},editprofileImage:{height:'5rem',width:'5rem',borderRadius:'50%'}};var setRole=function setRole(role){if(role==='user')return{label:'User',value:'user',key:0};else if(role==='admin')return{label:'Admin',value:'admin',key:1};else if(role==='magentoUser')return{label:'Magento User',value:'magentoUser',key:1};};// EDIT HANDLER\nvar edit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:console.log(e);if(!picture){_context.next=24;break;}data=new FormData();if(formData.firstName){data.append('firstName',formData.firstName);}if(formData.lastName){data.append('lastName',formData.lastName);}if(formData.email){data.append('email',formData.email);}if(formData.phone){data.append('phone',formData.phone);}if(formData.role){data.append('role',formData.role);}if(formData.address){data.append('address',formData.address);}data.append('profileImage',picture);_context.prev=10;_context.next=13;return axios.post(\"/api/edit-user?id=\".concat(e),data);case 13:setModal(false);setchange(!change);return _context.abrupt(\"return\",NotificationManager.success('User Details Updated','Success',3000));case 18:_context.prev=18;_context.t0=_context[\"catch\"](10);console.log(_context.t0);return _context.abrupt(\"return\",NotificationManager.error('Something Went Wrong','Error',3000));case 22:_context.next=36;break;case 24:_context.prev=24;_context.next=27;return axios.post(\"/api/edit-user?id=\".concat(e),formData);case 27:setModal(false);setchange(!change);return _context.abrupt(\"return\",NotificationManager.success('User Details Updated','Success',3000));case 32:_context.prev=32;_context.t1=_context[\"catch\"](24);console.log(_context.t1);return _context.abrupt(\"return\",NotificationManager.error('Something Went Wrong','Error',3000));case 36:case\"end\":return _context.stop();}}},_callee,null,[[10,18],[24,32]]);}));return function edit(_x){return _ref2.apply(this,arguments);};}();var deleteModal=function deleteModal(e){setdeleteId(e);setModalBasic(true);};// DELETE SINGLE USER\nvar deleteUser=function deleteUser(e){axios.post('/api/delete-user',null,{params:{id:deleteId}}).then(function(res){setchange(!change);setModalBasic(false);NotificationManager.success(res.data.success,'Success',3000,null,null,'');});};return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Colxx,{xxs:\"12\",className:\"mb-3\"},/*#__PURE__*/React.createElement(ContextMenuTrigger,{id:\"menu_id\",data:product.id,collect:collect},/*#__PURE__*/React.createElement(Card,null,/*#__PURE__*/React.createElement(\"div\",{className:\"pl-2 d-flex flex-grow-1 min-width-zero\"},/*#__PURE__*/React.createElement(\"div\",{style:{padding:'.5rem'},className:\"card-body align-self-center d-flex flex-column flex-lg-row justify-content-between min-width-zero align-items-lg-center\"},/*#__PURE__*/React.createElement(\"div\",{className:\"custom-control custom-checkbox pl-1 align-self-center pr-4\"},/*#__PURE__*/React.createElement(CustomInput,{className:\"item-check mb-0\",type:\"checkbox\",id:\"check_\".concat(product.id),checked:isSelect,onChange:function onChange(event){return onCheckItem(event,product.id);},[\"className\"]:classnames('d-flex flex-row',{active:isSelect}),label:\"\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"custom-control custom-checkbox pl-1 align-self-center pr-4\"},index+1),/*#__PURE__*/React.createElement(\"div\",{className:\"custom-control pl-1 align-self-center pr-4\"},/*#__PURE__*/React.createElement(\"img\",{style:styles.profileImg,src:product.profileImage?'http://d3o5w1w6u67fah.cloudfront.net/'+product.profileImage:'http://d3o5w1w6u67fah.cloudfront.net/userImages/user.png',alt:\"\"})),/*#__PURE__*/React.createElement(NavLink,{to:\"?p=\".concat(product.id),className:\"w-15 w-sm-100\"},/*#__PURE__*/React.createElement(\"p\",{style:{textTransform:'capitalize'},className:\"list-item-heading mb-1 truncate\"},product.firstName)),/*#__PURE__*/React.createElement(\"p\",{className:\"mb-1 text-muted text-small w-15 w-sm-100 list-item-heading\"},' ',product.lastName),/*#__PURE__*/React.createElement(\"p\",{className:\"mb-1 text-muted text-small w-20 w-sm-100 list-item-heading\"},' ',product.email),/*#__PURE__*/React.createElement(\"p\",{className:\"mb-1 w-10 w-sm-100 list-item-heading truncate text-capitalize\"},product.role),/*#__PURE__*/React.createElement(\"div\",{className:\"mb-1 w-10 w-sm-100 list-item-heading truncate\"},product.status?/*#__PURE__*/React.createElement(Badge,{color:\"success\",pill:true},\"Active\"):/*#__PURE__*/React.createElement(Badge,{color:\"warning\",pill:true},\"Inactive\")),/*#__PURE__*/React.createElement(FaEdit,{onClick:function onClick(){return openModal(product.id);}// style={{ cursor: 'pointer' }}\n,id:product.id,className:\"mb-1 w-2 w-sm-100 list-item-heading action-icon \"}),/*#__PURE__*/React.createElement(FaTrash,{onClick:function onClick(){return deleteModal(product.id);},value:product.id// style={{ cursor: 'pointer' }}\n,className:\"mb-1 w-2 w-sm-100 list-item-heading action-icon\"})))))),/*#__PURE__*/React.createElement(Modal,{isOpen:modal,toggle:function toggle(){return setModal(!modal);}},/*#__PURE__*/React.createElement(ModalHeader,null,/*#__PURE__*/React.createElement(IntlMessages,{id:\"Edit\"})),/*#__PURE__*/React.createElement(ModalBody,null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center justify-content-center flex-column p-3\"},imgData?/*#__PURE__*/React.createElement(\"img\",{style:styles.profileImg,src:imgData,alt:\"\"}):/*#__PURE__*/React.createElement(\"img\",{style:styles.profileImg,src:details.profileImage?'http://d3o5w1w6u67fah.cloudfront.net/'+details.profileImage:'http://d3o5w1w6u67fah.cloudfront.net/userImages/user.png',alt:\"\"}),/*#__PURE__*/React.createElement(Label,{className:\"font-weight-bold edit-profile\",htmlFor:\"profile\"},/*#__PURE__*/React.createElement(IntlMessages,{id:\"Change Picture\"})),/*#__PURE__*/React.createElement(Input,{onChange:onChangePicture,style:{display:'none'},id:\"profile\",type:\"file\"})),/*#__PURE__*/React.createElement(Row,{className:\"p-1\"},/*#__PURE__*/React.createElement(Col,{className:\"sm-6\"},/*#__PURE__*/React.createElement(Label,null,/*#__PURE__*/React.createElement(IntlMessages,{id:\"First name\"})),/*#__PURE__*/React.createElement(Input,{defaultValue:details.firstName,onChange:function onChange(e){setformData(_objectSpread(_objectSpread({},formData),{},{firstName:e.target.value.toLowerCase()}));}})),/*#__PURE__*/React.createElement(Col,{className:\"sm-6\"},/*#__PURE__*/React.createElement(Label,null,/*#__PURE__*/React.createElement(IntlMessages,{id:\"Last name\"})),/*#__PURE__*/React.createElement(Input,{defaultValue:details.lastName,onChange:function onChange(e){setformData(_objectSpread(_objectSpread({},formData),{},{lastName:e.target.value.toLowerCase()}));}}))),/*#__PURE__*/React.createElement(Row,{className:\"p-1\"},/*#__PURE__*/React.createElement(Col,{className:\"sm-8\"},/*#__PURE__*/React.createElement(Label,null,/*#__PURE__*/React.createElement(IntlMessages,{id:\"Email\"})),/*#__PURE__*/React.createElement(Input,{defaultValue:details.email,onChange:function onChange(e){setformData(_objectSpread(_objectSpread({},formData),{},{email:e.target.value}));}})),/*#__PURE__*/React.createElement(Col,{className:\"sm-4\"},/*#__PURE__*/React.createElement(Label,null,/*#__PURE__*/React.createElement(IntlMessages,{id:\"Phone\"})),/*#__PURE__*/React.createElement(Input,{defaultValue:details.phone,name:\"text\",onChange:function onChange(e){setformData(_objectSpread(_objectSpread({},formData),{},{phone:e.target.value}));}}))),/*#__PURE__*/React.createElement(Row,{className:\"p-1\"},/*#__PURE__*/React.createElement(Col,{className:\"sm-6\"},/*#__PURE__*/React.createElement(Label,null,/*#__PURE__*/React.createElement(IntlMessages,{id:\"Address\"})),/*#__PURE__*/React.createElement(Input,{defaultValue:details.address,name:\"text\",onChange:function onChange(e){setformData(_objectSpread(_objectSpread({},formData),{},{address:e.target.value}));}})),/*#__PURE__*/React.createElement(Col,{className:\"sm-6\"},/*#__PURE__*/React.createElement(Label,null,/*#__PURE__*/React.createElement(IntlMessages,{id:\"Role\"})),/*#__PURE__*/React.createElement(Select,{components:{Input:CustomSelectInput},className:\"react-select\",classNamePrefix:\"react-select\",name:\"form-field-name\",defaultValue:setRole(details.role),options:categories,onChange:function onChange(e){setformData(_objectSpread(_objectSpread({},formData),{},{role:e.value}));}})))),/*#__PURE__*/React.createElement(ModalFooter,null,/*#__PURE__*/React.createElement(Button,{onClick:function onClick(){return edit(details.id);},color:\"primary\"},\"Save Changes\"),' ',/*#__PURE__*/React.createElement(Button,{color:\"secondary\",onClick:function onClick(){return setModal(false);}},\"Cancel\"))),/*#__PURE__*/React.createElement(Modal,{isOpen:modalBasic,toggle:function toggle(){return setModal(!modalBasic);}},/*#__PURE__*/React.createElement(ModalHeader,null,/*#__PURE__*/React.createElement(IntlMessages,{id:\"Delete\"})),/*#__PURE__*/React.createElement(ModalBody,null,\"Are you sure you want to delete user?\"),/*#__PURE__*/React.createElement(ModalFooter,null,/*#__PURE__*/React.createElement(Button,{onClick:deleteUser,color:\"primary\"},\"Confirm\"),' ',/*#__PURE__*/React.createElement(Button,{color:\"secondary\",onClick:function onClick(){return setModalBasic(false);}},\"Cancel\"))));};/* React.memo detail : https://reactjs.org/docs/react-api.html#reactpurecomponent  */export default React.memo(DataListView);","map":null,"metadata":{},"sourceType":"module"}