{"ast":null,"code":"import _objectSpread from\"/home/browsewire/Desktop/CEI/cei/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/browsewire/Desktop/CEI/cei/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{Row,Card,CardTitle,Label,FormGroup,Button}from'reactstrap';import{NavLink}from'react-router-dom';import{Formik,Form,Field}from'formik';import{connect}from'react-redux';import{Colxx}from'../../components/common/CustomBootstrap';import IntlMessages from'../../helpers/IntlMessages';import{resetPassword}from'../../redux/actions';import{NotificationManager}from'../../components/common/react-notifications';import axios from\"axios\";var validateNewPassword=function validateNewPassword(values){var newPassword=values.newPassword,newPasswordAgain=values.newPasswordAgain;var errors={};if(newPasswordAgain&&newPassword!==newPasswordAgain){errors.newPasswordAgain='Please check your new password';}return errors;};var ResetPassword=function ResetPassword(_ref){var location=_ref.location,history=_ref.history,loading=_ref.loading,error=_ref.error,resetPasswordAction=_ref.resetPasswordAction;var _useState=useState({}),_useState2=_slicedToArray(_useState,2),formData=_useState2[0],setformData=_useState2[1];var userEmail=function userEmail(){var email=localStorage.getItem(\"userEmail\");return email;};console.log(userEmail());useEffect(function(){if(userEmail()){console.log(\"hi\");}else{window.location.href=\"/user/login\";}});// CHANGE PASSWORD REQUEST\nvar changePassword=function changePassword(e){// WHILE EXPIRATION TIME IS GREATER THAN CURRENT TIME\nif(formData.password==formData.ConfirmPassword){axios.post(\"/api/change-password\",formData).then(function(res){console.log(res.data);if(res.data.success){NotificationManager.success(res.data.success,'Success',3000,null,null,'');setformData({});localStorage.removeItem(\"userEmail\");}else if(res.data.error){NotificationManager.warning(res.data.error,'Error',3000,null,null,'');}});}// IF PASSWORD AND CONFIRM PASSWORD DO NOT MATCH\nelse{NotificationManager.warning(\"Password do not match\",'Error',3000,null,null,'');}// }\n// else {\n//   NotificationManager.warning(\"OTP expired\", 'OTP Error', 3000, null, null, '');\n// }\n};// useEffect(() => {\n//   if (error) {\n//     NotificationManager.warning(\n//       error,\n//       'Forgot Password Error',\n//       3000,\n//       null,\n//       null,\n//       ''\n//     );\n//   } else if (!loading && newPassword === 'success')\n//     NotificationManager.success(\n//       'Please login with your new password.',\n//       'Reset Password Success',\n//       3000,\n//       null,\n//       null,\n//       ''\n//     );\n// }, [error, loading, newPassword]);\n// const onResetPassword = (values) => {\n//   if (!loading) {\n//     const params = new URLSearchParams(location.search);\n//     const oobCode = params.get('oobCode');\n//     if (oobCode) {\n//       if (values.newPassword !== '') {\n//         resetPasswordAction({\n//           newPassword: values.newPassword,\n//           resetPasswordCode: oobCode,\n//           history,\n//         });\n//       }\n//     } else {\n//       NotificationManager.warning(\n//         'Please check your email url.',\n//         'Reset Password Error',\n//         3000,\n//         null,\n//         null,\n//         ''\n//       );\n//     }\n//   }\n// };\nreturn/*#__PURE__*/React.createElement(Row,{className:\"h-100\"},/*#__PURE__*/React.createElement(Colxx,{xxs:\"12\",md:\"10\",className:\"mx-auto my-auto\"},/*#__PURE__*/React.createElement(Card,{className:\"auth-card\"},/*#__PURE__*/React.createElement(\"div\",{className:\"position-relative image-side \"},/*#__PURE__*/React.createElement(\"p\",{className:\"text-white h2\"},\"MAGIC IS IN THE DETAILS\"),/*#__PURE__*/React.createElement(\"p\",{className:\"white mb-0\"},\"Please use your e-mail to reset your password. \",/*#__PURE__*/React.createElement(\"br\",null),\"If you are not a member, please\",' ',/*#__PURE__*/React.createElement(NavLink,{to:\"/register\",className:\"white\"},\"register\"),\".\")),/*#__PURE__*/React.createElement(\"div\",{className:\"form-side\"},/*#__PURE__*/React.createElement(NavLink,{to:\"/\",className:\"white\"},/*#__PURE__*/React.createElement(\"span\",{className:\"logo-single\"})),/*#__PURE__*/React.createElement(CardTitle,{className:\"mb-4\"},/*#__PURE__*/React.createElement(IntlMessages,{id:\"user.reset-password\"})),/*#__PURE__*/React.createElement(Formik,null,/*#__PURE__*/React.createElement(Form,{className:\"av-tooltip tooltip-label-bottom\"},/*#__PURE__*/React.createElement(FormGroup,{className:\"form-group has-float-label\"},/*#__PURE__*/React.createElement(Label,null,/*#__PURE__*/React.createElement(IntlMessages,{id:\"user.new-password\"})),/*#__PURE__*/React.createElement(Field,{onChange:function onChange(e){setformData(_objectSpread(_objectSpread({},formData),{},{password:e.target.value,email:userEmail()}));},className:\"form-control\",name:\"newPassword\",type:\"password\"})),/*#__PURE__*/React.createElement(FormGroup,{className:\"form-group has-float-label\"},/*#__PURE__*/React.createElement(Label,null,/*#__PURE__*/React.createElement(IntlMessages,{id:\"user.new-password-again\"})),/*#__PURE__*/React.createElement(Field,{className:\"form-control\",name:\"newPasswordAgain\",type:\"password\",onChange:function onChange(e){setformData(_objectSpread(_objectSpread({},formData),{},{ConfirmPassword:e.target.value}));}})),/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex justify-content-between align-items-center\"},/*#__PURE__*/React.createElement(NavLink,{to:\"/user/login\"},/*#__PURE__*/React.createElement(IntlMessages,{id:\"user.login-title\"})),/*#__PURE__*/React.createElement(Button,{onClick:changePassword,color:\"primary\",className:\"btn-shadow btn-multiple-state \".concat(loading?'show-spinner':''),size:\"lg\"},/*#__PURE__*/React.createElement(\"span\",{className:\"spinner d-inline-block\"},/*#__PURE__*/React.createElement(\"span\",{className:\"bounce1\"}),/*#__PURE__*/React.createElement(\"span\",{className:\"bounce2\"}),/*#__PURE__*/React.createElement(\"span\",{className:\"bounce3\"})),/*#__PURE__*/React.createElement(\"span\",{className:\"label\"},/*#__PURE__*/React.createElement(IntlMessages,{id:\"user.reset-password-button\"}))))))))));};var mapStateToProps=function mapStateToProps(_ref2){var authUser=_ref2.authUser;var newPassword=authUser.newPassword,resetPasswordCode=authUser.resetPasswordCode,loading=authUser.loading,error=authUser.error;return{newPassword:newPassword,resetPasswordCode:resetPasswordCode,loading:loading,error:error};};export default connect(mapStateToProps,{resetPasswordAction:resetPassword})(ResetPassword);","map":null,"metadata":{},"sourceType":"module"}