{"ast":null,"code":"import _objectSpread from \"/home/browsewire/Desktop/CEI/cei/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _createForOfIteratorHelper from \"/home/browsewire/Desktop/CEI/cei/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper\";\nimport _regeneratorRuntime from \"/home/browsewire/Desktop/CEI/cei/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/browsewire/Desktop/CEI/cei/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/home/browsewire/Desktop/CEI/cei/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/home/browsewire/Desktop/CEI/cei/client/src/views/app/inventory/Categories/add-new-category.js\";\n\nimport React, { useState, useEffect } from 'react';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter, Input, Label, Row, Col } from 'reactstrap';\nimport Select from 'react-select';\nimport IntlMessages from '../../../../helpers/IntlMessages';\nimport axios from 'axios';\nimport CustomSelectInput from '../../../../components/common/CustomSelectInput';\nimport { NotificationManager } from '../../../../components/common/react-notifications';\nvar styles = {\n  profileImg: {\n    height: '3rem',\n    width: '3rem',\n    borderRadius: '50%'\n  }\n};\nvar statusOptions = [{\n  label: 'Active',\n  value: 'Active',\n  key: 0\n}, {\n  label: 'Inactive',\n  value: 'Inactive',\n  key: 1\n}];\n\nvar AddNewCategoryModal = function AddNewCategoryModal(_ref) {\n  var modalOpen = _ref.modalOpen,\n      toggleModal = _ref.toggleModal,\n      categories = _ref.categories,\n      change = _ref.change,\n      setchange = _ref.setchange;\n\n  var _React$useState = React.useState({}),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      formData = _React$useState2[0],\n      setformData = _React$useState2[1];\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      parentcategories = _useState2[0],\n      setParentcategories = _useState2[1];\n\n  var _useState3 = useState(null),\n      _useState4 = _slicedToArray(_useState3, 2),\n      categoryImage = _useState4[0],\n      setCategoryImage = _useState4[1];\n\n  var _useState5 = useState(null),\n      _useState6 = _slicedToArray(_useState5, 2),\n      categoryImagedata = _useState6[0],\n      setCategoryImagedata = _useState6[1];\n\n  var baseimageurl = 'https://cdn.linqusacorp.com';\n\n  var createCategory = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(e) {\n      var form, _yield$axios$post, data;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              e.preventDefault();\n\n              if (formData.name) {\n                _context.next = 3;\n                break;\n              }\n\n              return _context.abrupt(\"return\", NotificationManager.warning('Name is Mandatory', 'Warning', 3000));\n\n            case 3:\n              if (!categoryImagedata) {\n                _context.next = 25;\n                break;\n              }\n\n              form = new FormData();\n              form.append('categoryimg', categoryImagedata);\n              form.append('name', formData.name);\n              form.append('parentId', formData.parentId);\n              form.append('status', formData.status);\n              _context.prev = 9;\n              _context.next = 12;\n              return axios.post('/api/inventory/add-Category', form);\n\n            case 12:\n              _yield$axios$post = _context.sent;\n              data = _yield$axios$post.data;\n              console.log(data);\n              setchange(!change);\n              NotificationManager.success('Category Created', 'Success', 3000, null, null, '');\n              toggleModal();\n              setformData({});\n              _context.next = 25;\n              break;\n\n            case 21:\n              _context.prev = 21;\n              _context.t0 = _context[\"catch\"](9);\n              console.log(_context.t0);\n              NotificationManager.error('Something Went Wrong!', 'Error', 3000, null, null, '');\n\n            case 25:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[9, 21]]);\n    }));\n\n    return function createCategory(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }(); // Create new Category\n\n\n  var CreateNewCategory = function CreateNewCategory(e) {\n    e.preventDefault();\n\n    if (categoryImagedata) {\n      var imgform = new FormData();\n      imgform.append('categoryimg', categoryImagedata);\n      axios.post('https://cdn.linqusacorp.com/categoryimage', imgform).then(function (data) {\n        //axios.post(\"http://localhost:3001/categoryimage\",imgform).then(data => {\n        if (data.data.success) {\n          var path = \"\".concat(baseimageurl, \"/category/\").concat(data.data.data.filename);\n          var fordata = {\n            status: formData.status,\n            name: formData.name,\n            parentId: formData.parentId,\n            categoryimg: path\n          };\n\n          if (formData.status && formData.name) {\n            console.log('database call');\n            axios.post('/api/inventory/add-Category', fordata).then(function (res) {\n              if (res.data.success) {\n                toggleModal();\n                setchange(!change);\n                NotificationManager.success(res.data.success, 'Success', 3000, null, null, '');\n                setformData({});\n              }\n            });\n          }\n        }\n      });\n    } else if (formData.status && formData.name && formData.parentId) {\n      axios.post('/api/inventory/add-Category', formData).then(function (res) {\n        if (res.data.success) {\n          toggleModal();\n          setchange(!change);\n          NotificationManager.success(res.data.success, 'Success', 3000, null, null, '');\n          setformData({});\n        }\n      });\n    }\n  };\n\n  var onChangePicture = function onChangePicture(e) {\n    if (e.target.files[0]) {\n      var reader = new FileReader();\n      reader.addEventListener('load', function () {\n        setCategoryImage(reader.result);\n      });\n      reader.readAsDataURL(e.target.files[0]);\n      setCategoryImagedata(e.target.files[0]);\n    }\n  };\n\n  useEffect(function () {\n    axios.get('/api/inventory/get-category').then(function (res) {\n      console.log(res.data.data);\n      var categoryList = [];\n      var singleCategory;\n\n      var _iterator = _createForOfIteratorHelper(res.data.data),\n          _step;\n\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var i = _step.value;\n\n          if (i.status) {\n            singleCategory = {\n              label: i.category,\n              value: i.category,\n              key: i.id\n            };\n            categoryList.push(singleCategory);\n          }\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n\n      setParentcategories(categoryList);\n    });\n  }, []);\n  return /*#__PURE__*/React.createElement(Modal, {\n    isOpen: modalOpen,\n    toggle: toggleModal,\n    wrapClassName: \"modal-right\",\n    backdrop: \"static\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(ModalHeader, {\n    toggle: toggleModal,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(IntlMessages, {\n    id: \"Add New Category\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(ModalBody, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mt-3\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Label, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(IntlMessages, {\n    id: \"Category Name\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(Input, {\n    onChange: function onChange(e) {\n      setformData(_objectSpread(_objectSpread({}, formData), {}, {\n        name: e.target.value\n      }));\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mt-3\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Label, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(IntlMessages, {\n    id: \"Parent Category\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(Select, {\n    components: {\n      Input: CustomSelectInput\n    },\n    className: \"react-select\",\n    classNamePrefix: \"react-select\",\n    name: \"form-field-name\",\n    options: parentcategories,\n    onChange: function onChange(e) {\n      setformData(_objectSpread(_objectSpread({}, formData), {}, {\n        parentId: e.key\n      }));\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(Row, {\n    className: \"mt-3\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    className: \"sm-6\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 217,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Label, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(IntlMessages, {\n    id: \"Status\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(Select, {\n    components: {\n      Input: CustomSelectInput\n    },\n    className: \"react-select\",\n    classNamePrefix: \"react-select\",\n    name: \"form-field-name\",\n    options: statusOptions,\n    onChange: function onChange(e) {\n      setformData(_objectSpread(_objectSpread({}, formData), {}, {\n        status: e.value\n      }));\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 222,\n      columnNumber: 13\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"d-flex align-items-center justify-content-center flex-column p-3\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 9\n    }\n  }, categoryImage ? /*#__PURE__*/React.createElement(\"img\", {\n    style: styles.profileImg,\n    src: categoryImage,\n    alt: \"\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 236,\n      columnNumber: 13\n    }\n  }) : /*#__PURE__*/React.createElement(\"img\", {\n    src: \"https://icon-library.com/images/category-icon/category-icon-29.jpg\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 238,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(Label, {\n    className: \"font-weight-bold edit-profile mt-2\",\n    htmlFor: \"imageNameItem\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 240,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(IntlMessages, {\n    id: \"Change Picture\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 244,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(Input, {\n    accept: \"image/*\",\n    onChange: onChangePicture,\n    style: {\n      display: 'none'\n    },\n    type: \"file\",\n    name: \"imageNameItem\",\n    id: \"imageNameItem\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 246,\n      columnNumber: 11\n    }\n  }))), /*#__PURE__*/React.createElement(ModalFooter, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 295,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    color: \"secondary\",\n    outline: true,\n    onClick: toggleModal,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 296,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(IntlMessages, {\n    id: \"pages.cancel\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 297,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(Button, {\n    onClick: createCategory,\n    color: \"primary\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 299,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(IntlMessages, {\n    id: \"Create Category\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 300,\n      columnNumber: 11\n    }\n  }))));\n};\n\nexport default AddNewCategoryModal;","map":{"version":3,"sources":["/home/browsewire/Desktop/CEI/cei/client/src/views/app/inventory/Categories/add-new-category.js"],"names":["React","useState","useEffect","Button","Modal","ModalHeader","ModalBody","ModalFooter","Input","Label","Row","Col","Select","IntlMessages","axios","CustomSelectInput","NotificationManager","styles","profileImg","height","width","borderRadius","statusOptions","label","value","key","AddNewCategoryModal","modalOpen","toggleModal","categories","change","setchange","formData","setformData","parentcategories","setParentcategories","categoryImage","setCategoryImage","categoryImagedata","setCategoryImagedata","baseimageurl","createCategory","e","preventDefault","name","warning","form","FormData","append","parentId","status","post","data","console","log","success","error","CreateNewCategory","imgform","then","path","filename","fordata","categoryimg","res","onChangePicture","target","files","reader","FileReader","addEventListener","result","readAsDataURL","get","categoryList","singleCategory","i","category","id","push","display"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport {\n  Button,\n  Modal,\n  ModalHeader,\n  ModalBody,\n  ModalFooter,\n  Input,\n  Label,\n  Row,\n  Col,\n} from 'reactstrap';\nimport Select from 'react-select';\nimport IntlMessages from '../../../../helpers/IntlMessages';\nimport axios from 'axios';\nimport CustomSelectInput from '../../../../components/common/CustomSelectInput';\nimport { NotificationManager } from '../../../../components/common/react-notifications';\n\nconst styles = {\n  profileImg: {\n    height: '3rem',\n    width: '3rem',\n    borderRadius: '50%',\n  },\n};\n\nconst statusOptions = [\n  { label: 'Active', value: 'Active', key: 0 },\n  { label: 'Inactive', value: 'Inactive', key: 1 },\n];\nconst AddNewCategoryModal = ({\n  modalOpen,\n  toggleModal,\n  categories,\n  change,\n  setchange,\n}) => {\n  const [formData, setformData] = React.useState({});\n  const [parentcategories, setParentcategories] = useState([]);\n  const [categoryImage, setCategoryImage] = useState(null);\n  const [categoryImagedata, setCategoryImagedata] = useState(null);\n  const baseimageurl = 'https://cdn.linqusacorp.com';\n\n  const createCategory = async (e) => {\n    e.preventDefault();\n    if (!formData.name) {\n      return NotificationManager.warning('Name is Mandatory', 'Warning', 3000);\n    }\n    if (categoryImagedata) {\n      let form = new FormData();\n      form.append('categoryimg', categoryImagedata);\n      form.append('name', formData.name);\n      form.append('parentId', formData.parentId);\n      form.append('status', formData.status);\n      try {\n        const { data } = await axios.post('/api/inventory/add-Category', form);\n        console.log(data);\n        setchange(!change);\n        NotificationManager.success(\n          'Category Created',\n          'Success',\n          3000,\n          null,\n          null,\n          ''\n        );\n        toggleModal();\n        setformData({});\n      } catch (error) {\n        console.log(error);\n        NotificationManager.error(\n          'Something Went Wrong!',\n          'Error',\n          3000,\n          null,\n          null,\n          ''\n        );\n      }\n    }\n  };\n\n  // Create new Category\n\n  const CreateNewCategory = (e) => {\n    e.preventDefault();\n    if (categoryImagedata) {\n      let imgform = new FormData();\n      imgform.append('categoryimg', categoryImagedata);\n      axios\n        .post('https://cdn.linqusacorp.com/categoryimage', imgform)\n        .then((data) => {\n          //axios.post(\"http://localhost:3001/categoryimage\",imgform).then(data => {\n          if (data.data.success) {\n            let path = `${baseimageurl}/category/${data.data.data.filename}`;\n            let fordata = {\n              status: formData.status,\n              name: formData.name,\n              parentId: formData.parentId,\n              categoryimg: path,\n            };\n            if (formData.status && formData.name) {\n              console.log('database call');\n              axios.post('/api/inventory/add-Category', fordata).then((res) => {\n                if (res.data.success) {\n                  toggleModal();\n                  setchange(!change);\n                  NotificationManager.success(\n                    res.data.success,\n                    'Success',\n                    3000,\n                    null,\n                    null,\n                    ''\n                  );\n                  setformData({});\n                }\n              });\n            }\n          }\n        });\n    } else if (formData.status && formData.name && formData.parentId) {\n      axios.post('/api/inventory/add-Category', formData).then((res) => {\n        if (res.data.success) {\n          toggleModal();\n          setchange(!change);\n          NotificationManager.success(\n            res.data.success,\n            'Success',\n            3000,\n            null,\n            null,\n            ''\n          );\n          setformData({});\n        }\n      });\n    }\n  };\n\n  const onChangePicture = (e) => {\n    if (e.target.files[0]) {\n      const reader = new FileReader();\n      reader.addEventListener('load', () => {\n        setCategoryImage(reader.result);\n      });\n      reader.readAsDataURL(e.target.files[0]);\n      setCategoryImagedata(e.target.files[0]);\n    }\n  };\n\n  useEffect(() => {\n    axios.get('/api/inventory/get-category').then((res) => {\n      console.log(res.data.data);\n      var categoryList = [];\n      var singleCategory;\n      for (var i of res.data.data) {\n        if (i.status) {\n          singleCategory = {\n            label: i.category,\n            value: i.category,\n            key: i.id,\n          };\n          categoryList.push(singleCategory);\n        }\n      }\n      setParentcategories(categoryList);\n    });\n  }, []);\n\n  return (\n    <Modal\n      isOpen={modalOpen}\n      toggle={toggleModal}\n      wrapClassName=\"modal-right\"\n      backdrop=\"static\"\n    >\n      <ModalHeader toggle={toggleModal}>\n        <IntlMessages id=\"Add New Category\" />\n      </ModalHeader>\n      <ModalBody>\n        <div className=\"mt-3\">\n          <Label>\n            <IntlMessages id=\"Category Name\" />\n          </Label>\n          <Input\n            onChange={(e) => {\n              setformData({ ...formData, name: e.target.value });\n            }}\n          />\n        </div>\n        <div className=\"mt-3\">\n          <Label>\n            <IntlMessages id=\"Parent Category\" />\n          </Label>\n\n          <Select\n            components={{ Input: CustomSelectInput }}\n            className=\"react-select\"\n            classNamePrefix=\"react-select\"\n            name=\"form-field-name\"\n            options={parentcategories}\n            onChange={(e) => {\n              setformData({ ...formData, parentId: e.key });\n            }}\n          />\n        </div>\n        <Row className=\"mt-3\">\n          {/* <Col className=\"sm-6\">\n            <Label>\n            <IntlMessages id=\"Slug\" />\n            </Label>\n            <Input onChange={(e) => {\n                    setformData({ ...formData, slug: e.target.value })\n                }}/>\n            </Col> */}\n          <Col className=\"sm-6\">\n            <Label>\n              <IntlMessages id=\"Status\" />\n            </Label>\n\n            <Select\n              components={{ Input: CustomSelectInput }}\n              className=\"react-select\"\n              classNamePrefix=\"react-select\"\n              name=\"form-field-name\"\n              options={statusOptions}\n              onChange={(e) => {\n                setformData({ ...formData, status: e.value });\n              }}\n            />\n          </Col>\n        </Row>\n        <div className=\"d-flex align-items-center justify-content-center flex-column p-3\">\n          {categoryImage ? (\n            <img style={styles.profileImg} src={categoryImage} alt=\"\" />\n          ) : (\n            <img src=\"https://icon-library.com/images/category-icon/category-icon-29.jpg\" />\n          )}\n          <Label\n            className=\"font-weight-bold edit-profile mt-2\"\n            htmlFor=\"imageNameItem\"\n          >\n            <IntlMessages id=\"Change Picture\" />\n          </Label>\n          <Input\n            accept=\"image/*\"\n            onChange={onChangePicture}\n            style={{ display: 'none' }}\n            type=\"file\"\n            name=\"imageNameItem\"\n            id=\"imageNameItem\"\n          />\n        </div>\n        {/* <div className=\"mt-3\">\n        <Colxx\n                    sm=\"4\"\n                    xxs=\"4\"\n                    md=\"4\"\n                    lg=\"4\"\n                    xl=\"4\"\n                    className=\"text-center\"\n                >\n                <h5 className=\"mb-3 h6\">Product Image</h5>\n                {categoryImage ? (\n                <img style={{height:'8rem',width: '8rem'}} src={categoryImage} alt=\"\" />\n                ) : (\n                    // <img\n                    //     style={styles.productImage}\n                    //     src={productData.imageNameItem ? \n                    //     `http://cdn.linqusacorp.com/productimages/${productData.imageNameItem}` : \n                    //     defaultImage}\n                    //     alt=\"Not Found\"\n                    // />\n                    null\n                )}\n                <br />\n                <Label\n                className=\"font-weight-bold edit-profile my-3 text-primary text-small\"\n                for=\"imageNameItem\"\n                >\n                <IntlMessages id=\"Change Image\" />\n                </Label>\n                <Input\n                    accept='image/*'\n                    onChange={onChangePicture}\n                    style={{ display: 'none' }}\n                    type=\"file\"\n                    name=\"imageNameItem\"\n                    id=\"imageNameItem\"\n                />\n            </Colxx>\n        </div> */}\n      </ModalBody>\n      <ModalFooter>\n        <Button color=\"secondary\" outline onClick={toggleModal}>\n          <IntlMessages id=\"pages.cancel\" />\n        </Button>\n        <Button onClick={createCategory} color=\"primary\">\n          <IntlMessages id=\"Create Category\" />\n        </Button>\n      </ModalFooter>\n    </Modal>\n  );\n};\n\nexport default AddNewCategoryModal;\n"]},"metadata":{},"sourceType":"module"}