{"ast":null,"code":"import _objectSpread from\"/home/browsewire/Desktop/CEI/cei/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"/home/browsewire/Desktop/CEI/cei/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/browsewire/Desktop/CEI/cei/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/home/browsewire/Desktop/CEI/cei/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/home/browsewire/Desktop/CEI/cei/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/browsewire/Desktop/CEI/cei/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import Glide from'@glidejs/glide';import{getDirection}from'../../helpers/Utils';import'@glidejs/glide/dist/css/glide.core.min.css';import'@glidejs/glide/dist/css/glide.theme.min.css';var resizeTimeOut=-1;var mountTimeOut=-1;var GlideComponentThumbs=/*#__PURE__*/function(_React$Component){_inherits(GlideComponentThumbs,_React$Component);var _super=_createSuper(GlideComponentThumbs);function GlideComponentThumbs(props){var _this;_classCallCheck(this,GlideComponentThumbs);_this=_super.call(this,props);_this.onResize=_this.onResize.bind(_assertThisInitialized(_this));_this.thumbsResize=_this.thumbsResize.bind(_assertThisInitialized(_this));_this.onThumbClick=_this.onThumbClick.bind(_assertThisInitialized(_this));_this.imagesSwipeEnd=_this.imagesSwipeEnd.bind(_assertThisInitialized(_this));_this.renderDots=_this.renderDots.bind(_assertThisInitialized(_this));_this.updateThumbBreakpoints=_this.updateThumbBreakpoints.bind(_assertThisInitialized(_this));_this.state={total:_this.props.settingsImages.data.length,activeIndex:0,thumbsPerView:Math.min(_this.props.settingsThumbs.perView,_this.props.settingsImages.data.length),renderArrows:true};_this.updateThumbBreakpoints();return _this;}_createClass(GlideComponentThumbs,[{key:\"updateThumbBreakpoints\",value:function updateThumbBreakpoints(){var thumbBreakpoints=this.props.settingsThumbs.breakpoints;var newBreakpoints={};for(var prop in thumbBreakpoints){newBreakpoints[prop]={perView:Math.min(thumbBreakpoints[prop].perView,this.state.total)};}this.props.settingsThumbs.breakpoints=newBreakpoints;}},{key:\"onThumbClick\",value:function onThumbClick(index){this.setState({activeIndex:index});this.glideCarouselImages.go(\"=\".concat(index));}},{key:\"thumbsResize\",value:function thumbsResize(){var perView=Math.min(this.props.settingsThumbs.perView,this.props.settingsImages.data.length);this.setState({thumbsPerView:perView});if(this.state.total<=perView){this.setState({renderArrows:false});}}},{key:\"imagesSwipeEnd\",value:function imagesSwipeEnd(){var gap=this.glideCarouselThumbs.index+this.state.thumbsPerView;this.setState({activeIndex:this.glideCarouselImages.index});if(this.state.activeIndex>=gap){this.glideCarouselThumbs.go('>');}if(this.state.activeIndex<this.glideCarouselThumbs.index){this.glideCarouselThumbs.go('<');}}},{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;this.glideCarouselImages=new Glide(this.carouselImages,_objectSpread(_objectSpread({},this.props.settingsImages),{},{direction:getDirection().direction}));this.glideCarouselImages.mount();this.glideCarouselThumbs=new Glide(this.carouselThumbs,_objectSpread(_objectSpread({},this.props.settingsThumbs),{},{direction:getDirection().direction}));this.glideCarouselThumbs.mount();this.glideCarouselThumbs.on('resize',this.thumbsResize);this.glideCarouselImages.on('swipe.end',this.imagesSwipeEnd);mountTimeOut=setTimeout(function(){var event=document.createEvent('HTMLEvents');event.initEvent('resize',false,false);window.dispatchEvent(event);_this2.glideCarouselImages.on('resize',_this2.onResize);},500);}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){clearTimeout(resizeTimeOut);clearTimeout(mountTimeOut);this.glideCarouselImages.destroy();this.glideCarouselThumbs.destroy();}},{key:\"onResize\",value:function onResize(){var _this3=this;clearTimeout(resizeTimeOut);resizeTimeOut=setTimeout(function(){_this3.glideCarouselImages.update();_this3.glideCarouselThumbs.update();resizeTimeOut=-1;},500);}},{key:\"renderDots\",value:function renderDots(){var dots=[];for(var i=0;i<this.state.total;i++){dots.push(/*#__PURE__*/React.createElement(\"button\",{className:\"glide__bullet slider-dot\",key:i,\"data-glide-dir\":\"=\".concat(i)}));}return dots;}},{key:\"render\",value:function render(){var _this4=this;return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"glide details\",ref:function ref(node){return _this4.carouselImages=node;}},/*#__PURE__*/React.createElement(\"div\",{\"data-glide-el\":\"track\",className:\"glide__track\"},/*#__PURE__*/React.createElement(\"div\",{className:\"glide__slides\"},this.props.settingsImages.data.map(function(item){return/*#__PURE__*/React.createElement(\"div\",{key:item.id},/*#__PURE__*/React.createElement(\"div\",{className:\"glide__slide\"},/*#__PURE__*/React.createElement(\"img\",{src:item.img,onError:function onError(e){e.target.onerror=null;e.target.src=\"https://d3o5w1w6u67fah.cloudfront.net/productimages/\"+_this4.props.settingsImages.brand.imageNameBrandLogo+\"\";},className:\"responsive border-0 border-radius img-fluid mb-3\"})));})))),/*#__PURE__*/React.createElement(\"div\",{className:\"glide thumbs\",ref:function ref(node){return _this4.carouselThumbs=node;}},/*#__PURE__*/React.createElement(\"div\",{\"data-glide-el\":\"track\",className:\"glide__track\"},/*#__PURE__*/React.createElement(\"div\",{className:\"glide__slides\"},this.props.settingsThumbs.data.map(function(item,index){return/*#__PURE__*/React.createElement(\"div\",{className:index===_this4.state.activeIndex?'glide__slide active':'glide__slide',key:item.id,onClick:function onClick(){_this4.onThumbClick(index);}},/*#__PURE__*/React.createElement(\"img\",{alt:\"detail\",src:item.img,onError:function onError(e){e.target.onerror=null;e.target.src=\"https://d3o5w1w6u67fah.cloudfront.net/productimages/\"+_this4.props.settingsImages.brand.imageNameBrandLogo+\"\";},className:\"responsive border-0 border-radius img-fluid\"}));}))),this.state.renderArrows&&/*#__PURE__*/React.createElement(\"div\",{className:\"glide__arrows\",\"data-glide-el\":\"controls\"},/*#__PURE__*/React.createElement(\"button\",{className:\"glide__arrow glide__arrow--left\",\"data-glide-dir\":\"<\"},/*#__PURE__*/React.createElement(\"i\",{className:\"simple-icon-arrow-left\"})),/*#__PURE__*/React.createElement(\"button\",{className:\"glide__arrow glide__arrow--right\",\"data-glide-dir\":\">\"},/*#__PURE__*/React.createElement(\"i\",{className:\"simple-icon-arrow-right\"})))));}}]);return GlideComponentThumbs;}(React.Component);GlideComponentThumbs.defaultProps={settingsImages:{},settingsThumbs:{}};export default GlideComponentThumbs;","map":null,"metadata":{},"sourceType":"module"}