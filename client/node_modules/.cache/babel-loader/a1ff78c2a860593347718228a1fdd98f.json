{"ast":null,"code":"import _toConsumableArray from\"/home/browsewire/Desktop/CEI/cei/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/home/browsewire/Desktop/CEI/cei/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";/* eslint-disable no-param-reassign */import React,{createRef,useState}from'react';import{Card,CardBody,FormGroup,Label,Spinner}from'reactstrap';import{Wizard,Steps,Step}from'react-albus';import{injectIntl}from'react-intl';import{Formik,Form,Field}from'formik';import IntlMessages from'../../helpers/IntlMessages';import BottomNavigation from'../../components/wizard/BottomNavigation';import TopNavigation from'../../components/wizard/TopNavigation';var validateEmail=function validateEmail(value){var error;if(!value){error='Please enter your email address';}else if(!/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,4}$/i.test(value)){error='Invalid email address';}return error;};var validateName=function validateName(value){var error;if(!value){error='Please enter your name';}else if(value.length<2){error='Value must be longer than 2 characters';}return error;};var validatePassword=function validatePassword(value){var error;if(!value){error='Please enter your password';}else if(value.length<6){error='Password must be longer than 6 characters';}return error;};var Validation=function Validation(_ref){var intl=_ref.intl;var forms=[createRef(null),createRef(null),createRef(null)];var _useState=useState(false),_useState2=_slicedToArray(_useState,2),bottomNavHidden=_useState2[0],setBottomNavHidden=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];var _useState5=useState([{valid:false,name:'name',value:''},{valid:false,name:'email',value:''},{valid:false,name:'password',value:''}]),_useState6=_slicedToArray(_useState5,2),fields=_useState6[0],setFields=_useState6[1];var asyncLoading=function asyncLoading(){setLoading(true);setTimeout(function(){setLoading(false);},3000);};var onClickNext=function onClickNext(goToNext,steps,step){if(steps.length-1<=steps.indexOf(step)){return;}var formIndex=steps.indexOf(step);var form=forms[formIndex].current;var name=fields[formIndex].name;form.submitForm().then(function(){var newFields=_toConsumableArray(fields);newFields[formIndex].value=form.values[name];newFields[formIndex].valid=!form.errors[name];setFields(newFields);if(!form.errors[name]&&form.touched[name]){goToNext();step.isDone=true;if(steps.length-2<=steps.indexOf(step)){setBottomNavHidden(true);asyncLoading();}}});};var onClickPrev=function onClickPrev(goToPrev,steps,step){if(steps.indexOf(step)<=0){return;}goToPrev();};var messages=intl.messages;return/*#__PURE__*/React.createElement(Card,null,/*#__PURE__*/React.createElement(CardBody,{className:\"wizard wizard-default\"},/*#__PURE__*/React.createElement(Wizard,null,/*#__PURE__*/React.createElement(TopNavigation,{className:\"justify-content-center\",disableNav:true}),/*#__PURE__*/React.createElement(Steps,null,/*#__PURE__*/React.createElement(Step,{id:\"step1\",name:messages['wizard.step-name-1'],desc:messages['wizard.step-desc-1']},/*#__PURE__*/React.createElement(\"div\",{className:\"wizard-basic-step\"},/*#__PURE__*/React.createElement(Formik,{innerRef:forms[0],initialValues:{name:fields[0].value},onSubmit:function onSubmit(){}},function(_ref2){var errors=_ref2.errors,touched=_ref2.touched;return/*#__PURE__*/React.createElement(Form,{className:\"av-tooltip tooltip-label-right\"},/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(Label,null,messages['forms.name']),/*#__PURE__*/React.createElement(Field,{className:\"form-control\",name:\"name\",validate:validateName}),errors.name&&touched.name&&/*#__PURE__*/React.createElement(\"div\",{className:\"invalid-feedback d-block\"},errors.name)));}))),/*#__PURE__*/React.createElement(Step,{id:\"step2\",name:messages['wizard.step-name-2'],desc:messages['wizard.step-desc-2']},/*#__PURE__*/React.createElement(\"div\",{className:\"wizard-basic-step\"},/*#__PURE__*/React.createElement(Formik,{innerRef:forms[1],initialValues:{email:fields[1].value},onSubmit:function onSubmit(){}},function(_ref3){var errors=_ref3.errors,touched=_ref3.touched;return/*#__PURE__*/React.createElement(Form,{className:\"av-tooltip tooltip-label-right\"},/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(Label,null,messages['forms.email']),/*#__PURE__*/React.createElement(Field,{className:\"form-control\",name:\"email\",validate:validateEmail}),errors.email&&touched.email&&/*#__PURE__*/React.createElement(\"div\",{className:\"invalid-feedback d-block\"},errors.email)));}))),/*#__PURE__*/React.createElement(Step,{id:\"step3\",name:messages['wizard.step-name-3'],desc:messages['wizard.step-desc-3']},/*#__PURE__*/React.createElement(\"div\",{className:\"wizard-basic-step\"},/*#__PURE__*/React.createElement(Formik,{innerRef:forms[2],initialValues:{password:fields[2].value},onSubmit:function onSubmit(){}},function(_ref4){var errors=_ref4.errors,touched=_ref4.touched;return/*#__PURE__*/React.createElement(Form,{className:\"av-tooltip tooltip-label-right error-l-75\"},/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(Label,null,messages['forms.password']),/*#__PURE__*/React.createElement(Field,{className:\"form-control\",name:\"password\",type:\"password\",validate:validatePassword}),errors.password&&touched.password&&/*#__PURE__*/React.createElement(\"div\",{className:\"invalid-feedback d-block\"},errors.password)));}))),/*#__PURE__*/React.createElement(Step,{id:\"step4\",hideTopNav:true},/*#__PURE__*/React.createElement(\"div\",{className:\"wizard-basic-step text-center pt-3\"},loading?/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Spinner,{color:\"primary\",className:\"mb-1\"}),/*#__PURE__*/React.createElement(\"p\",null,/*#__PURE__*/React.createElement(IntlMessages,{id:\"wizard.async\"}))):/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h2\",{className:\"mb-2\"},/*#__PURE__*/React.createElement(IntlMessages,{id:\"wizard.content-thanks\"})),/*#__PURE__*/React.createElement(\"p\",null,/*#__PURE__*/React.createElement(IntlMessages,{id:\"wizard.registered\"})))))),/*#__PURE__*/React.createElement(BottomNavigation,{onClickNext:onClickNext,onClickPrev:onClickPrev,className:\"justify-content-center \".concat(bottomNavHidden&&'invisible'),prevLabel:messages['wizard.prev'],nextLabel:messages['wizard.next']}))));};export default injectIntl(Validation);","map":null,"metadata":{},"sourceType":"module"}