{"ast":null,"code":"import _objectSpread from\"/home/browsewire/Desktop/CEI/cei/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/home/browsewire/Desktop/CEI/cei/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/browsewire/Desktop/CEI/cei/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/browsewire/Desktop/CEI/cei/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{useHistory}from'react-router';import axios from'axios';import Select from'react-select';import{Card,CardBody,Button,Label,Col,Row,Input}from'reactstrap';import CustomSelectInput from'../../../../components/common/CustomSelectInput';import IntlMessages from'../../../../helpers/IntlMessages';import{NotificationManager}from'../../../../components/common/react-notifications';var AssignGroup=function AssignGroup(_ref){var match=_ref.match;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isLoading=_useState2[0],setIsLoading=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),id=_useState4[0],setId=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),change=_useState6[0],setChange=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),groups=_useState8[0],setGroups=_useState8[1];var _useState9=useState({}),_useState10=_slicedToArray(_useState9,2),formData=_useState10[0],setFormData=_useState10[1];var history=useHistory();useEffect(function(){setId(match.params.id);setIsLoading(true);_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _yield$axios$get,data,groups;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get('/api/orders/groups');case 2:_yield$axios$get=_context.sent;data=_yield$axios$get.data;groups=data.map(function(item){var group={};group.label=item.name;group.value=item.id;return group;});setGroups(groups);setIsLoading(false);case 7:case\"end\":return _context.stop();}}},_callee);}))();},[change]);var handleSubmit=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(action){var res,_res;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:formData.orderId=id;if(!(action==='create')){_context2.next=16;break;}_context2.prev=2;_context2.next=5;return axios.post(\"/api/orders/groups\",formData);case 5:res=_context2.sent;NotificationManager.success('Order Group Assigned Successfully','Success',3000);history.push(\"/app/orders/edit-order/\".concat(id));_context2.next=14;break;case 10:_context2.prev=10;_context2.t0=_context2[\"catch\"](2);console.log(_context2.t0);NotificationManager.error('Something went wrong','Error',3000);case 14:_context2.next=28;break;case 16:_context2.prev=16;_context2.next=19;return axios.post(\"/api/orders/groups/assign\",formData);case 19:_res=_context2.sent;NotificationManager.success('Order Group Assigned Successfully','Success',3000);history.push(\"/app/orders/edit-order/\".concat(id));_context2.next=28;break;case 24:_context2.prev=24;_context2.t1=_context2[\"catch\"](16);console.log(_context2.t1);NotificationManager.error('Something went wrong','Error',3000);case 28:case\"end\":return _context2.stop();}}},_callee2,null,[[2,10],[16,24]]);}));return function handleSubmit(_x){return _ref3.apply(this,arguments);};}();return isLoading?/*#__PURE__*/React.createElement(\"div\",{className:\"loading\"}):/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Card,null,/*#__PURE__*/React.createElement(CardBody,null,/*#__PURE__*/React.createElement(\"h1\",null,\"Add to Group\"),/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,null,/*#__PURE__*/React.createElement(Label,null,/*#__PURE__*/React.createElement(IntlMessages,{id:\"Choose From Existing Groups\"})),/*#__PURE__*/React.createElement(Select,{components:{Input:CustomSelectInput},className:\"react-select\",classNamePrefix:\"react-select\",name:\"form-field-name\",options:groups,onChange:function onChange(e){setFormData(_objectSpread(_objectSpread({},formData),{},{orderGroupId:e.value}));}})),/*#__PURE__*/React.createElement(Col,null,/*#__PURE__*/React.createElement(Button,{className:\"mt-4\",onClick:function onClick(){return handleSubmit('assign');}},\"Add to Group\")),/*#__PURE__*/React.createElement(Col,null)),/*#__PURE__*/React.createElement(\"div\",{className:\"h4 my-2\"},\"Or\"),/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,null,/*#__PURE__*/React.createElement(Label,null,/*#__PURE__*/React.createElement(IntlMessages,{id:\"Add and Assign to Group\"})),/*#__PURE__*/React.createElement(Input,{onChange:function onChange(e){setFormData(_objectSpread(_objectSpread({},formData),{},{name:e.target.value}));}})),/*#__PURE__*/React.createElement(Col,null,/*#__PURE__*/React.createElement(Button,{className:\"mt-4\",onClick:function onClick(){return handleSubmit('create');}},\"Create and Assign\")),/*#__PURE__*/React.createElement(Col,null)))));};export default AssignGroup;","map":null,"metadata":{},"sourceType":"module"}