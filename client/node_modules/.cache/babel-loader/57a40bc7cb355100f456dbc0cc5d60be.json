{"ast":null,"code":"import _objectWithoutProperties from \"/home/browsewire/Desktop/CEIorder/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\n\nvar _this = this,\n    _jsxFileName = \"/home/browsewire/Desktop/CEIorder/client/src/helpers/authHelper.js\";\n\nimport React from 'react';\nimport { Route, Redirect } from 'react-router-dom';\nimport { getCurrentUser } from './Utils';\nimport { isAuthGuardActive } from '../constants/defaultValues';\n\nvar ProtectedRoute = function ProtectedRoute(_ref) {\n  var Component = _ref.component,\n      _ref$roles = _ref.roles,\n      roles = _ref$roles === void 0 ? undefined : _ref$roles,\n      rest = _objectWithoutProperties(_ref, [\"component\", \"roles\"]);\n\n  var setComponent = function setComponent(props) {\n    if (isAuthGuardActive) {\n      var currentUser = getCurrentUser();\n\n      if (currentUser) {\n        if (roles) {\n          if (roles.includes(currentUser.role)) {\n            return /*#__PURE__*/React.createElement(Component, Object.assign({}, props, {\n              __self: _this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 17,\n                columnNumber: 14\n              }\n            }));\n          } else {\n            return /*#__PURE__*/React.createElement(Redirect, {\n              to: {\n                pathname: '/unauthorized',\n                state: {\n                  from: props.location\n                }\n              },\n              __self: _this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 19,\n                columnNumber: 14\n              }\n            });\n          }\n        } else {\n          return /*#__PURE__*/React.createElement(Component, Object.assign({}, props, {\n            __self: _this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 26,\n              columnNumber: 13\n            }\n          }));\n        }\n      } else {\n        return /*#__PURE__*/React.createElement(Redirect, {\n          to: {\n            pathname: '/user/login',\n            state: {\n              from: props.location\n            }\n          },\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 29,\n            columnNumber: 12\n          }\n        });\n      }\n    } else {\n      return /*#__PURE__*/React.createElement(Component, Object.assign({}, props, {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 36,\n          columnNumber: 11\n        }\n      }));\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(Route, Object.assign({}, rest, {\n    render: setComponent,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 3\n    }\n  }));\n};\n\nvar UserRole = {\n  Admin: 0,\n  Editor: 1\n};\nexport { ProtectedRoute, UserRole };","map":{"version":3,"sources":["/home/browsewire/Desktop/CEIorder/client/src/helpers/authHelper.js"],"names":["React","Route","Redirect","getCurrentUser","isAuthGuardActive","ProtectedRoute","Component","component","roles","undefined","rest","setComponent","props","currentUser","includes","role","pathname","state","from","location","UserRole","Admin","Editor"],"mappings":";;;;;AACA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SACCC,KADD,EAECC,QAFD,QAGO,kBAHP;AAIA,SAASC,cAAT,QAA+B,SAA/B;AACA,SAASC,iBAAT,QAAkC,4BAAlC;;AAEA,IAAMC,cAAc,GAAG,SAAjBA,cAAiB,OAA0D;AAAA,MAA5CC,SAA4C,QAAvDC,SAAuD;AAAA,wBAAjCC,KAAiC;AAAA,MAAjCA,KAAiC,2BAAzBC,SAAyB;AAAA,MAAXC,IAAW;;AAChF,MAAMC,YAAY,GAAG,SAAfA,YAAe,CAACC,KAAD,EAAW;AAC/B,QAAIR,iBAAJ,EAAuB;AACtB,UAAMS,WAAW,GAAGV,cAAc,EAAlC;;AACA,UAAIU,WAAJ,EAAiB;AAChB,YAAIL,KAAJ,EAAW;AACV,cAAIA,KAAK,CAACM,QAAN,CAAeD,WAAW,CAACE,IAA3B,CAAJ,EAAsC;AACrC,gCAAO,oBAAC,SAAD,oBAAeH,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAAP;AACA,WAFD,MAEO;AACN,gCAAO,oBAAC,QAAD;AACN,cAAA,EAAE,EAAE;AACHI,gBAAAA,QAAQ,EAAE,eADP;AAEHC,gBAAAA,KAAK,EAAE;AAAEC,kBAAAA,IAAI,EAAEN,KAAK,CAACO;AAAd;AAFJ,eADE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAAP;AAKA;AACD,SAVD,MAUO;AACN,8BAAO,oBAAC,SAAD,oBAAeP,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAAP;AACA;AACD,OAdD,MAcO;AACN,4BAAO,oBAAC,QAAD;AACN,UAAA,EAAE,EAAE;AACHI,YAAAA,QAAQ,EAAE,aADP;AAEHC,YAAAA,KAAK,EAAE;AAAEC,cAAAA,IAAI,EAAEN,KAAK,CAACO;AAAd;AAFJ,WADE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAAP;AAKA;AACD,KAvBD,MAuBO;AACN,0BAAO,oBAAC,SAAD,oBAAeP,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAP;AACA;AAED,GA5BD;;AA8BA,sBACC,oBAAC,KAAD,oBACKF,IADL;AAEC,IAAA,MAAM,EAAEC,YAFT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KADD;AAMA,CArCD;;AAsCA,IAAMS,QAAQ,GAAG;AAChBC,EAAAA,KAAK,EAAE,CADS;AAEhBC,EAAAA,MAAM,EAAE;AAFQ,CAAjB;AAKA,SAASjB,cAAT,EAAyBe,QAAzB","sourcesContent":["\nimport React from 'react';\nimport {\n\tRoute,\n\tRedirect,\n} from 'react-router-dom';\nimport { getCurrentUser } from './Utils'\nimport { isAuthGuardActive } from '../constants/defaultValues';\n\nconst ProtectedRoute = ({ component: Component, roles = undefined, ...rest }) => {\n\tconst setComponent = (props) => {\n\t\tif (isAuthGuardActive) {\n\t\t\tconst currentUser = getCurrentUser();\n\t\t\tif (currentUser) {\n\t\t\t\tif (roles) {\n\t\t\t\t\tif (roles.includes(currentUser.role)) {\n\t\t\t\t\t\treturn <Component {...props} />;\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn <Redirect\n\t\t\t\t\t\t\tto={{\n\t\t\t\t\t\t\t\tpathname: '/unauthorized',\n\t\t\t\t\t\t\t\tstate: { from: props.location },\n\t\t\t\t\t\t\t}} />\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\treturn <Component {...props} />;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn <Redirect\n\t\t\t\t\tto={{\n\t\t\t\t\t\tpathname: '/user/login',\n\t\t\t\t\t\tstate: { from: props.location },\n\t\t\t\t\t}} />\n\t\t\t}\n\t\t} else {\n\t\t\treturn <Component {...props} />;\n\t\t}\n\n\t}\n\n\treturn (\n\t\t<Route\n\t\t\t{...rest}\n\t\t\trender={setComponent}\n\t\t/>\n\t);\n}\nconst UserRole = {\n\tAdmin: 0,\n\tEditor: 1,\n}\n\nexport { ProtectedRoute, UserRole };\n"]},"metadata":{},"sourceType":"module"}