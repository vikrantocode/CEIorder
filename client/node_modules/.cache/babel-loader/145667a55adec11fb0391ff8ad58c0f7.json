{"ast":null,"code":"import _toConsumableArray from \"/home/browsewire/Desktop/CEI/cei/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _createForOfIteratorHelper from \"/home/browsewire/Desktop/CEI/cei/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper\";\nimport _regeneratorRuntime from \"/home/browsewire/Desktop/CEI/cei/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _objectSpread from \"/home/browsewire/Desktop/CEI/cei/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _asyncToGenerator from \"/home/browsewire/Desktop/CEI/cei/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/home/browsewire/Desktop/CEI/cei/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/home/browsewire/Desktop/CEI/cei/client/src/views/app/inventory/Variants/Variant.js\";\n\nimport React, { useState, useEffect } from 'react';\nimport 'react-tagsinput/react-tagsinput.css';\nimport axios from 'axios';\nimport TagsInput from 'react-tagsinput';\nimport { servicePath } from '../../../../constants/defaultValues';\nimport CustomSelectInput from '../../../../components/common/CustomSelectInput';\nimport useMousetrap from '../../../../hooks/use-mousetrap';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter, Input, Label, Row, Col } from 'reactstrap';\nimport { NotificationManager } from '../../../../components/common/react-notifications';\nimport IntlMessages from '../../../../helpers/IntlMessages';\nimport AddNewVariantModal from './add-new-variant';\nimport VariantListHeading from './VariantListHeading';\nimport Select from 'react-select';\nimport VariantPageHeadings from './VariantPageHeadings';\nimport VariantPageListing from './VariantPageListing';\n\nvar getIndex = function getIndex(value, arr, prop) {\n  for (var i = 0; i < arr.length; i += 1) {\n    if (arr[i][prop] === value) {\n      return i;\n    }\n  }\n\n  return -1;\n};\n\nvar apiUrl = \"\".concat(servicePath, \"/cakes/paging\");\nvar orderOptions = [{\n  column: 'variant',\n  label: 'Variant name'\n}, {\n  column: 'category',\n  label: 'Category'\n}, {\n  column: 'status',\n  label: 'Status'\n}];\nvar pageSizes = [4, 8, 12, 20];\nvar statusOptions = [{\n  label: 'Active',\n  value: 'Active',\n  key: 0\n}, {\n  label: 'Inactive',\n  value: 'Inactive',\n  key: 1\n}];\n\nvar Variant = function Variant(_ref) {\n  var match = _ref.match;\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      selectedOptions = _useState2[0],\n      setSelectedOptions = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      isLoaded = _useState4[0],\n      setIsLoaded = _useState4[1];\n\n  var _useState5 = useState('thumblist'),\n      _useState6 = _slicedToArray(_useState5, 2),\n      displayMode = _useState6[0],\n      setDisplayMode = _useState6[1];\n\n  var _useState7 = useState(1),\n      _useState8 = _slicedToArray(_useState7, 2),\n      currentPage = _useState8[0],\n      setCurrentPage = _useState8[1];\n\n  var _useState9 = useState(8),\n      _useState10 = _slicedToArray(_useState9, 2),\n      selectedPageSize = _useState10[0],\n      setSelectedPageSize = _useState10[1];\n\n  var _useState11 = useState({\n    column: 'title',\n    label: 'Variant Name'\n  }),\n      _useState12 = _slicedToArray(_useState11, 2),\n      selectedOrderOption = _useState12[0],\n      setSelectedOrderOption = _useState12[1];\n\n  var _React$useState = React.useState({}),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      formData = _React$useState2[0],\n      setformData = _React$useState2[1];\n\n  var _useState13 = useState(false),\n      _useState14 = _slicedToArray(_useState13, 2),\n      modalBasic = _useState14[0],\n      setModalBasic = _useState14[1];\n\n  var _useState15 = useState(false),\n      _useState16 = _slicedToArray(_useState15, 2),\n      modalOpen = _useState16[0],\n      setModalOpen = _useState16[1];\n\n  var _useState17 = useState(0),\n      _useState18 = _slicedToArray(_useState17, 2),\n      totalItemCount = _useState18[0],\n      setTotalItemCount = _useState18[1];\n\n  var _useState19 = useState(1),\n      _useState20 = _slicedToArray(_useState19, 2),\n      totalPage = _useState20[0],\n      setTotalPage = _useState20[1];\n\n  var _useState21 = useState(''),\n      _useState22 = _slicedToArray(_useState21, 2),\n      search = _useState22[0],\n      setSearch = _useState22[1];\n\n  var _useState23 = useState([]),\n      _useState24 = _slicedToArray(_useState23, 2),\n      selectedItems = _useState24[0],\n      setSelectedItems = _useState24[1];\n\n  var _useState25 = useState([]),\n      _useState26 = _slicedToArray(_useState25, 2),\n      items = _useState26[0],\n      setItems = _useState26[1];\n\n  var _useState27 = useState(null),\n      _useState28 = _slicedToArray(_useState27, 2),\n      lastChecked = _useState28[0],\n      setLastChecked = _useState28[1];\n\n  var _useState29 = useState(false),\n      _useState30 = _slicedToArray(_useState29, 2),\n      modal = _useState30[0],\n      setModal = _useState30[1];\n\n  var _useState31 = useState({}),\n      _useState32 = _slicedToArray(_useState31, 2),\n      details = _useState32[0],\n      setDetails = _useState32[1];\n\n  var _useState33 = useState([]),\n      _useState34 = _slicedToArray(_useState33, 2),\n      categories = _useState34[0],\n      setcategories = _useState34[1];\n\n  var _useState35 = useState(false),\n      _useState36 = _slicedToArray(_useState35, 2),\n      change = _useState36[0],\n      setchange = _useState36[1];\n\n  var _useState37 = useState(\"\"),\n      _useState38 = _slicedToArray(_useState37, 2),\n      variantId = _useState38[0],\n      setvariantId = _useState38[1];\n\n  var _useState39 = useState(false),\n      _useState40 = _slicedToArray(_useState39, 2),\n      modalDelete = _useState40[0],\n      setModalDelete = _useState40[1];\n\n  var _useState41 = useState([]),\n      _useState42 = _slicedToArray(_useState41, 2),\n      tags = _useState42[0],\n      setTags = _useState42[1];\n\n  var deleteMultipleModal = function deleteMultipleModal(e) {\n    setModalDelete(true);\n  };\n\n  var deleteModal = function deleteModal(e) {\n    setvariantId(e);\n    setModalBasic(true);\n  };\n\n  useEffect(function () {\n    setCurrentPage(1);\n  }, [selectedPageSize, selectedOrderOption]);\n  useEffect(function () {\n    function fetchData() {\n      return _fetchData.apply(this, arguments);\n    }\n\n    function _fetchData() {\n      _fetchData = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                axios.get(\"/api/inventory/get-variants/1\").then(function (res) {\n                  return res.data;\n                }).then(function (data) {\n                  setTotalPage(data.totalPage);\n                  setItems(data.data.map(function (x) {\n                    return _objectSpread({}, x);\n                  }));\n                  setSelectedItems([]); // setTotalItemCount(data.totalItem);\n\n                  setIsLoaded(true);\n                });\n\n              case 1:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n      return _fetchData.apply(this, arguments);\n    }\n\n    fetchData();\n  }, [change]); // DELETE MULTIPLE VARIANTS\n\n  var deleteMultiple = function deleteMultiple() {\n    axios.post(\"/api/inventory/delete-variant\", null, {\n      params: {\n        id: selectedItems\n      }\n    }).then(function (res) {\n      console.log(res.data);\n      setchange(!change);\n      setModalDelete(false);\n      NotificationManager.success(res.data.success, 'Success', 3000, null, null, '');\n    });\n  }; // BULK STATUS CHANGE\n\n\n  var deactivate = function deactivate(e) {\n    axios.post(\"/api/inventory/deactivate-variant\", null, {\n      params: {\n        id: selectedItems\n      }\n    }).then(function (res) {\n      if (res.data.success) {\n        setchange(!change);\n        NotificationManager.success(res.data.success, 'Success', 3000, null, null, '');\n      }\n    });\n  };\n\n  var activate = function activate(e) {\n    axios.post(\"/api/inventory/activate-variant\", null, {\n      params: {\n        id: selectedItems\n      }\n    }).then(function (res) {\n      if (res.data.success) {\n        setchange(!change);\n        NotificationManager.success(res.data.success, 'Success', 3000, null, null, '');\n      }\n    });\n  };\n\n  useEffect(function () {\n    axios.get(\"/api/inventory/get-category\").then(function (res) {\n      console.log(res.data.data);\n      var categoryList = [];\n      var singleCategory;\n\n      var _iterator = _createForOfIteratorHelper(res.data.data),\n          _step;\n\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var i = _step.value;\n\n          if (i.status) {\n            singleCategory = {\n              label: i.category,\n              value: i.category,\n              key: i.id\n            };\n            categoryList.push(singleCategory);\n          }\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n\n      setcategories(categoryList);\n      console.log(\"categories are\", categories);\n    });\n  }, []); // GET THE VARIANT DETAILS AND OPEN THE EDIT MODAL\n\n  var openModal = function openModal(e) {\n    axios.get(\"/api/inventory/variant-details\", {\n      params: {\n        id: e\n      }\n    }).then(function (res) {\n      console.log(res.data.data);\n      setDetails(res.data.data);\n      var selectedData = [];\n      console.log(details);\n\n      var _iterator2 = _createForOfIteratorHelper(res.data.data.categories),\n          _step2;\n\n      try {\n        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n          var i = _step2.value;\n          var obj = {\n            label: i,\n            value: i\n          };\n          selectedData.push(obj);\n        }\n      } catch (err) {\n        _iterator2.e(err);\n      } finally {\n        _iterator2.f();\n      }\n\n      setSelectedOptions(selectedData);\n      setTags(res.data.data.attributes);\n      setModal(true);\n    });\n  }; //DELETE Varint HANDLER\n\n\n  var deleteVariant = function deleteVariant(e) {\n    axios.post('/api/inventory/delete-variant', null, {\n      params: {\n        id: variantId\n      }\n    }).then(function (res) {\n      setchange(!change);\n      setModalBasic(false);\n      NotificationManager.success(res.data.success, 'Success', 3000, null, null, '');\n    });\n  }; // EDIT HANDLER\n\n\n  var edit = function edit(e) {\n    console.log(e);\n    var data = {};\n    var selectedCategories = [];\n\n    if (formData.name) {\n      data.variant = formData.name.toLowerCase();\n    }\n\n    if (formData.status) {\n      if (formData.status == \"Active\") {\n        data.status = true;\n      } else {\n        data.status = false;\n      }\n    }\n\n    if (tags) {\n      data.attributes = tags;\n    }\n\n    if (selectedOptions.length > 0) {\n      var _iterator3 = _createForOfIteratorHelper(selectedOptions),\n          _step3;\n\n      try {\n        for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n          var i = _step3.value;\n          selectedCategories.push(i.value);\n        }\n      } catch (err) {\n        _iterator3.e(err);\n      } finally {\n        _iterator3.f();\n      }\n\n      data.categories = selectedCategories;\n    }\n\n    console.log(data);\n    axios.post(\"/api/inventory/edit-variant\", data, {\n      params: {\n        id: e\n      }\n    }).then(function (res) {\n      console.log(res);\n\n      if (res.data.success) {\n        setModal(false);\n        setchange(!change);\n        NotificationManager.success(res.data.success, 'Success', 3000, null, null, '');\n      }\n    });\n  };\n\n  var onCheckItem = function onCheckItem(event, id) {\n    if (event.target.tagName === 'A' || event.target.parentElement && event.target.parentElement.tagName === 'A') {\n      return true;\n    }\n\n    if (lastChecked === null) {\n      setLastChecked(id);\n    }\n\n    var selectedList = _toConsumableArray(selectedItems);\n\n    if (selectedList.includes(id)) {\n      selectedList = selectedList.filter(function (x) {\n        return x !== id;\n      });\n    } else {\n      selectedList.push(id);\n    }\n\n    setSelectedItems(selectedList);\n\n    if (event.shiftKey) {\n      var newItems = _toConsumableArray(items);\n\n      var start = getIndex(id, newItems, 'id');\n      var end = getIndex(lastChecked, newItems, 'id');\n      newItems = newItems.slice(Math.min(start, end), Math.max(start, end) + 1);\n      selectedItems.push.apply(selectedItems, _toConsumableArray(newItems.map(function (item) {\n        return item.id;\n      })));\n      selectedList = Array.from(new Set(selectedItems));\n      setSelectedItems(selectedList);\n    }\n\n    document.activeElement.blur();\n    return false;\n  };\n\n  var handleChangeSelectAll = function handleChangeSelectAll(isToggle) {\n    if (selectedItems.length >= items.length) {\n      if (isToggle) {\n        setSelectedItems([]);\n      }\n    } else {\n      setSelectedItems(items.map(function (x) {\n        return x.id;\n      }));\n    }\n\n    document.activeElement.blur();\n    return false;\n  };\n\n  var changePage = function changePage(i) {\n    setCurrentPage(i);\n    axios.get(\"/api/inventory/get-variants/\".concat(i)).then(function (res) {\n      setTotalPage(res.data.totalPage);\n      setItems(res.data.data.map(function (x) {\n        return _objectSpread({}, x);\n      }));\n      setSelectedItems([]); // setTotalItemCount(data.totalItem);\n\n      setIsLoaded(true);\n    });\n  };\n\n  var onContextMenuClick = function onContextMenuClick(e, data) {\n    // params : (e,data,target)\n    console.log('onContextMenuClick - selected items', selectedItems);\n    console.log('onContextMenuClick - action : ', data.action);\n  };\n\n  var onContextMenu = function onContextMenu(e, data) {\n    var clickedProductId = data.data;\n\n    if (!selectedItems.includes(clickedProductId)) {\n      setSelectedItems([clickedProductId]);\n    }\n\n    return true;\n  };\n\n  useMousetrap(['ctrl+a', 'command+a'], function () {\n    handleChangeSelectAll(false);\n  });\n  useMousetrap(['ctrl+d', 'command+d'], function () {\n    setSelectedItems([]);\n    return false;\n  });\n  var startIndex = (currentPage - 1) * selectedPageSize;\n  var endIndex = currentPage * selectedPageSize;\n  return !isLoaded ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"loading\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 340,\n      columnNumber: 5\n    }\n  }) : /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"disable-text-selection\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 343,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(VariantPageHeadings, {\n    deleteMultipleModal: deleteMultipleModal,\n    activate: activate,\n    deactivate: deactivate,\n    heading: \"Attribute\",\n    displayMode: displayMode,\n    changeDisplayMode: setDisplayMode,\n    handleChangeSelectAll: handleChangeSelectAll,\n    changeOrderBy: function changeOrderBy(column) {\n      setSelectedOrderOption(orderOptions.find(function (x) {\n        return x.column === column;\n      }));\n      axios.get(\"/api/inventory/get-variants/1\", {\n        params: {\n          sortby: column\n        }\n      }).then(function (res) {\n        setItems(res.data.data.map(function (x) {\n          return _objectSpread({}, x);\n        }));\n        setSelectedItems([]);\n        setIsLoaded(true);\n      });\n    },\n    changePageSize: setSelectedPageSize,\n    selectedPageSize: selectedPageSize,\n    totalItemCount: totalItemCount,\n    selectedOrderOption: selectedOrderOption,\n    match: match,\n    startIndex: startIndex,\n    endIndex: endIndex,\n    selectedItemsLength: selectedItems ? selectedItems.length : 0,\n    itemsLength: items ? items.length : 0,\n    onSearchKey: function onSearchKey(e) {\n      if (e.key === 'Enter') {\n        setSearch(e.target.value.toLowerCase());\n        axios.get(\"/api/inventory/get-variants/1\", {\n          params: {\n            search: e.target.value.toLowerCase()\n          }\n        }).then(function (res) {\n          setItems(res.data.data.map(function (x) {\n            return _objectSpread({}, x);\n          }));\n          setSelectedItems([]); // setTotalItemCount(res.data.totalItem);\n\n          setIsLoaded(true);\n        });\n      }\n    },\n    orderOptions: orderOptions,\n    pageSizes: pageSizes,\n    toggleModal: function toggleModal() {\n      return setModalOpen(!modalOpen);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 344,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(AddNewVariantModal, {\n    change: change,\n    setchange: setchange,\n    modalOpen: modalOpen,\n    toggleModal: function toggleModal() {\n      return setModalOpen(!modalOpen);\n    },\n    categories: categories,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 386,\n      columnNumber: 11\n    }\n  }), items.length == 0 ? \"\" : /*#__PURE__*/React.createElement(VariantListHeading, {\n    selectedItemsLength: selectedItems ? selectedItems.length : 0,\n    handleChangeSelectAll: handleChangeSelectAll,\n    itemsLength: items ? items.length : 0,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 393,\n      columnNumber: 33\n    }\n  }), items.length == 0 ? /*#__PURE__*/React.createElement(\"h3\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 398,\n      columnNumber: 31\n    }\n  }, \"No Records Found\") : /*#__PURE__*/React.createElement(VariantPageListing, {\n    items: items,\n    deleteModal: deleteModal,\n    openModal: openModal,\n    displayMode: displayMode,\n    selectedItems: selectedItems,\n    onCheckItem: onCheckItem,\n    currentPage: currentPage,\n    totalPage: totalPage,\n    onContextMenuClick: onContextMenuClick,\n    onContextMenu: onContextMenu,\n    onChangePage: changePage,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 398,\n      columnNumber: 58\n    }\n  }), /*#__PURE__*/React.createElement(Modal, {\n    isOpen: modal,\n    toggle: function toggle() {\n      return setModal(!modal);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 411,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(ModalHeader, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 412,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(IntlMessages, {\n    id: \"Edit\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 413,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(ModalBody, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 415,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    className: \"mt-3\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 416,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 417,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Label, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 418,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(IntlMessages, {\n    id: \"Attribute Name\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 419,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(Input, {\n    onChange: function onChange(e) {\n      setformData(_objectSpread(_objectSpread({}, formData), {}, {\n        name: e.target.value\n      }));\n    },\n    defaultValue: details.variant,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 421,\n      columnNumber: 19\n    }\n  })), /*#__PURE__*/React.createElement(Col, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 426,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Label, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 427,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(IntlMessages, {\n    id: \"Attribute Values\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 428,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(TagsInput, {\n    value: tags,\n    onChange: function onChange(val) {\n      return setTags(val);\n    },\n    inputProps: {\n      placeholder: ''\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 430,\n      columnNumber: 19\n    }\n  }))), /*#__PURE__*/React.createElement(Row, {\n    className: \"mt-3\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 437,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 438,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 439,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(IntlMessages, {\n    id: \"Select Category\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 440,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(Select, {\n    components: {\n      Input: CustomSelectInput\n    },\n    className: \"react-select\",\n    classNamePrefix: \"react-select\",\n    isMulti: true,\n    name: \"form-field-name\",\n    value: selectedOptions,\n    onChange: setSelectedOptions,\n    options: categories //   defaultValue={details.categories ? details.categories.map(item=>{\n    //   return ({label:item, value:item})\n    // }):\"\"}\n    ,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 442,\n      columnNumber: 19\n    }\n  })), /*#__PURE__*/React.createElement(Col, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 456,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Label, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 457,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(IntlMessages, {\n    id: \"Status\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 458,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(Select, {\n    defaultValue: details.status ? {\n      label: 'Active',\n      value: 'Active'\n    } : {\n      label: 'Inactive',\n      value: 'Inactive'\n    },\n    components: {\n      Input: CustomSelectInput\n    },\n    className: \"react-select\",\n    classNamePrefix: \"react-select\",\n    name: \"form-field-name\",\n    options: statusOptions,\n    onChange: function onChange(e) {\n      setformData(_objectSpread(_objectSpread({}, formData), {}, {\n        status: e.value\n      }));\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 461,\n      columnNumber: 19\n    }\n  })))), /*#__PURE__*/React.createElement(ModalFooter, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 476,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    onClick: function onClick() {\n      return edit(details.id);\n    },\n    color: \"primary\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 477,\n      columnNumber: 15\n    }\n  }, \"Save Changes\"), ' ', /*#__PURE__*/React.createElement(Button, {\n    color: \"secondary\",\n    onClick: function onClick() {\n      return setModal(false);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 480,\n      columnNumber: 15\n    }\n  }, \"Cancel\"))), /*#__PURE__*/React.createElement(Modal, {\n    isOpen: modalBasic,\n    toggle: function toggle() {\n      return setModal(!modalBasic);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 485,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(ModalHeader, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 486,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(IntlMessages, {\n    id: \"Delete\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 487,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(ModalBody, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 489,\n      columnNumber: 13\n    }\n  }, \"Are you sure you want to delete attribute?\"), /*#__PURE__*/React.createElement(ModalFooter, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 492,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    onClick: deleteVariant,\n    color: \"primary\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 493,\n      columnNumber: 15\n    }\n  }, \"Confirm\"), ' ', /*#__PURE__*/React.createElement(Button, {\n    color: \"secondary\",\n    onClick: function onClick() {\n      return setModalBasic(false);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 496,\n      columnNumber: 15\n    }\n  }, \"Cancel\"))), /*#__PURE__*/React.createElement(Modal, {\n    isOpen: modalDelete,\n    toggle: function toggle() {\n      return setModal(!modalDelete);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 502,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(ModalHeader, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 503,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(IntlMessages, {\n    id: \"Delete\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 504,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(ModalBody, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 506,\n      columnNumber: 13\n    }\n  }, \"Are you sure you want to delete selected items?\"), /*#__PURE__*/React.createElement(ModalFooter, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 509,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    onClick: deleteMultiple,\n    color: \"primary\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 510,\n      columnNumber: 15\n    }\n  }, \"Confirm\"), ' ', /*#__PURE__*/React.createElement(Button, {\n    color: \"secondary\",\n    onClick: function onClick() {\n      return setModalDelete(false);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 513,\n      columnNumber: 15\n    }\n  }, \"Cancel\")))));\n};\n\nexport default Variant;","map":{"version":3,"sources":["/home/browsewire/Desktop/CEI/cei/client/src/views/app/inventory/Variants/Variant.js"],"names":["React","useState","useEffect","axios","TagsInput","servicePath","CustomSelectInput","useMousetrap","Button","Modal","ModalHeader","ModalBody","ModalFooter","Input","Label","Row","Col","NotificationManager","IntlMessages","AddNewVariantModal","VariantListHeading","Select","VariantPageHeadings","VariantPageListing","getIndex","value","arr","prop","i","length","apiUrl","orderOptions","column","label","pageSizes","statusOptions","key","Variant","match","selectedOptions","setSelectedOptions","isLoaded","setIsLoaded","displayMode","setDisplayMode","currentPage","setCurrentPage","selectedPageSize","setSelectedPageSize","selectedOrderOption","setSelectedOrderOption","formData","setformData","modalBasic","setModalBasic","modalOpen","setModalOpen","totalItemCount","setTotalItemCount","totalPage","setTotalPage","search","setSearch","selectedItems","setSelectedItems","items","setItems","lastChecked","setLastChecked","modal","setModal","details","setDetails","categories","setcategories","change","setchange","variantId","setvariantId","modalDelete","setModalDelete","tags","setTags","deleteMultipleModal","e","deleteModal","fetchData","get","then","res","data","map","x","deleteMultiple","post","params","id","console","log","success","deactivate","activate","categoryList","singleCategory","status","category","push","openModal","selectedData","obj","attributes","deleteVariant","edit","selectedCategories","name","variant","toLowerCase","onCheckItem","event","target","tagName","parentElement","selectedList","includes","filter","shiftKey","newItems","start","end","slice","Math","min","max","item","Array","from","Set","document","activeElement","blur","handleChangeSelectAll","isToggle","changePage","onContextMenuClick","action","onContextMenu","clickedProductId","startIndex","endIndex","find","sortby","val","placeholder"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport 'react-tagsinput/react-tagsinput.css';\nimport axios from 'axios';\nimport TagsInput from 'react-tagsinput';\nimport { servicePath } from '../../../../constants/defaultValues';\nimport CustomSelectInput from '../../../../components/common/CustomSelectInput';\nimport useMousetrap from '../../../../hooks/use-mousetrap';\nimport {\n  Button,\n  Modal,\n  ModalHeader,\n  ModalBody,\n  ModalFooter,\n  Input,\n  Label,\n  Row,\n  Col\n} from 'reactstrap';\nimport { NotificationManager } from '../../../../components/common/react-notifications';\nimport IntlMessages from '../../../../helpers/IntlMessages';\nimport AddNewVariantModal from './add-new-variant';\nimport VariantListHeading from './VariantListHeading';\nimport Select from 'react-select';\nimport VariantPageHeadings from './VariantPageHeadings';\nimport VariantPageListing from './VariantPageListing';\n\nconst getIndex = (value, arr, prop) => {\n  for (let i = 0; i < arr.length; i += 1) {\n    if (arr[i][prop] === value) {\n      return i;\n    }\n  }\n  return -1;\n};\n\nconst apiUrl = `${servicePath}/cakes/paging`;\n\nconst orderOptions = [\n  { column: 'variant', label: 'Variant name' },\n  { column: 'category', label: 'Category' },\n  { column: 'status', label: 'Status' },\n];\nconst pageSizes = [4, 8, 12, 20];\nconst statusOptions = [\n  { label: 'Active', value: 'Active', key: 0 },\n  { label: 'Inactive', value: 'Inactive', key: 1 }\n];\nconst Variant = ({ match }) => {\n  const [selectedOptions, setSelectedOptions] = useState([]);\n  const [isLoaded, setIsLoaded] = useState(false);\n  const [displayMode, setDisplayMode] = useState('thumblist');\n  const [currentPage, setCurrentPage] = useState(1);\n  const [selectedPageSize, setSelectedPageSize] = useState(8);\n  const [selectedOrderOption, setSelectedOrderOption] = useState({\n    column: 'title',\n    label: 'Variant Name',\n  });\n  const [formData, setformData] = React.useState({})\n  const [modalBasic, setModalBasic] = useState(false);\n  const [modalOpen, setModalOpen] = useState(false);\n  const [totalItemCount, setTotalItemCount] = useState(0);\n  const [totalPage, setTotalPage] = useState(1);\n  const [search, setSearch] = useState('');\n  const [selectedItems, setSelectedItems] = useState([]);\n  const [items, setItems] = useState([]);\n  const [lastChecked, setLastChecked] = useState(null);\n  const [modal, setModal] = useState(false)\n  const [details, setDetails] = useState({})\n  const [categories, setcategories] = useState([])\n  const [change, setchange] = useState(false)\n  const [variantId, setvariantId] = useState(\"\")\n  const [modalDelete, setModalDelete] = useState(false)\n  const [tags,setTags] = useState([])\n\n  const deleteMultipleModal = (e) => {\n    setModalDelete(true)\n  }\n\n  const deleteModal = (e) => {\n    setvariantId(e)\n    setModalBasic(true)\n  }\n\n  useEffect(() => {\n    setCurrentPage(1);\n  }, [selectedPageSize, selectedOrderOption]);\n\n  useEffect(() => {\n    async function fetchData() {\n      axios\n        .get(\n          `/api/inventory/get-variants/1`\n        )\n        .then((res) => {\n          return res.data;\n        })\n        .then((data) => {\n          setTotalPage(data.totalPage);\n          setItems(data.data.map(x => { return { ...x } }));\n          setSelectedItems([]);\n          // setTotalItemCount(data.totalItem);\n          setIsLoaded(true);\n        });\n    }\n    fetchData();\n  }, [change]);\n  // DELETE MULTIPLE VARIANTS\n  const deleteMultiple = () => {\n    axios.post(\"/api/inventory/delete-variant\", null, { params: { id: selectedItems } }).then(res => {\n      console.log(res.data)\n      setchange(!change)\n      setModalDelete(false)\n      NotificationManager.success(\n        res.data.success,\n        'Success',\n        3000,\n        null,\n        null,\n        ''\n      );\n    })\n  }\n\n  // BULK STATUS CHANGE\n  const deactivate = (e) => {\n    axios.post(\"/api/inventory/deactivate-variant\", null, { params: { id: selectedItems } }).then(res => {\n      if (res.data.success) {\n        setchange(!change)\n        NotificationManager.success(\n          res.data.success,\n          'Success',\n          3000,\n          null,\n          null,\n          ''\n        );\n      }\n    })\n  }\n  const activate = (e) => {\n    axios.post(\"/api/inventory/activate-variant\", null, { params: { id: selectedItems } }).then(res => {\n      if (res.data.success) {\n        setchange(!change)\n        NotificationManager.success(\n          res.data.success,\n          'Success',\n          3000,\n          null,\n          null,\n          ''\n        );\n      }\n    })\n  }\n\n  useEffect(() => {\n    axios.get(\"/api/inventory/get-category\").then(res => {\n      console.log(res.data.data)\n      var categoryList = []\n      var singleCategory\n      for (var i of res.data.data) {\n        if (i.status) {\n          singleCategory = {\n            label: i.category,\n            value: i.category,\n            key: i.id\n          }\n          categoryList.push(singleCategory)\n        }\n\n      }\n      setcategories(categoryList)\n      console.log(\"categories are\", categories)\n    })\n  }, [])\n\n\n  // GET THE VARIANT DETAILS AND OPEN THE EDIT MODAL\n  const openModal = (e) => {\n    axios.get(\"/api/inventory/variant-details\", { params: { id: e } }).then(res => {\n      console.log(res.data.data);\n      setDetails(res.data.data)\n      var selectedData = []\n      console.log(details);\n      for(var i of res.data.data.categories){\n        var obj = {\n          label:i,\n          value:i\n        }\n        selectedData.push(obj)\n      }\n      setSelectedOptions(selectedData)\n      setTags(res.data.data.attributes)\n      setModal(true)\n    })\n\n  };\n  //DELETE Varint HANDLER\n  const deleteVariant = (e) => {\n    axios\n      .post('/api/inventory/delete-variant', null, { params: { id: variantId } })\n      .then((res) => {\n        setchange(!change)\n        setModalBasic(false);\n        NotificationManager.success(\n          res.data.success,\n          'Success',\n          3000,\n          null,\n          null,\n          ''\n        );\n      });\n  };\n\n  // EDIT HANDLER\n  const edit = (e) => {\n    console.log(e);\n    const data = {}\n    var selectedCategories = []\n    if (formData.name) {\n      data.variant = formData.name.toLowerCase()\n    }\n    if (formData.status) {\n      if (formData.status == \"Active\") {\n        data.status = true\n      }\n      else {\n        data.status = false\n      }\n    }\n    if (tags) {\n      data.attributes = tags\n    }\n    if(selectedOptions.length>0){\n      for(var i of selectedOptions){\n         selectedCategories.push(i.value)\n      }\n      data.categories=selectedCategories\n    }\n    console.log(data)\n    axios.post(\"/api/inventory/edit-variant\", data, { params: { id: e } }).then(res => {\n      console.log(res);\n      if (res.data.success) {\n        setModal(false)\n        setchange(!change)\n        NotificationManager.success(res.data.success, 'Success', 3000, null, null, '');\n      }\n\n    })\n  }\n\n  const onCheckItem = (event, id) => {\n    if (\n      event.target.tagName === 'A' ||\n      (event.target.parentElement && event.target.parentElement.tagName === 'A')\n    ) {\n      return true;\n    }\n    if (lastChecked === null) {\n      setLastChecked(id);\n    }\n\n    let selectedList = [...selectedItems];\n    if (selectedList.includes(id)) {\n      selectedList = selectedList.filter((x) => x !== id);\n    } else {\n      selectedList.push(id);\n    }\n    setSelectedItems(selectedList);\n\n    if (event.shiftKey) {\n      let newItems = [...items];\n      const start = getIndex(id, newItems, 'id');\n      const end = getIndex(lastChecked, newItems, 'id');\n      newItems = newItems.slice(Math.min(start, end), Math.max(start, end) + 1);\n      selectedItems.push(\n        ...newItems.map((item) => {\n          return item.id;\n        })\n      );\n      selectedList = Array.from(new Set(selectedItems));\n      setSelectedItems(selectedList);\n    }\n    document.activeElement.blur();\n    return false;\n  };\n\n  const handleChangeSelectAll = (isToggle) => {\n    if (selectedItems.length >= items.length) {\n      if (isToggle) {\n        setSelectedItems([]);\n      }\n    } else {\n      setSelectedItems(items.map((x) => x.id));\n    }\n    document.activeElement.blur();\n    return false;\n  };\n\n  const changePage = (i) => {\n    setCurrentPage(i)\n    axios.get(`/api/inventory/get-variants/${i}`).then(res => {\n      setTotalPage(res.data.totalPage);\n      setItems(res.data.data.map(x => { return { ...x } }));\n      setSelectedItems([]);\n      // setTotalItemCount(data.totalItem);\n      setIsLoaded(true);\n    })\n  }\n\n  const onContextMenuClick = (e, data) => {\n    // params : (e,data,target)\n    console.log('onContextMenuClick - selected items', selectedItems);\n    console.log('onContextMenuClick - action : ', data.action);\n  };\n\n  const onContextMenu = (e, data) => {\n    const clickedProductId = data.data;\n    if (!selectedItems.includes(clickedProductId)) {\n      setSelectedItems([clickedProductId]);\n    }\n\n    return true;\n  };\n\n  useMousetrap(['ctrl+a', 'command+a'], () => {\n    handleChangeSelectAll(false);\n  });\n\n  useMousetrap(['ctrl+d', 'command+d'], () => {\n    setSelectedItems([]);\n    return false;\n  });\n\n  const startIndex = (currentPage - 1) * selectedPageSize;\n  const endIndex = currentPage * selectedPageSize;\n\n  return !isLoaded ? (\n    <div className=\"loading\" />\n  ) : (\n      <>\n        <div className=\"disable-text-selection\">\n          <VariantPageHeadings\n            deleteMultipleModal={deleteMultipleModal}\n            activate={activate}\n            deactivate={deactivate}\n            heading=\"Attribute\"\n            displayMode={displayMode}\n            changeDisplayMode={setDisplayMode}\n            handleChangeSelectAll={handleChangeSelectAll}\n            changeOrderBy={(column) => {\n              setSelectedOrderOption(\n                orderOptions.find((x) => x.column === column)\n              );\n              axios.get(\"/api/inventory/get-variants/1\", { params: { sortby: column } }).then(res => {\n                setItems(res.data.data.map(x => { return { ...x } }));\n                setSelectedItems([]);\n                setIsLoaded(true);\n              })\n            }}\n            changePageSize={setSelectedPageSize}\n            selectedPageSize={selectedPageSize}\n            totalItemCount={totalItemCount}\n            selectedOrderOption={selectedOrderOption}\n            match={match}\n            startIndex={startIndex}\n            endIndex={endIndex}\n            selectedItemsLength={selectedItems ? selectedItems.length : 0}\n            itemsLength={items ? items.length : 0}\n            onSearchKey={(e) => {\n              if (e.key === 'Enter') {\n                setSearch(e.target.value.toLowerCase());\n                axios.get(\"/api/inventory/get-variants/1\", { params: { search: e.target.value.toLowerCase() } }).then((res) => {\n                  setItems(res.data.data.map(x => { return { ...x } }));\n                  setSelectedItems([]);\n                  // setTotalItemCount(res.data.totalItem);\n                  setIsLoaded(true);\n                })\n              }\n            }}\n            orderOptions={orderOptions}\n            pageSizes={pageSizes}\n            toggleModal={() => setModalOpen(!modalOpen)}\n          />\n          <AddNewVariantModal\n            change={change}\n            setchange={setchange}\n            modalOpen={modalOpen}\n            toggleModal={() => setModalOpen(!modalOpen)}\n            categories={categories}\n          />\n          {items.length==0 ? \"\":<VariantListHeading\n            selectedItemsLength={selectedItems ? selectedItems.length : 0}\n            handleChangeSelectAll={handleChangeSelectAll}\n            itemsLength={items ? items.length : 0}\n          />}\n          {items.length== 0 ? <h3>No Records Found</h3> :<VariantPageListing\n            items={items}\n            deleteModal={deleteModal}\n            openModal={openModal}\n            displayMode={displayMode}\n            selectedItems={selectedItems}\n            onCheckItem={onCheckItem}\n            currentPage={currentPage}\n            totalPage={totalPage}\n            onContextMenuClick={onContextMenuClick}\n            onContextMenu={onContextMenu}\n            onChangePage={changePage}\n          /> }\n          <Modal isOpen={modal} toggle={() => setModal(!modal)}>\n            <ModalHeader>\n              <IntlMessages id=\"Edit\" />\n            </ModalHeader>\n            <ModalBody>\n              <Row className='mt-3'>\n                <Col>\n                  <Label>\n                    <IntlMessages id=\"Attribute Name\" />\n                  </Label>\n                  <Input onChange={(e) => {\n                    setformData({ ...formData, name: e.target.value })\n                  }}\n                    defaultValue={details.variant} />\n                </Col>\n                <Col>\n                  <Label>\n                    <IntlMessages id=\"Attribute Values\" />\n                  </Label>\n                  <TagsInput\n                    value={tags}\n                    onChange={(val) => setTags(val)}\n                    inputProps={{ placeholder: '' }}\n                  />\n                </Col>\n              </Row>\n              <Row className='mt-3'>\n                <Col>\n                  <label>\n                    <IntlMessages id=\"Select Category\" />\n                  </label>\n                  <Select\n                    components={{ Input: CustomSelectInput }}\n                    className=\"react-select\"\n                    classNamePrefix=\"react-select\"\n                    isMulti\n                    name=\"form-field-name\"\n                    value={selectedOptions}\n                    onChange={setSelectedOptions}\n                    options={categories}\n                  //   defaultValue={details.categories ? details.categories.map(item=>{\n                  //   return ({label:item, value:item})\n                  // }):\"\"}\n                  />\n                </Col>\n                <Col>\n                  <Label>\n                    <IntlMessages id=\"Status\" />\n                  </Label>\n\n                  <Select\n                    defaultValue={details.status ? {label: 'Active', value: 'Active'} : {label: 'Inactive', value: 'Inactive'}}\n                    components={{ Input: CustomSelectInput }}\n                    className=\"react-select\"\n                    classNamePrefix=\"react-select\"\n                    name=\"form-field-name\"\n                    options={statusOptions}\n                    onChange={(e) => {\n                      setformData({ ...formData, status: e.value })\n\n                    }}\n                  />\n                </Col>\n              </Row>\n            </ModalBody>\n            <ModalFooter>\n              <Button onClick={() => edit(details.id)} color=\"primary\">\n                Save Changes\n            </Button>{' '}\n              <Button color=\"secondary\" onClick={() => setModal(false)}>\n                Cancel\n            </Button>\n            </ModalFooter>\n          </Modal>\n          <Modal isOpen={modalBasic} toggle={() => setModal(!modalBasic)}>\n            <ModalHeader>\n              <IntlMessages id=\"Delete\" />\n            </ModalHeader>\n            <ModalBody>\n              Are you sure you want to delete attribute?\n        </ModalBody>\n            <ModalFooter>\n              <Button onClick={deleteVariant} color=\"primary\">\n                Confirm\n          </Button>{' '}\n              <Button color=\"secondary\" onClick={() => setModalBasic(false)}>\n                Cancel\n          </Button>\n            </ModalFooter>\n          </Modal>\n          {/* Delete multiple Modal */}\n          <Modal isOpen={modalDelete} toggle={() => setModal(!modalDelete)}>\n            <ModalHeader>\n              <IntlMessages id=\"Delete\" />\n            </ModalHeader>\n            <ModalBody>\n              Are you sure you want to delete selected items?\n        </ModalBody>\n            <ModalFooter>\n              <Button onClick={deleteMultiple} color=\"primary\">\n                Confirm\n          </Button>{' '}\n              <Button color=\"secondary\" onClick={() => setModalDelete(false)}>\n                Cancel\n          </Button>\n            </ModalFooter>\n          </Modal>\n        </div>\n      </>\n    );\n};\n\nexport default Variant;\n"]},"metadata":{},"sourceType":"module"}