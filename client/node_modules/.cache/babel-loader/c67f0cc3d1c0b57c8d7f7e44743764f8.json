{"ast":null,"code":"import _objectSpread from\"/home/browsewire/Desktop/CEI/cei/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/home/browsewire/Desktop/CEI/cei/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/browsewire/Desktop/CEI/cei/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/browsewire/Desktop/CEI/cei/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{Row,Button,Col,Label,Input,Card,CardBody}from'reactstrap';import axios from'axios';import Select from'react-select';import{useHistory}from'react-router';import{Colxx,Separator}from'../../../../components/common/CustomBootstrap';import Breadcrumb from'../../../../containers/navs/Breadcrumb';import CustomSelectInput from'../../../../components/common/CustomSelectInput';import IntlMessages from'../../../../helpers/IntlMessages';import{NotificationManager}from'../../../../components/common/react-notifications';var typeOptions=[{label:'Normal',value:'Normal'},{label:'FBA',value:'FBA'},{label:'Dropship',value:'Dropship'},{label:'Interim',value:'Interim'},{label:'Un Tested',value:'Un Tested'},{label:'New Egg',value:'New Egg'},{label:'C Discount',value:'C Discount'},{label:'WFS',value:'WFS'}];var activeOptions=[{label:'Active',value:true},{label:'Inactive',value:false}];var EditWarehouse=function EditWarehouse(_ref){var match=_ref.match;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isLoading=_useState2[0],setIsLoading=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),formData=_useState4[0],setFormData=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),vendors=_useState6[0],setVendors=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),change=_useState8[0],setChange=_useState8[1];var _useState9=useState({}),_useState10=_slicedToArray(_useState9,2),warehouse=_useState10[0],setWarehouse=_useState10[1];var _useState11=useState({}),_useState12=_slicedToArray(_useState11,2),type=_useState12[0],setType=_useState12[1];var _useState13=useState({}),_useState14=_slicedToArray(_useState13,2),sellable=_useState14[0],setSellable=_useState14[1];var _useState15=useState({}),_useState16=_slicedToArray(_useState15,2),vendor=_useState16[0],setVendor=_useState16[1];var _useState17=useState({}),_useState18=_slicedToArray(_useState17,2),isdefault=_useState18[0],setIsdefault=_useState18[1];var _useState19=useState({}),_useState20=_slicedToArray(_useState19,2),fbaShippmentAllow=_useState20[0],setFbaShippmentAllow=_useState20[1];var _useState21=useState({}),_useState22=_slicedToArray(_useState21,2),inventoryReportExclude=_useState22[0],setInventoryReportExclude=_useState22[1];var history=useHistory();useEffect(function(){_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _yield$axios$get,data,vendors;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get('/api/inventory/get-each-vendor');case 2:_yield$axios$get=_context.sent;data=_yield$axios$get.data;vendors=data.map(function(item){return{value:item.id,label:item.name};});setVendors(vendors);case 6:case\"end\":return _context.stop();}}},_callee);}))();},[change]);useEffect(function(){_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var _yield$axios$get2,data,_yield$axios$get3,_vendor;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:setIsLoading(true);_context2.next=3;return axios.get(\"/api/orders/warehouses/details/\".concat(match.params.id));case 3:_yield$axios$get2=_context2.sent;data=_yield$axios$get2.data;setWarehouse(data);setFormData({name:data.name,firstName:data.firstName,email:data.email,type:data.type});setType({label:data.type,value:data.type});setSellable({label:data.sellable?'Active':'Inactive',value:data.sellable});setIsdefault({label:data.default?'Active':'Inactive',value:data.default});setFbaShippmentAllow({label:data.fbaShippmentAllow?'Active':'Inactive',value:data.fbaShippmentAllow});setInventoryReportExclude({label:data.inventoryReportExclude?'Active':'Inactive',value:data.inventoryReportExclude});if(data.vendorId){_context2.next=14;break;}return _context2.abrupt(\"return\",setIsLoading(false));case 14:_context2.prev=14;_context2.next=17;return axios.get(\"/api/inventory/only-vendor?id=\".concat(data.vendorId));case 17:_yield$axios$get3=_context2.sent;_vendor=_yield$axios$get3.data;setVendor({label:_vendor.data.name,value:_vendor.data.id});_context2.next=25;break;case 22:_context2.prev=22;_context2.t0=_context2[\"catch\"](14);console.log(_context2.t0);case 25:setIsLoading(false);case 26:case\"end\":return _context2.stop();}}},_callee2,null,[[14,22]]);}))();},[]);var validateEmail=function validateEmail(email){var re=/\\S+@\\S+\\.\\S+/;return re.test(email);};var handleSubmit=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:console.log(formData);//? Perform Validation\nif(!(formData.name===''||formData.name===undefined)){_context3.next=5;break;}return _context3.abrupt(\"return\",NotificationManager.warning('Warehouse Name is Mandatory.','Warning',3000));case 5:if(!(formData.type===''||formData.type===undefined)){_context3.next=9;break;}return _context3.abrupt(\"return\",NotificationManager.warning('Warehouse Type is Mandatory.','Warning',3000));case 9:if(!(formData.firstName===''||formData.firstName===undefined)){_context3.next=13;break;}return _context3.abrupt(\"return\",NotificationManager.warning(\"Warehouse Contact Person's Name is Mandatory.\",'Warning',3000));case 13:if(!(formData.email===''||formData.email===undefined)){_context3.next=17;break;}return _context3.abrupt(\"return\",NotificationManager.warning(\"Warehouse Contact Person's Email is Mandatory\",'Warning',3000));case 17:if(validateEmail(formData.email)){_context3.next=19;break;}return _context3.abrupt(\"return\",NotificationManager.warning('Please Enter a Valid Email Address.','Warning',3000));case 19:_context3.prev=19;_context3.next=22;return axios.post(\"/api/orders/warehouses/update/\".concat(match.params.id),formData);case 22:NotificationManager.success('Warehouse Updated Successfully.','Success',3000);return _context3.abrupt(\"return\",history.push('/app/orders/warehouses'));case 26:_context3.prev=26;_context3.t0=_context3[\"catch\"](19);console.log(_context3.t0);return _context3.abrupt(\"return\",NotificationManager.error('Something went wrong','Error',3000));case 30:case\"end\":return _context3.stop();}}},_callee3,null,[[19,26]]);}));return function handleSubmit(){return _ref4.apply(this,arguments);};}();return isLoading?/*#__PURE__*/React.createElement(\"div\",{className:\"loading\"}):/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Colxx,{xxs:\"12\"},/*#__PURE__*/React.createElement(Breadcrumb,{heading:'Edit Warehouse',match:match}),/*#__PURE__*/React.createElement(\"div\",{className:\"text-zero\"},'  '),/*#__PURE__*/React.createElement(Separator,{className:\"mb-5\"}))),/*#__PURE__*/React.createElement(Row,{className:\"mb-4\"},/*#__PURE__*/React.createElement(Col,null,/*#__PURE__*/React.createElement(Card,null,/*#__PURE__*/React.createElement(CardBody,null,/*#__PURE__*/React.createElement(Colxx,{xxs:\"12\",className:\"mb-5\"},/*#__PURE__*/React.createElement(\"div\",{className:\"my-3 h5\"},\"Warehouse Details : -\"),/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,null,/*#__PURE__*/React.createElement(Label,null,/*#__PURE__*/React.createElement(IntlMessages,{id:\"Warehouse Name\"})),/*#__PURE__*/React.createElement(Input,{type:\"text\",defaultValue:warehouse.name,onChange:function onChange(e){setFormData(_objectSpread(_objectSpread({},formData),{},{name:e.target.value}));}})),/*#__PURE__*/React.createElement(Col,null,/*#__PURE__*/React.createElement(Label,null,/*#__PURE__*/React.createElement(IntlMessages,{id:\"Type\"})),/*#__PURE__*/React.createElement(Select,{defaultValue:type,components:{Input:CustomSelectInput},className:\"react-select\",classNamePrefix:\"react-select\",name:\"form-field-name\",options:typeOptions,onChange:function onChange(e){setFormData(_objectSpread(_objectSpread({},formData),{},{type:e.value}));}}))),/*#__PURE__*/React.createElement(Row,{className:\"mt-3\"},/*#__PURE__*/React.createElement(Col,null,/*#__PURE__*/React.createElement(Label,null,/*#__PURE__*/React.createElement(IntlMessages,{id:\"Quick Books Name\"})),/*#__PURE__*/React.createElement(Input,{defaultValue:warehouse.quickBooksName,type:\"textarea\",onChange:function onChange(e){setFormData(_objectSpread(_objectSpread({},formData),{},{quickBooksName:e.target.value}));}}))),/*#__PURE__*/React.createElement(Row,{className:\"mt-3\"},/*#__PURE__*/React.createElement(Col,null,/*#__PURE__*/React.createElement(Label,null,/*#__PURE__*/React.createElement(IntlMessages,{id:\"Handling Time(in Days)\"})),/*#__PURE__*/React.createElement(Input,{defaultValue:warehouse.handlingTime,onChange:function onChange(e){setFormData(_objectSpread(_objectSpread({},formData),{},{handlingTime:e.target.value}));}})),/*#__PURE__*/React.createElement(Col,null,/*#__PURE__*/React.createElement(Label,null,/*#__PURE__*/React.createElement(IntlMessages,{id:\"Vendor\"})),/*#__PURE__*/React.createElement(Select,{defaultValue:vendor,components:{Input:CustomSelectInput},className:\"react-select\",classNamePrefix:\"react-select\",name:\"form-field-name\",options:vendors,onChange:function onChange(e){setFormData(_objectSpread(_objectSpread({},formData),{},{vendorId:e.value}));}}))),/*#__PURE__*/React.createElement(Row,{className:\"mt-3\"},/*#__PURE__*/React.createElement(Col,null,/*#__PURE__*/React.createElement(Label,null,/*#__PURE__*/React.createElement(IntlMessages,{id:\"Sellable\"})),/*#__PURE__*/React.createElement(Select,{defaultValue:sellable,components:{Input:CustomSelectInput},className:\"react-select\",classNamePrefix:\"react-select\",name:\"form-field-name\",options:activeOptions,onChange:function onChange(e){setFormData(_objectSpread(_objectSpread({},formData),{},{sellable:e.value}));}})),/*#__PURE__*/React.createElement(Col,null,/*#__PURE__*/React.createElement(Label,null,/*#__PURE__*/React.createElement(IntlMessages,{id:\"Is Default\"})),/*#__PURE__*/React.createElement(Select,{defaultValue:isdefault,components:{Input:CustomSelectInput},className:\"react-select\",classNamePrefix:\"react-select\",name:\"form-field-name\",options:activeOptions,onChange:function onChange(e){setFormData(_objectSpread(_objectSpread({},formData),{},{isDefault:e.value}));}})),/*#__PURE__*/React.createElement(Col,null,/*#__PURE__*/React.createElement(Label,null,/*#__PURE__*/React.createElement(IntlMessages,{id:\"FBA Shipment Allow\"})),/*#__PURE__*/React.createElement(Select,{defaultValue:fbaShippmentAllow,components:{Input:CustomSelectInput},className:\"react-select\",classNamePrefix:\"react-select\",name:\"form-field-name\",options:activeOptions,onChange:function onChange(e){setFormData(_objectSpread(_objectSpread({},formData),{},{fbaShipmentAllow:e.value}));}})),/*#__PURE__*/React.createElement(Col,null,/*#__PURE__*/React.createElement(Label,null,/*#__PURE__*/React.createElement(IntlMessages,{id:\"Inventory Report Exclude\"})),/*#__PURE__*/React.createElement(Select,{defaultValue:inventoryReportExclude,components:{Input:CustomSelectInput},className:\"react-select\",classNamePrefix:\"react-select\",name:\"form-field-name\",options:activeOptions,onChange:function onChange(e){setFormData(_objectSpread(_objectSpread({},formData),{},{inventoryReportExclude:e.value}));}}))),/*#__PURE__*/React.createElement(\"div\",{className:\"mt-3 h5\"},\"Contact Person Details : -\"),/*#__PURE__*/React.createElement(Row,{className:\"mt-3\"},/*#__PURE__*/React.createElement(Col,null,/*#__PURE__*/React.createElement(Label,null,/*#__PURE__*/React.createElement(IntlMessages,{id:\"First Name\"})),/*#__PURE__*/React.createElement(Input,{type:\"text\",defaultValue:warehouse.firstName,onChange:function onChange(e){setFormData(_objectSpread(_objectSpread({},formData),{},{firstName:e.target.value}));}})),/*#__PURE__*/React.createElement(Col,null,/*#__PURE__*/React.createElement(Label,null,/*#__PURE__*/React.createElement(IntlMessages,{id:\"Middle Name\"})),/*#__PURE__*/React.createElement(Input,{type:\"text\",defaultValue:warehouse.middleName,onChange:function onChange(e){setFormData(_objectSpread(_objectSpread({},formData),{},{middleName:e.target.value}));}})),/*#__PURE__*/React.createElement(Col,null,/*#__PURE__*/React.createElement(Label,null,/*#__PURE__*/React.createElement(IntlMessages,{id:\"Last Name\"})),/*#__PURE__*/React.createElement(Input,{type:\"text\",defaultValue:warehouse.lastName,onChange:function onChange(e){setFormData(_objectSpread(_objectSpread({},formData),{},{lastName:e.target.value}));}}))),/*#__PURE__*/React.createElement(Row,{className:\"mt-3\"},/*#__PURE__*/React.createElement(Col,null,/*#__PURE__*/React.createElement(Label,null,/*#__PURE__*/React.createElement(IntlMessages,{id:\"Email Address\"})),/*#__PURE__*/React.createElement(Input,{type:\"email\",defaultValue:warehouse.email,onChange:function onChange(e){setFormData(_objectSpread(_objectSpread({},formData),{},{email:e.target.value}));}})),/*#__PURE__*/React.createElement(Col,null,/*#__PURE__*/React.createElement(Label,null,/*#__PURE__*/React.createElement(IntlMessages,{id:\"Phone\"})),/*#__PURE__*/React.createElement(Input,{type:\"text\",defaultValue:warehouse.phone,onChange:function onChange(e){setFormData(_objectSpread(_objectSpread({},formData),{},{phone:e.target.value}));}}))),/*#__PURE__*/React.createElement(Row,{className:\"mt-3\"},/*#__PURE__*/React.createElement(Col,null,/*#__PURE__*/React.createElement(Label,null,/*#__PURE__*/React.createElement(IntlMessages,{id:\"Address 1\"})),/*#__PURE__*/React.createElement(Input,{type:\"text\",defaultValue:warehouse.address1,onChange:function onChange(e){setFormData(_objectSpread(_objectSpread({},formData),{},{address1:e.target.value}));}})),/*#__PURE__*/React.createElement(Col,null,/*#__PURE__*/React.createElement(Label,null,/*#__PURE__*/React.createElement(IntlMessages,{id:\"Address 2\"})),/*#__PURE__*/React.createElement(Input,{type:\"text\",defaultValue:warehouse.address2,onChange:function onChange(e){setFormData(_objectSpread(_objectSpread({},formData),{},{address2:e.target.value}));}}))),/*#__PURE__*/React.createElement(Row,{className:\"mt-3\"},/*#__PURE__*/React.createElement(Col,null,/*#__PURE__*/React.createElement(Label,null,/*#__PURE__*/React.createElement(IntlMessages,{id:\"City\"})),/*#__PURE__*/React.createElement(Input,{type:\"text\",defaultValue:warehouse.city,onChange:function onChange(e){setFormData(_objectSpread(_objectSpread({},formData),{},{city:e.target.value}));}})),/*#__PURE__*/React.createElement(Col,null,/*#__PURE__*/React.createElement(Label,null,/*#__PURE__*/React.createElement(IntlMessages,{id:\"State\"})),/*#__PURE__*/React.createElement(Input,{type:\"text\",defaultValue:warehouse.state,onChange:function onChange(e){setFormData(_objectSpread(_objectSpread({},formData),{},{state:e.target.value}));}})),/*#__PURE__*/React.createElement(Col,null,/*#__PURE__*/React.createElement(Label,null,/*#__PURE__*/React.createElement(IntlMessages,{id:\"Zip Code\"})),/*#__PURE__*/React.createElement(Input,{type:\"text\",defaultValue:warehouse.zipCode,onChange:function onChange(e){setFormData(_objectSpread(_objectSpread({},formData),{},{zipCode:e.target.value}));}})),/*#__PURE__*/React.createElement(Col,null,/*#__PURE__*/React.createElement(Label,null,/*#__PURE__*/React.createElement(IntlMessages,{id:\"Country\"})),/*#__PURE__*/React.createElement(Input,{type:\"text\",defaultValue:warehouse.country,onChange:function onChange(e){setFormData(_objectSpread(_objectSpread({},formData),{},{country:e.target.value}));}}))),/*#__PURE__*/React.createElement(\"div\",{className:\"mt-3\"},/*#__PURE__*/React.createElement(Button,{className:\"mr-2\",color:\"secondary\",outline:true,onClick:function onClick(){history.push('/app/orders/warehouses');}},/*#__PURE__*/React.createElement(IntlMessages,{id:\"Cancel\"})),/*#__PURE__*/React.createElement(Button,{color:\"primary\",onClick:handleSubmit},/*#__PURE__*/React.createElement(IntlMessages,{id:\"Update Warehouse\"})))))))));};export default EditWarehouse;","map":null,"metadata":{},"sourceType":"module"}